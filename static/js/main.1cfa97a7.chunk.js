(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){e.exports=n.p+"static/media/default-artwork.6bba9800.png"},298:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},329:function(e,t,n){e.exports=n(614)},369:function(e,t){},611:function(e,t,n){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateToken",function(){return F}),n.d(a,"clearToken",function(){return H}),n.d(a,"addNewTrack",function(){return Y}),n.d(a,"addCurrentTrack",function(){return W}),n.d(a,"addTrackList",function(){return q}),n.d(a,"removeFromTracklist",function(){return X}),n.d(a,"updateProgressTimer",function(){return Q}),n.d(a,"wsConnect",function(){return Z}),n.d(a,"wsConnecting",function(){return $}),n.d(a,"wsConnected",function(){return ee}),n.d(a,"wsDisconnect",function(){return te}),n.d(a,"wsDisconnected",function(){return ne}),n.d(a,"getCurrentTrack",function(){return ae}),n.d(a,"getTimePosition",function(){return re}),n.d(a,"getState",function(){return ce}),n.d(a,"getImage",function(){return oe}),n.d(a,"newImage",function(){return ie}),n.d(a,"resolveImage",function(){return ue}),n.d(a,"getTrackList",function(){return le}),n.d(a,"clearTrackList",function(){return se}),n.d(a,"startPlaying",function(){return de}),n.d(a,"stopPlaying",function(){return me}),n.d(a,"nextPlaying",function(){return fe}),n.d(a,"previousPlaying",function(){return pe}),n.d(a,"getVolume",function(){return Ee}),n.d(a,"updateVolume",function(){return ke}),n.d(a,"updatePlaybackState",function(){return be}),n.d(a,"setVolume",function(){return ye});var r=n(0),c=n.n(r),o=n(28),i=n.n(o),u=n(26),l=n(29),s=n(123),d=n.n(s),m=n(296),f=n(63),p=n(64),E=n(70),k=n(65),b=n(71),y=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(k.a)(t).call(this,e))).state={hasError:!1},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),g=c.a.createContext(),h=n(297),C=n.n(h),v="mopidy::playback.getCurrentTrack",T="mopidy::event:trackPlaybackStarted",O="mopidy::event:playbackStateChanged",N="mopidy::tracklist.getTracks",D="mopidy::tracklist.add",S="mopidy::tracklist.remove",j="mopidy::tracklist.clear",_="mopidy::library.getImages",A="mopidy::playback.getTimePosition",P="mopidy::playback.getState",R="mopidy::playback.play",w="mopidy::playback.stop",I="mopidy::playback.next",x="mopidy::playback.previous",U="playing",L="paused",V="stopped",M="mopidy::mixer.setVolume",K="mopidy::mixer.getVolume",G="mopidy::event:volumeChanged",B={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],NEW_IMAGE:"actionNewImage",RESOLVE_IMAGE:"actionResolveImage",SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer"},J=function(e){return s.notify.show(e,"success",3e3,{})},z=n(298),F=function(e){return{type:B.STORE_TOKEN,token:e}},H=function(){return{type:B.CLEAR_STORE_TOKEN}},Y=function(e){var t=Object(z.transformUrl)(e);return{type:B.SEND,key:D,params:{uri:t}}},W=function(e){return{type:B.ADD_CURRENT_TRACK,track:e}},q=function(e){return{type:B.ADD_TRACKS,list:e}},X=function(e){return{type:B.SEND,key:S,params:{uri:[e]}}},Q=function(e,t){return t===1/0&&(t=0),{type:B.UPDATE_PROGRESS_TIMER,position:e,duration:t}},Z=function(){return{type:B.CONNECT}},$=function(){return{type:B.CONNECTING}},ee=function(){return{type:B.CONNECTED}},te=function(){return{type:B.DISCONNECT}},ne=function(){return{type:B.DISCONNECTED}},ae=function(){return{type:B.SEND,key:v}},re=function(){return{type:B.SEND,key:A}},ce=function(){return{type:B.SEND,key:P}},oe=function(e){return{type:B.SEND,key:_,params:[[e]],uri:e}},ie=function(e){return{type:B.NEW_IMAGE,uri:e}},ue=function(e){return{type:B.RESOLVE_IMAGE,data:e}},le=function(){return{type:B.SEND,key:N}},se=function(){return{type:B.SEND,key:j}},de=function(){return J("Jukebox Playing"),{type:B.SEND,key:R}},me=function(){return J("Jukebox Halted"),{type:B.SEND,key:w}},fe=function(){return{type:B.SEND,key:I}},pe=function(){return{type:B.SEND,key:x}},Ee=function(){return{type:B.SEND,key:K}},ke=function(e){return{type:B.UPDATE_VOLUME,volume:e}},be=function(e){return{type:B.UPDATE_PLAYBACK_STATE,state:e}},ye=function(e){return{type:B.SEND,key:M,params:[Number(e)]}},ge=function(e,t){var n=t.findIndex(function(t){return t.ref===e});return t[n]?t[n].uri:null},he=n(299),Ce=n.n(he),ve=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},Te=function(e){return.001*e},Oe=function(e){if(0===e.duration)return 0;var t=Te(e.position),n=Te(e.duration);return Math.round(t/n*100)},Ne="auth::authenticationTokenInvalid",De={encode:function(e,t,n){return{jwt:e,key:t,data:n}},decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify(De.encode(e,t,n))}},Se=De,je=function(e,t){e.dispatch(be(t))},_e=function(e){return e.composer?e.composer.uri:e.album.uri},Ae=function(e,t,n){var a=Se.decode(t),r=a.key,c=a.data;switch(r){case Ne:console.log("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(H());break;case v:case T:c.track&&function(e,t,n){t.dispatch(W(e)),t.dispatch(oe(_e(e)));var a=n.set(0,e.length);t.getState().jukebox.playbackState===U&&a.start()}(c.track,e,n);break;case O:case P:!function(e,t,n){switch(t){case L:case V:je(e,t),n.stop();break;case U:je(e,t),n.start()}}(e,c,n);break;case N:!function(e,t){t.dispatch(q(e)),e.forEach(function(e){t.dispatch(oe(_e(e.track)))})}(c,e);break;case I:case x:e.dispatch(ae());break;case K:e.dispatch(ke(c));break;case G:e.dispatch(ke(c)),J("Volume Changed");break;case _:e.dispatch(ue(c));break;case A:n.set(c);break;default:console.log("Unknown message: ".concat(r," body: ").concat(c))}},Pe={loadInitial:function(e){["getCurrentTrack","getTimePosition","getState","getTrackList","getVolume"].forEach(function(t){e.dispatch(a[t]())})}},Re=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null,r=function(e,t){return function(t){n=function(e,t){return Ce()({callback:function(n,a){e.dispatch(t.updateProgressTimer(n,a))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(e,a),e.dispatch(ee()),Pe.loadInitial(e)}},c=function(a){null!=t&&t.close(),a.dispatch($()),(t=C()(e,{transports:["websocket"]})).on("message",function(e){return function(t){Ae(e,t,n)}}(a)),t.on("connect",r(a)),t.on("disconnect",function(e){return function(t){e.dispatch(te())}}(a))};return function(e){return function(a){return function(r){switch(r.type){case B.CONNECT:c(e);break;case B.DISCONNECT:!function(e){n&&n.reset(),e.dispatch(ne())}(e);break;case B.SEND:if(r.key===_){if(!r.uri)break;if(ge(r.uri,e.getState().assets))break;e.dispatch(ie(r.uri))}t.emit("message",Se.encodeToJson(function(e){return e.getState().settings.token}(e),r.key,r.params));break;default:return a(r)}}}}}(),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_CURRENT_TRACK:return t.track;default:return e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_TRACKS:return t.list.map(function(e){return e.track});default:return e}},xe=n(318),Ue=n(316),Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.NEW_IMAGE:return e.find(function(e){return e.ref===t.uri})?e:[].concat(Object(Ue.a)(e),[{ref:t.uri}]);case B.RESOLVE_IMAGE:return e.map(function(e){return t.data[e.ref]&&t.data[e.ref][1]?Object(xe.a)({},e,{uri:t.data[e.ref][1].uri}):e}).slice(0,200);default:return e}},Ve={position:0,duration:0},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration};default:return e}},Ke={online:!1,volume:0,playbackState:V},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.CONNECTED:return Object.assign({},e,{online:!0});case B.DISCONNECTED:return Object.assign({},e,{online:!1});case B.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case B.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Be={token:null},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.STORE_TOKEN:return Object.assign({},e,{token:t.token});case B.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},ze=Object(l.combineReducers)({track:we,tracklist:Ie,assets:Le,timer:Me,jukebox:Ge,settings:Je}),Fe=n(620),He=n(66),Ye=n(124),We=n.n(Ye),qe=n(625),Xe=n(619),Qe=n(627),Ze=n(626),$e=n(624),et=n(36),tt=function(e,t){if((e+=1)<=100)return function(){t(e)}},nt=function(e,t){if((e-=1)>=0)return function(){t(e)}},at=function(e){var t=e.disabled,n=e.volume,a=e.onVolumeChange;return c.a.createElement($e.a.Group,{floated:"right"},c.a.createElement($e.a,{className:"jb-volume-down",onClick:nt(n,a),disabled:t},c.a.createElement(et.a,{name:"volume down"})),c.a.createElement($e.a.Or,{text:n}),c.a.createElement($e.a,{className:"jb-volume-up",onClick:tt(n,a),disabled:t},c.a.createElement(et.a,{name:"volume up"})))},rt=n(133),ct=n(621),ot=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.clearButton=function(){return c.a.createElement(rt.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:n.show,className:"jb-clear-button"},"CLEAR")},n.show=function(){n.setState({open:!0})},n.handleConfirm=function(e){n.setState({open:!1}),n.props.onClear(e)},n.handleCancel=function(){n.setState({open:!1})},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.disabled?null:c.a.createElement("span",null,this.clearButton(),c.a.createElement(ct.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}]),t}(r.Component),it=n(190),ut=function(e){return e.assets},lt=Object(it.a)([function(e){return e.track},ut],function(e,t){return e?ge(e.album.uri,t):null}),st=Object(it.a)([function(e){return e.tracklist},ut],function(e,t){var n={};return e.forEach(function(e){n[e.album.uri]=ge(e.album.uri,t)}),n}),dt=n(623),mt=n(317),ft=n(315),pt=n(132),Et=n.n(pt),kt=(n(611),function(e){return e||(e=Et.a),c.a.createElement(mt.a,{src:e})}),bt=function(e){var t,n=e.track,a=e.image,r=e.progress;return n?c.a.createElement(dt.a,null,kt(a),c.a.createElement(dt.a.Content,null,c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"progress-text"},r," %"),c.a.createElement(ft.a,{percent:r})),c.a.createElement(dt.a.Header,null,n.name),c.a.createElement(dt.a.Meta,null,"(",ve(n.length),") ",n.artist.name),function(e){if(!e)return null;var t=e.year?" (".concat(e.year,")"):null;return c.a.createElement(dt.a.Description,null,e.name,t)}(n.album),(t=n.composer)?c.a.createElement(dt.a.Description,null,t.name):null),c.a.createElement(dt.a.Content,{extra:!0},function(e){var t={spotify:"green"},n=e.split(":")[0];return t[n]?c.a.createElement(et.a,{name:n,color:t[n]}):null}(n.uri))):c.a.createElement(dt.a,null,kt(null),c.a.createElement(dt.a.Content,null,c.a.createElement(dt.a.Header,null,"Nothing playing"),c.a.createElement(dt.a.Description,null,"Drag some music here or press play.")))},yt=Object(u.b)(function(e){return{track:e.track,image:lt(e),progress:Oe(e.timer)}})(function(e){var t=e.track,n=e.image,a=e.progress;return c.a.createElement(bt,{track:t,image:n,progress:a})}),gt=function(){var e=Object(r.useContext)(g),t=e.googleUser,n=e.signIn,a=e.signOut,o=c.a.createElement($e.a,{icon:"power off",floated:"right",onClick:function(){return n()},className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(o=c.a.createElement(mt.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:function(){return a()}})),c.a.createElement(c.a.Fragment,null,o)},ht=n(4),Ct=n.n(ht),vt=n(622),Tt=(n(612),function(e,t,n,a,r,o){var i,u,l;return n&&t.album&&(i=n[t.album.uri]),n&&t.composer&&(i=n[t.composer.uri]),i||(i=Et.a),function(e){var t,n,a=e.image,r=e.isCurrent,o=e.onClick,i=e.hasBeenPlayed;return r&&(t="current-image"),o&&!r&&(n="Click to remove from playlist",t="remove-image"),c.a.createElement(mt.a,{className:t,size:i?"tiny":"mini",src:a,title:n,onClick:o,inline:!0})}({image:i,hasBeenPlayed:o,isCurrent:a,onClick:e||a?void 0:(u=t.uri,l=r,function(){return l(u)})})}),Ot=function(e,t,n,a,r){var o;return t.map(function(t,i){var u=function(e,t){return!!e&&e.uri===t.uri}(a,t);return o&&(o+=t.length),u&&(o=Date.now()),c.a.createElement(vt.a.Item,{className:Ct()({"current-track":u}),key:"".concat(i,"-").concat(t.uri)},Tt(e,t,n,u,r,o),c.a.createElement(vt.a.Content,{className:Ct()({"track-info":!o})},function(e){return c.a.createElement(vt.a.Header,{as:"h4"},e.name)}(t),function(e){return c.a.createElement(vt.a.Description,null,e.artist.name," ",c.a.createElement("small",null,"(",ve(e.length),")"))}(t)))})},Nt=function(e){var t=e.disabled,n=e.tracks,a=e.images,r=e.currentTrack,o=e.onRemoveTrack;return n?c.a.createElement(vt.a,{relaxed:!0},Ot(t,n,a,r,o)):null},Dt=function(e){var t=e.disabled,n=e.onPrevious,a=e.onNext;return c.a.createElement("span",null,function(e,t){return c.a.createElement($e.a,{onClick:e,animated:"vertical",className:"jb-previous-button",disabled:t},c.a.createElement($e.a.Content,{hidden:!0},"Prev"),c.a.createElement($e.a.Content,{visible:!0},c.a.createElement(et.a,{name:"step backward"})))}(n,t),function(e,t){return c.a.createElement($e.a,{onClick:e,animated:"vertical",className:"jb-next-button",disabled:t},c.a.createElement($e.a.Content,{hidden:!0},"Next"),c.a.createElement($e.a.Content,{visible:!0},c.a.createElement(et.a,{name:"step forward"})))}(a,t))},St=function(e){var t=e.disabled,n=e.playbackState,a=e.onPlay,r=e.onStop,o=e.onPrevious,i=e.onNext;return c.a.createElement("span",null,c.a.createElement(Dt,{disabled:t,onPrevious:o,onNext:i}),function(e,t,n){return c.a.createElement($e.a,{onClick:e,animated:"vertical",disabled:t===U||n,active:t===U,className:"jb-play-button"},c.a.createElement($e.a.Content,{hidden:!0},"Play"),c.a.createElement($e.a.Content,{visible:!0},c.a.createElement(et.a,{name:"play"})))}(a,n,t),function(e,t,n){return c.a.createElement($e.a,{onClick:e,animated:"vertical",disabled:t===V||n,active:t===V,className:"jb-stop-button"},c.a.createElement($e.a.Content,{hidden:!0},"Stop"),c.a.createElement($e.a.Content,{visible:!0},c.a.createElement(et.a,{name:"stop"})))}(r,n,t))},jt=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(c.a.createElement("div",{title:"Drag in Spotify tracks to add to playlist"},this.props.children))}}]),t}(r.Component),_t=Object(He.DropTarget)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget()}})(jt),At=function(e){var t=e.disabled,n=e.onDrop,a=e.children;return t?a:c.a.createElement(He.DragDropContextProvider,{backend:We.a},c.a.createElement(_t,{accepts:B.DROP_TYPES,onDrop:n},a))},Pt=Object(He.DragDropContext)(We.a)(function(){var e=Object(u.d)(function(e){return e.jukebox}),t=Object(u.d)(function(e){return e.tracklist}),n=Object(u.d)(function(e){return e.track}),a=Object(u.d)(function(e){return st(e)}),o=Object(u.c)(),i=Object(r.useContext)(g),l=i.isSignedIn,s=i.googleUser;return Object(r.useEffect)(function(){return o(Z()),function(){o(te())}},[o]),o(l?F(s.tokenId):H()),c.a.createElement(qe.a.Dimmable,{blurring:!0,className:"jukebox-dashboard",dimmed:!e.online},c.a.createElement(gt,null),c.a.createElement(at,{disabled:!l,volume:e.volume,onVolumeChange:function(e){return o(ye(e))}}),c.a.createElement(St,{disabled:!l,playbackState:e.playbackState,onPlay:function(){return o(de())},onStop:function(){return o(me())},onNext:function(){return o(fe())},onPrevious:function(){return o(pe())}}),c.a.createElement(Xe.a,null),c.a.createElement(Qe.a,{columns:2},c.a.createElement(Qe.a.Column,{width:4},c.a.createElement(At,{disabled:!l,onDrop:function(e,t){t&&o(Y(t.getItem().urls[0]))}},c.a.createElement(Ze.a,{size:"small"},"Current Track"),c.a.createElement(yt,null))),c.a.createElement(Qe.a.Column,{width:12},c.a.createElement(Ze.a,{size:"small"},"Playlist ",c.a.createElement(ot,{disabled:!l,onClear:function(){return o(se())}})),c.a.createElement(Nt,{disabled:!l,images:a,tracks:t,currentTrack:n,onRemoveTrack:function(e){return o(X(e))}}))))}),Rt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,wt=Object(l.createStore)(ze,Rt(Object(l.applyMiddleware)(Re))),It=function(){var e=Object(m.useGoogleLogin)({clientId:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(u.a,{store:wt},c.a.createElement(Fe.a,{fluid:!0},c.a.createElement(g.Provider,{value:e},c.a.createElement(y,null,c.a.createElement(d.a,null),c.a.createElement(Pt,null)))))};n(613);i.a.render(c.a.createElement(It,null),document.getElementById("root"))}},[[329,1,2]]]);
//# sourceMappingURL=main.1cfa97a7.chunk.js.map