(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){e.exports=n.p+"static/media/default-artwork.6bba9800.png"},299:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},330:function(e,t,n){e.exports=n(615)},370:function(e,t){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateToken",function(){return F}),n.d(a,"clearToken",function(){return H}),n.d(a,"addNewTrack",function(){return Y}),n.d(a,"addCurrentTrack",function(){return W}),n.d(a,"addTrackList",function(){return q}),n.d(a,"removeFromTracklist",function(){return X}),n.d(a,"updateProgressTimer",function(){return Q}),n.d(a,"wsConnect",function(){return Z}),n.d(a,"wsConnecting",function(){return $}),n.d(a,"wsConnected",function(){return ee}),n.d(a,"wsDisconnect",function(){return te}),n.d(a,"wsDisconnected",function(){return ne}),n.d(a,"getCurrentTrack",function(){return ae}),n.d(a,"getTimePosition",function(){return re}),n.d(a,"getState",function(){return ce}),n.d(a,"getImage",function(){return oe}),n.d(a,"newImage",function(){return ie}),n.d(a,"resolveImage",function(){return ue}),n.d(a,"getTrackList",function(){return le}),n.d(a,"clearTrackList",function(){return se}),n.d(a,"startPlaying",function(){return de}),n.d(a,"pausePlaying",function(){return me}),n.d(a,"nextPlaying",function(){return fe}),n.d(a,"previousPlaying",function(){return pe}),n.d(a,"getVolume",function(){return Ee}),n.d(a,"updateVolume",function(){return be}),n.d(a,"updatePlaybackState",function(){return ke}),n.d(a,"setVolume",function(){return ye});var r=n(0),c=n.n(r),o=n(28),i=n.n(o),u=n(26),l=n(29),s=n(123),d=n.n(s),m=n(297),f=n(63),p=n(64),E=n(70),b=n(65),k=n(71),y=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),g=c.a.createContext(),h=n(298),C=n.n(h),v="mopidy::playback.getCurrentTrack",T="mopidy::event:trackPlaybackStarted",O="mopidy::event:playbackStateChanged",N="mopidy::tracklist.getTracks",D="mopidy::tracklist.add",S="mopidy::tracklist.remove",j="mopidy::tracklist.clear",_="mopidy::library.getImages",A="mopidy::playback.getTimePosition",P="mopidy::playback.getState",w="mopidy::playback.play",R="mopidy::playback.pause",I="mopidy::playback.next",x="mopidy::playback.previous",U="playing",L="paused",M="stopped",V="mopidy::mixer.setVolume",K="mopidy::mixer.getVolume",G="mopidy::event:volumeChanged",z={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],NEW_IMAGE:"actionNewImage",RESOLVE_IMAGE:"actionResolveImage",SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer"},B=function(e){return s.notify.show(e,"success",3e3,{})},J=n(299),F=function(e){return{type:z.STORE_TOKEN,token:e}},H=function(){return{type:z.CLEAR_STORE_TOKEN}},Y=function(e){var t=Object(J.transformUrl)(e);return{type:z.SEND,key:D,params:{uri:t}}},W=function(e){return{type:z.ADD_CURRENT_TRACK,track:e}},q=function(e){return{type:z.ADD_TRACKS,list:e}},X=function(e){return{type:z.SEND,key:S,params:{uri:[e]}}},Q=function(e,t){return t===1/0&&(t=0),{type:z.UPDATE_PROGRESS_TIMER,position:e,duration:t}},Z=function(){return{type:z.CONNECT}},$=function(){return{type:z.CONNECTING}},ee=function(){return{type:z.CONNECTED}},te=function(){return{type:z.DISCONNECT}},ne=function(){return{type:z.DISCONNECTED}},ae=function(){return{type:z.SEND,key:v}},re=function(){return{type:z.SEND,key:A}},ce=function(){return{type:z.SEND,key:P}},oe=function(e){return{type:z.SEND,key:_,params:[[e]],uri:e}},ie=function(e){return{type:z.NEW_IMAGE,uri:e}},ue=function(e){return{type:z.RESOLVE_IMAGE,data:e}},le=function(){return{type:z.SEND,key:N}},se=function(){return{type:z.SEND,key:j}},de=function(){return B("Jukebox Playing"),{type:z.SEND,key:w}},me=function(){return B("Jukebox Paused"),{type:z.SEND,key:R}},fe=function(){return{type:z.SEND,key:I}},pe=function(){return{type:z.SEND,key:x}},Ee=function(){return{type:z.SEND,key:K}},be=function(e){return{type:z.UPDATE_VOLUME,volume:e}},ke=function(e){return{type:z.UPDATE_PLAYBACK_STATE,state:e}},ye=function(e){return{type:z.SEND,key:V,params:[Number(e)]}},ge=function(e,t){var n=t.findIndex(function(t){return t.ref===e});return t[n]?t[n].uri:null},he=n(300),Ce=n.n(he),ve=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},Te=function(e){return.001*e},Oe=function(e){if(0===e.duration)return 0;var t=Te(e.position),n=Te(e.duration);return Math.round(t/n*100)},Ne="auth::authenticationTokenInvalid",De={encode:function(e,t,n){return{jwt:e,key:t,data:n}},decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify(De.encode(e,t,n))}},Se=De,je=function(e,t){e.dispatch(ke(t))},_e=function(e){return e.composer?e.composer.uri:e.album.uri},Ae=function(e,t,n){var a=Se.decode(t),r=a.key,c=a.data;switch(r){case Ne:console.log("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(H());break;case v:case T:!function(e,t,n){e&&(t.dispatch(W(e)),n.set(0,e.length).start(),t.dispatch(oe(_e(e))))}(c.track,e,n);break;case O:case P:!function(e,t,n){switch(t){case L:case M:je(e,t),n.stop();break;case U:je(e,t),n.start()}}(e,c,n);break;case N:!function(e,t){t.dispatch(q(e)),e.forEach(function(e){t.dispatch(oe(_e(e.track)))})}(c,e);break;case K:case G:e.dispatch(be(c));break;case _:e.dispatch(ue(c));break;case A:n.set(c);break;default:console.log("Unknown message: ".concat(r," body: ").concat(c))}},Pe={loadInitial:function(e){["getCurrentTrack","getTimePosition","getState","getTrackList","getVolume"].forEach(function(t){e.dispatch(a[t]())})}},we=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null,r=function(e,t){return function(t){n=function(e,t){return Ce()({callback:function(n,a){e.dispatch(t.updateProgressTimer(n,a))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(e,a),e.dispatch(ee()),Pe.loadInitial(e)}},c=function(a){null!=t&&t.close(),a.dispatch($()),(t=C()(e,{transports:["websocket"]})).on("message",function(e){return function(t){Ae(e,t,n)}}(a)),t.on("connect",r(a)),t.on("disconnect",function(e){return function(t){e.dispatch(te())}}(a))};return function(e){return function(a){return function(r){switch(r.type){case z.CONNECT:c(e);break;case z.DISCONNECT:!function(e){n&&n.reset(),e.dispatch(ne())}(e);break;case z.SEND:if(r.key===_){if(!r.uri)break;if(ge(r.uri,e.getState().assets))break;e.dispatch(ie(r.uri))}t.emit("message",Se.encodeToJson(function(e){return e.getState().settings.token}(e),r.key,r.params));break;default:return a(r)}}}}}(),Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.ADD_CURRENT_TRACK:return t.track;default:return e}},Ie=n(133),xe=function(e,t){if(0!==e.length){var n=function(e,t){var n=new Set(e),a=new Set(t.map(function(e){return e.uri}));return new Set(Object(Ie.a)(n).filter(function(e){return!a.has(e.uri)}))}(t,e);if(0!==n.size){var a=!0,r=!1,c=void 0;try{for(var o,i=n[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;B("Added ".concat(u.name," by ").concat(u.artist.name))}}catch(l){r=!0,c=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}}}},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.ADD_TRACKS:return xe(e,t.list.map(function(e){return e.track})),t.list.map(function(e){return e.track});default:return e}},Le=n(318),Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.NEW_IMAGE:return e.find(function(e){return e.ref===t.uri})?e:[].concat(Object(Ie.a)(e),[{ref:t.uri}]);case z.RESOLVE_IMAGE:return e.map(function(e){return t.data[e.ref]&&t.data[e.ref][1]?Object(Le.a)({},e,{uri:t.data[e.ref][1].uri}):e}).slice(0,200);default:return e}},Ve={position:0,duration:0},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration};default:return e}},Ge={online:!1,volume:0,playbackState:L},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.CONNECTED:return Object.assign({},e,{online:!0});case z.DISCONNECTED:return Object.assign({},e,{online:!1});case z.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case z.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Be={token:null},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.STORE_TOKEN:return Object.assign({},e,{token:t.token});case z.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},Fe=Object(l.combineReducers)({track:Re,tracklist:Ue,assets:Me,timer:Ke,jukebox:ze,settings:Je}),He=n(621),Ye=n(66),We=n(124),qe=n.n(We),Xe=n(626),Qe=n(620),Ze=n(628),$e=n(627),et=n(625),tt=n(36),nt=function(e,t){if((e+=1)<=100)return function(){t(e)}},at=function(e,t){if((e-=1)>=0)return function(){t(e)}},rt=function(e){var t=e.disabled,n=e.volume,a=e.onVolumeChange;return c.a.createElement(et.a.Group,{floated:"right"},c.a.createElement(et.a,{className:"jb-volume-down",onClick:at(n,a),disabled:t},c.a.createElement(tt.a,{name:"volume down"})),c.a.createElement(et.a.Or,{text:n}),c.a.createElement(et.a,{className:"jb-volume-up",onClick:nt(n,a),disabled:t},c.a.createElement(tt.a,{name:"volume up"})))},ct=n(134),ot=n(622),it=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.clearButton=function(){return c.a.createElement(ct.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:n.show,className:"jb-clear-button"},"CLEAR")},n.show=function(){n.setState({open:!0})},n.handleConfirm=function(e){n.setState({open:!1}),n.props.onClear(e)},n.handleCancel=function(){n.setState({open:!1})},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.disabled?null:c.a.createElement("span",null,this.clearButton(),c.a.createElement(ot.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}]),t}(r.Component),ut=n(191),lt=function(e){return e.assets},st=Object(ut.a)([function(e){return e.track},lt],function(e,t){return e?ge(e.album.uri,t):null}),dt=Object(ut.a)([function(e){return e.tracklist},lt],function(e,t){var n={};return e.forEach(function(e){n[e.album.uri]=ge(e.album.uri,t)}),n}),mt=n(624),ft=n(319),pt=n(317),Et=n(132),bt=n.n(Et),kt=(n(612),function(e){return e||(e=bt.a),c.a.createElement(ft.a,{src:e})}),yt=function(e){var t,n=e.track,a=e.image,r=e.progress;return n?c.a.createElement(mt.a,null,kt(a),c.a.createElement(mt.a.Content,null,c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"progress-text"},r," %"),c.a.createElement(pt.a,{percent:r})),c.a.createElement(mt.a.Header,null,n.name),c.a.createElement(mt.a.Meta,null,"(",ve(n.length),") ",n.artist.name),function(e){if(!e)return null;var t=e.year?" (".concat(e.year,")"):null;return c.a.createElement(mt.a.Description,null,e.name,t)}(n.album),(t=n.composer)?c.a.createElement(mt.a.Description,null,t.name):null),c.a.createElement(mt.a.Content,{extra:!0},function(e){var t={spotify:"green"},n=e.split(":")[0];return t[n]?c.a.createElement(tt.a,{name:n,color:t[n]}):null}(n.uri))):c.a.createElement(mt.a,null,kt(null),c.a.createElement(mt.a.Content,null,c.a.createElement(mt.a.Header,null,"Nothing playing"),c.a.createElement(mt.a.Description,null,"Drag some music here or press play.")))},gt=Object(u.b)(function(e){return{track:e.track,image:st(e),progress:Oe(e.timer)}})(function(e){var t=e.track,n=e.image,a=e.progress;return c.a.createElement(yt,{track:t,image:n,progress:a})}),ht=function(){var e=Object(r.useContext)(g),t=e.googleUser,n=e.signIn,a=e.signOut,o=c.a.createElement(et.a,{icon:"power off",floated:"right",onClick:function(){return n()},className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(o=c.a.createElement(ft.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:function(){return a()}})),c.a.createElement(c.a.Fragment,null,o)},Ct=n(4),vt=n.n(Ct),Tt=n(623),Ot=n(316),Nt=n.n(Ot),Dt=(n(613),function(e){return c.a.createElement(ft.a,{className:"current-image",size:"tiny",src:e,inline:!0})}),St=function(e,t){return function(){return t(e)}},jt=function(e,t,n,a,r){var o;return n&&t.album&&(o=n[t.album.uri]),n&&t.composer&&(o=n[t.composer.uri]),o||(o=bt.a),e?Dt(o):a?Dt(o):function(e,t,n){return c.a.createElement(ft.a,{className:"remove-image",size:"mini",src:e,inline:!0,onClick:St(t,n)})}(o,t.uri,r)},_t=function(e,t,n,a,r){var o;return t.map(function(t,i){var u=function(e,t){return!!e&&e.uri===t.uri}(a,t);return o&&(o+=t.length),u&&(o=Date.now()),c.a.createElement(Tt.a.Item,{className:vt()({"current-track":u}),key:"".concat(i,"-").concat(t.uri)},jt(e,t,n,u,r),c.a.createElement(Tt.a.Content,{className:vt()({"track-info":!o})},function(e,t){return!e||t?null:c.a.createElement(Tt.a.Header,{as:"h5"},Nt()(new Date(e),"h:MM"))}(o,u),function(e){return c.a.createElement(Tt.a.Header,{as:"h4"},e.name)}(t),function(e){return c.a.createElement(Tt.a.Description,null,e.artist.name," ",c.a.createElement("small",null,"(",ve(e.length),")"))}(t)))})},At=function(e){var t=e.disabled,n=e.tracks,a=e.images,r=e.currentTrack,o=e.onRemoveTrack;return n?c.a.createElement(Tt.a,{relaxed:!0},_t(t,n,a,r,o)):null},Pt=function(e){var t=e.disabled,n=e.onPrevious,a=e.onNext;return c.a.createElement("span",null,function(e,t){return c.a.createElement(et.a,{onClick:e,animated:"vertical",className:"jb-previous-button",disabled:t},c.a.createElement(et.a.Content,{hidden:!0},"Prev"),c.a.createElement(et.a.Content,{visible:!0},c.a.createElement(tt.a,{name:"step backward"})))}(n,t),function(e,t){return c.a.createElement(et.a,{onClick:e,animated:"vertical",className:"jb-next-button",disabled:t},c.a.createElement(et.a.Content,{hidden:!0},"Next"),c.a.createElement(et.a.Content,{visible:!0},c.a.createElement(tt.a,{name:"step forward"})))}(a,t))},wt=function(e){var t=e.disabled,n=e.playbackState,a=e.onPlay,r=e.onPause,o=e.onPrevious,i=e.onNext;return c.a.createElement("span",null,c.a.createElement(Pt,{disabled:t,onPrevious:o,onNext:i}),function(e,t,n){return c.a.createElement(et.a,{onClick:e,animated:"vertical",disabled:t===U||n,active:t===U,className:"jb-play-button"},c.a.createElement(et.a.Content,{hidden:!0},"Play"),c.a.createElement(et.a.Content,{visible:!0},c.a.createElement(tt.a,{name:"play"})))}(a,n,t),function(e,t,n){return c.a.createElement(et.a,{onClick:e,animated:"vertical",disabled:t===L||n,active:t===L,className:"jb-pause-button"},c.a.createElement(et.a.Content,{hidden:!0},"Pause"),c.a.createElement(et.a.Content,{visible:!0},c.a.createElement(tt.a,{name:"pause"})))}(r,n,t))},Rt=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(c.a.createElement("div",null,this.props.children))}}]),t}(r.Component),It=Object(Ye.DropTarget)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget()}})(Rt),xt=function(e){var t=e.disabled,n=e.onDrop,a=e.children;return t?a:c.a.createElement(Ye.DragDropContextProvider,{backend:qe.a},c.a.createElement(It,{accepts:z.DROP_TYPES,onDrop:n},a))},Ut=Object(Ye.DragDropContext)(qe.a)(function(){var e=Object(u.d)(function(e){return e.jukebox}),t=Object(u.d)(function(e){return e.tracklist}),n=Object(u.d)(function(e){return e.track}),a=Object(u.d)(function(e){return dt(e)}),o=Object(u.c)(),i=Object(r.useContext)(g),l=i.isSignedIn,s=i.googleUser;return Object(r.useEffect)(function(){return o(Z()),function(){o(te())}},[o]),o(l?F(s.tokenId):H()),c.a.createElement(Xe.a.Dimmable,{blurring:!0,className:"jukebox-dashboard",dimmed:!e.online},c.a.createElement(ht,null),c.a.createElement(rt,{disabled:!l,volume:e.volume,onVolumeChange:function(e){return o(ye(e))}}),c.a.createElement(wt,{disabled:!l,playbackState:e.playbackState,onPlay:function(){return o(de())},onPause:function(){return o(me())},onNext:function(){return o(fe())},onPrevious:function(){return o(pe())}}),c.a.createElement(Qe.a,null),c.a.createElement(Ze.a,null,c.a.createElement(Ze.a.Column,{width:6},c.a.createElement(xt,{disabled:!l,onDrop:function(e,t){t&&o(Y(t.getItem().urls[0]))}},c.a.createElement($e.a,{size:"small"},"Current Track"),c.a.createElement(gt,null))),c.a.createElement(Ze.a.Column,{width:10},c.a.createElement($e.a,{size:"small"},"Playlist ",c.a.createElement(it,{disabled:!l,onClear:function(){return o(se())}})),c.a.createElement(At,{disabled:!l,images:a,tracks:t,currentTrack:n,onRemoveTrack:function(e){return o(X(e))}}))))}),Lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,Mt=Object(l.createStore)(Fe,Lt(Object(l.applyMiddleware)(we))),Vt=function(){var e=Object(m.useGoogleLogin)({clientId:"623778479904-ckd2bs0sjbuhqdl83egc07155rd0o8rr.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(u.a,{store:Mt},c.a.createElement(He.a,{fluid:!0},c.a.createElement(g.Provider,{value:e},c.a.createElement(y,null,c.a.createElement(d.a,null),c.a.createElement(Ut,null)))))};n(614);i.a.render(c.a.createElement(Vt,null),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.bc6a6acf.chunk.js.map