{"version":3,"sources":["components/current-track/default-artwork.png","utils/spotify/index.js","components/error-boundary/index.js","contexts/google.js","constants/mopidy-api.js","constants/common.js","actions/index.js","utils/images/index.js","utils/time/index.js","constants/auth-api.js","utils/payload/index.js","utils/notify/index.js","utils/on-message-handler/index.js","utils/state/index.js","containers/jukebox-middleware/index.js","reducers/track/index.js","reducers/tracklist/index.js","reducers/assets/index.js","reducers/timer/index.js","reducers/jukebox/index.js","reducers/settings/index.js","reducers/index.js","utils/signin-token/index.js","selectors/index.js","components/skip-buttons/index.js","components/controls/index.js","components/url-drop-area/index.js","components/drag-in-track/index.js","components/current-track/index.js","containers/current-track-container/index.js","components/settings/index.js","components/tracklist/index.js","components/volume-buttons/index.js","components/clear-playlist/index.js","views/dashboard/index.js","containers/dashboard-container/index.js","App.js","index.js"],"names":["module","exports","transformUrl","url","uri","replace","match","ErrorBoundary","props","state","hasError","error","info","this","setState","children","React","Component","GoogleAuthContext","createContext","ADD_CURRENT_TRACK","ADD_TRACKS","CONNECT","CONNECTING","CONNECTED","DISCONNECT","DISCONNECTED","DROP_TYPES","NEW_IMAGE","RESOLVE_IMAGE","SEND","STORE_TOKEN","CLEAR_STORE_TOKEN","UPDATE_VOLUME","UPDATE_PLAYBACK_STATE","UPDATE_PROGRESS_TIMER","MOPIDY_CONNECTED","MOPIDY_DISCONNECTED","updateToken","token","type","Types","clearToken","addNewTrack","key","MopidyApi","params","addCurrentTrack","track","addTrackList","list","removeFromTracklist","updateProgressTimer","position","duration","Infinity","wsConnect","wsConnecting","wsConnected","wsDisconnect","wsDisconnected","mopidyConnected","mopidyDisconnected","getCurrentTrack","getTimePosition","getState","getImage","newImage","resolveImage","data","getTrackList","clearTrackList","startPlaying","stopPlaying","pausePlaying","nextPlaying","previousPlaying","getVolume","updateVolume","volume","updatePlaybackState","setVolume","Number","findImageInCache","cache","index","findIndex","asset","ref","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","millisToSeconds","timerToPercentage","timer","percentage","round","isNaN","Payload","encode","jwt","decode","payload","JSON","parse","encodeToJson","stringify","Notify","success","message","notify","show","warning","store","dispatch","actions","imageUriChooser","composer","album","onMessageHandler","progressTimer","AuthApi","console","log","progress","set","length","jukebox","playbackState","start","stop","playBackChanged","tracklist","forEach","item","State","loadInitial","action","JukeboxMiddleware","process","socket","next","isImageRequest","mopidyStateChange","online","onOpen","_evt","ProgressTimer","callback","fallbackTargetFrameRate","disableRequestAnimationFrame","trackProgressTimer","onClose","onMessage","Constants","close","io","transports","on","reset","assets","emit","settings","map","initalState","find","a","slice","initalProgressState","remaining","mopidyOnline","Object","assign","jukeboxApp","combineReducers","SignInToken","refresh","googleApi","workerTimers","reloadAuthResponse","then","response","id_token","err","warn","clear","id","getAssets","getCurrentTrackImageInCache","createSelector","getTracklistImagesInCache","images","SkipButtons","disabled","onPrevious","onNext","cb","Button","onClick","animated","className","Content","hidden","visible","Icon","name","previousButton","nextButton","Controls","onPlay","onPause","onStop","active","playButton","pauseButton","stopButton","UrlDropArea","connectDropTarget","title","DropTarget","accepts","drop","monitor","onDrop","connect","dropTarget","DragInTrack","backend","HTML5Backend","albumArt","image","defaultImage","Image","src","CurrentTrack","Card","percent","Header","Meta","artist","year","Description","albumDescription","extra","lookup","spotify","split","color","serviceIcon","Settings","useContext","googleUser","signIn","signOut","avatar","icon","floated","profileObj","rounded","size","imageUrl","Fragment","imageChooser","isCurrent","onRemoveTrack","hasBeenPlayed","klass","inline","trackImage","undefined","listItems","tracks","currentTrack","time","isCurrentTrack","Date","now","List","Item","classnames","as","trackHeading","trackDescription","Tracklist","relaxed","volumeUp","volumeDown","VolumeButtons","onVolumeChange","Group","Or","text","ClearPlaylist","open","clearButton","Label","horizontal","handleConfirm","ev","onClear","handleCancel","Confirm","content","cancelButton","confirmButton","onCancel","onConfirm","Dashboard","onTracklistClear","trackListImages","Dimmer","Dimmable","blurring","dimmed","Divider","Grid","columns","Column","width","DragDropContext","useSelector","tracklistImages","useDispatch","isSignedIn","disable","googleTokenId","useRef","refreshTokenTimeoutID","useEffect","Zi","current","evt","_item","getItem","urls","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","jukeboxMiddleware","App","googleAuth","useGoogleLogin","clientId","hostedDomain","Container","fluid","Provider","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a1895614.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/default-artwork.6bba9800.png\";","// https://open.spotify.com/track/0c41pMosF5Kqwwegcps8ES\nconst transformUrl = (url) => {\n  const uri = url.replace(/^.*\\/track\\//, 'spotify:track:')\n  return (uri.match(/spotify:track/g) ? uri : null)\n}\n\nmodule.exports = {\n  transformUrl\n}\n","import React from 'react'\n\n// uses code from https://reactjs.org/blog/2017/07/26/error-handling-in-react-16.html\nclass ErrorBoundary extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  componentDidCatch (error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true })\n\n    // You can also log the error to an error reporting service\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`error: ${error}`)\n      console.log(`info: ${info}`)\n    }\n  }\n\n  render () {\n    if (this.state.hasError) {\n      return <h1>Ouch! I broke a bit.</h1>\n    }\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\n\nconst GoogleAuthContext = React.createContext()\n\nexport default GoogleAuthContext\n","export default {\n  PLAYBACK_GET_CURRENT_TRACK: 'mopidy::playback.getCurrentTrack',\n  EVENT_TRACK_PLAYBACK_STARTED: 'mopidy::event:trackPlaybackStarted',\n  EVENT_PLAYBACK_STATE_CHANGED: 'mopidy::event:playbackStateChanged',\n  EVENT_PLAYBACK_STATE_RESUMED: 'mopidy::event:trackPlaybackResumed',\n  TRACKLIST_GET_TRACKS: 'mopidy::tracklist.getTracks',\n  TRACKLIST_ADD_TRACK: 'mopidy::tracklist.add',\n  TRACKLIST_REMOVE_TRACK: 'mopidy::tracklist.remove',\n  TRACKLIST_CLEAR: 'mopidy::tracklist.clear',\n  LIBRARY_GET_IMAGES: 'mopidy::library.getImages',\n  PLAYBACK_GET_TIME_POSITION: 'mopidy::playback.getTimePosition',\n  PLAYBACK_GET_PLAYBACK_STATE: 'mopidy::playback.getState',\n  PLAYBACK_PLAY: 'mopidy::playback.play',\n  PLAYBACK_STOP: 'mopidy::playback.stop',\n  PLAYBACK_PAUSE: 'mopidy::playback.pause',\n  PLAYBACK_NEXT: 'mopidy::playback.next',\n  PLAYBACK_BACK: 'mopidy::playback.previous',\n  PLAYING: 'playing',\n  PAUSED: 'paused',\n  STOPPED: 'stopped',\n  SET_VOLUME: 'mopidy::mixer.setVolume',\n  GET_VOLUME: 'mopidy::mixer.getVolume',\n  EVENT_VOLUME_CHANGED: 'mopidy::event:volumeChanged',\n  VALIDATION_ERROR: 'mopidy::tracklist.validation'\n}\n","export default {\n  ADD_CURRENT_TRACK: 'actionAddCurrentTrack',\n  ADD_TRACKS: 'actionAddTracks',\n  CONNECT: 'actionConnect',\n  CONNECTING: 'actionConnecting',\n  CONNECTED: 'actionConnected',\n  DISCONNECT: 'actionDisconnect',\n  DISCONNECTED: 'actionDisconnected',\n  DROP_TYPES: ['__NATIVE_URL__'],\n  NEW_IMAGE: 'actionNewImage',\n  RESOLVE_IMAGE: 'actionResolveImage',\n  SEND: 'actionSend',\n  STORE_TOKEN: 'actionStoreToken',\n  CLEAR_STORE_TOKEN: 'actionClearStoreToken',\n  UPDATE_VOLUME: 'actionUpdateVolume',\n  UPDATE_PLAYBACK_STATE: 'actionPlaybackState',\n  UPDATE_PROGRESS_TIMER: 'actionUpdateProgressTimer',\n  MOPIDY_CONNECTED: 'actionMopidyConnected',\n  MOPIDY_DISCONNECTED: 'actionMopidyDisconnected'\n}\n","import MopidyApi from 'constants/mopidy-api'\nimport Types from 'constants/common'\nimport { transformUrl } from 'utils/spotify'\n\nexport const updateToken = token => {\n  return {\n    type: Types.STORE_TOKEN,\n    token\n  }\n}\n\nexport const clearToken = () => {\n  return {\n    type: Types.CLEAR_STORE_TOKEN\n  }\n}\n\nexport const addNewTrack = url => {\n  let uri = transformUrl(url)\n\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_ADD_TRACK,\n    params: { 'uri': uri }\n  }\n}\n\nexport const addCurrentTrack = track => {\n  return {\n    type: Types.ADD_CURRENT_TRACK,\n    track\n  }\n}\n\nexport const addTrackList = list => {\n  return {\n    type: Types.ADD_TRACKS,\n    list\n  }\n}\n\nexport const removeFromTracklist = uri => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_REMOVE_TRACK,\n    params: { 'uri': [uri] }\n  }\n}\n\nexport const updateProgressTimer = (position, duration) => {\n  if (duration === Infinity) { duration = 0 }\n\n  return {\n    type: Types.UPDATE_PROGRESS_TIMER,\n    position,\n    duration\n  }\n}\n\nexport const wsConnect = () => {\n  return {\n    type: Types.CONNECT\n  }\n}\n\nexport const wsConnecting = () => {\n  return {\n    type: Types.CONNECTING\n  }\n}\n\nexport const wsConnected = () => {\n  return {\n    type: Types.CONNECTED\n  }\n}\n\nexport const wsDisconnect = () => {\n  return {\n    type: Types.DISCONNECT\n  }\n}\n\nexport const wsDisconnected = () => {\n  return {\n    type: Types.DISCONNECTED\n  }\n}\n\nexport const mopidyConnected = () => {\n  return {\n    type: Types.MOPIDY_CONNECTED\n  }\n}\n\nexport const mopidyDisconnected = () => {\n  return {\n    type: Types.MOPIDY_DISCONNECTED\n  }\n}\n\nexport const getCurrentTrack = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_CURRENT_TRACK\n  }\n}\n\nexport const getTimePosition = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_TIME_POSITION\n  }\n}\n\nexport const getState = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_PLAYBACK_STATE\n  }\n}\n\nexport const getImage = (uri) => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.LIBRARY_GET_IMAGES,\n    params: [[uri]],\n    uri: uri\n  }\n}\n\nexport const newImage = (uri) => {\n  return {\n    type: Types.NEW_IMAGE,\n    uri\n  }\n}\n\nexport const resolveImage = (data) => {\n  return {\n    type: Types.RESOLVE_IMAGE,\n    data\n  }\n}\n\nexport const getTrackList = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_GET_TRACKS\n  }\n}\n\nexport const clearTrackList = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_CLEAR\n  }\n}\n\nexport const startPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_PLAY\n  }\n}\n\nexport const stopPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_STOP\n  }\n}\n\nexport const pausePlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_PAUSE\n  }\n}\n\nexport const nextPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_NEXT\n  }\n}\n\nexport const previousPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_BACK\n  }\n}\n\nexport const getVolume = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.GET_VOLUME\n  }\n}\n\nexport const updateVolume = (volume) => {\n  return {\n    type: Types.UPDATE_VOLUME,\n    volume\n  }\n}\n\nexport const updatePlaybackState = (state) => {\n  return {\n    type: Types.UPDATE_PLAYBACK_STATE,\n    state\n  }\n}\n\nexport const setVolume = (volume) => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.SET_VOLUME,\n    params: [Number(volume)]\n  }\n}\n","export const findImageInCache = (uri, cache) => {\n  const index = cache.findIndex(asset => asset.ref === uri)\n  if (cache[index]) { return cache[index].uri }\n  return null\n}\n","import ProgressTimer from 'media-progress-timer'\n\nexport const millisToMinutesAndSeconds = (millis) => {\n  let minutes = Math.floor(millis / 60000)\n  let seconds = ((millis % 60000) / 1000).toFixed(0)\n  return minutes + ':' + (seconds < 10 ? '0' : '') + seconds\n}\n\nexport const millisToSeconds = (millis) => {\n  return millis * 0.001\n}\n\nexport const timerToPercentage = timer => {\n  if (timer.duration === 0) { return 0 }\n  const position = millisToSeconds(timer.position)\n  const duration = millisToSeconds(timer.duration)\n  const percentage = Math.round((position / duration) * 100)\n\n  return isNaN(percentage) ? 0 : percentage\n}\n\nexport const trackProgressTimer = (store, actions) => {\n  return ProgressTimer({\n    callback: (position, duration) => {\n      store.dispatch(actions.updateProgressTimer(position, duration))\n    },\n    fallbackTargetFrameRate: 1,\n    disableRequestAnimationFrame: true\n  })\n}\n","export default {\n  AUTHENTICATION_TOKEN_INVALID: 'auth::authenticationTokenInvalid'\n}\n","const Payload = {\n  encode: (jwt, key, data) => {\n    return {\n      jwt,\n      key,\n      data\n    }\n  },\n\n  decode: payload => {\n    return JSON.parse(payload)\n  },\n\n  encodeToJson: (jwt, key, data) => {\n    return JSON.stringify(Payload.encode(jwt, key, data))\n  }\n}\n\nexport default Payload\n","import { notify } from 'react-notify-toast'\n\nconst Notify = {\n  success: (message) => notify.show(message, 'success', 3000, {}),\n  warning: (message) => notify.show(message, 'warning', 3000, {})\n}\n\nexport default Notify\n","import * as actions from 'actions'\nimport AuthApi from 'constants/auth-api'\nimport MopidyApi from 'constants/mopidy-api'\nimport Payload from 'utils/payload'\nimport notify from 'utils/notify'\n\nconst updatePlaybackState = (store, state) => {\n  store.dispatch(actions.updatePlaybackState(state))\n}\n\nconst playBackChanged = (store, state, progress) => {\n  switch (state) {\n    case MopidyApi.PAUSED:\n    case MopidyApi.STOPPED:\n      updatePlaybackState(store, state)\n      progress.stop()\n      notify.success('Jukebox Halted')\n      break\n    case MopidyApi.PLAYING:\n      updatePlaybackState(store, state)\n      progress.start()\n      break\n    default:\n      break\n  }\n}\n\nconst imageUriChooser = (track) => {\n  if (track.composer) return track.composer.uri\n  return track.album.uri\n}\n\nconst addCurrentTrack = (track, store, progress) => {\n  store.dispatch(actions.addCurrentTrack(track))\n  store.dispatch(actions.getImage(imageUriChooser(track)))\n  const progressTimer = progress.set(0, track.length)\n  if (store.getState().jukebox.playbackState === MopidyApi.PLAYING) progressTimer.start()\n}\n\nconst addTrackList = (tracklist, store) => {\n  store.dispatch(actions.addTrackList(tracklist))\n  tracklist.forEach(item => {\n    store.dispatch(actions.getImage(imageUriChooser(item.track)))\n  })\n}\n\nconst onMessageHandler = (store, payload, progressTimer) => {\n  const { key, data } = Payload.decode(payload)\n\n  switch (key) {\n    case AuthApi.AUTHENTICATION_TOKEN_INVALID:\n      console.log(`AUTHENTICATION_TOKEN_INVALID: ${data.error}`)\n      store.dispatch(actions.clearToken())\n      break\n    case MopidyApi.PLAYBACK_GET_CURRENT_TRACK:\n    case MopidyApi.EVENT_TRACK_PLAYBACK_STARTED:\n      if (data && data.track) addCurrentTrack(data.track, store, progressTimer)\n      break\n    case MopidyApi.EVENT_PLAYBACK_STATE_CHANGED:\n    case MopidyApi.PLAYBACK_GET_PLAYBACK_STATE:\n      playBackChanged(store, data, progressTimer)\n      break\n    case MopidyApi.TRACKLIST_GET_TRACKS:\n      addTrackList(data, store)\n      break\n    case MopidyApi.PLAYBACK_NEXT:\n    case MopidyApi.PLAYBACK_BACK:\n      store.dispatch(actions.getCurrentTrack())\n      break\n    case MopidyApi.GET_VOLUME:\n      store.dispatch(actions.updateVolume(data))\n      break\n    case MopidyApi.EVENT_VOLUME_CHANGED:\n      store.dispatch(actions.updateVolume(data))\n      notify.success('Volume Changed')\n      break\n    case MopidyApi.LIBRARY_GET_IMAGES:\n      store.dispatch(actions.resolveImage(data))\n      break\n    case MopidyApi.PLAYBACK_GET_TIME_POSITION:\n      progressTimer.set(data)\n      break\n    case MopidyApi.VALIDATION_ERROR:\n      notify.warning(data)\n      break\n    default:\n      console.log(`Unknown message: ${key} body: ${data}`)\n      break\n  }\n}\n\nexport default onMessageHandler\n","import * as actions from 'actions'\n\nconst State = {\n  loadInitial: (store) => {\n    [\n      'getCurrentTrack',\n      'getTimePosition',\n      'getState',\n      'getTrackList',\n      'getVolume'\n    ].forEach(action => {\n      store.dispatch(actions[action]())\n    })\n  }\n}\n\nexport default State\n","import io from 'socket.io-client'\nimport * as actions from 'actions'\nimport MopidyApi from 'constants/mopidy-api'\nimport Constants from 'constants/common'\nimport { findImageInCache } from 'utils/images'\nimport { trackProgressTimer } from 'utils/time'\nimport onMessageHandler from 'utils/on-message-handler'\nimport Payload from 'utils/payload'\nimport State from 'utils/state'\n\nconst JukeboxMiddleware = (() => {\n  let url = `http://${process.env.REACT_APP_WS_URL}:${process.env.REACT_APP_WS_PORT}`\n  let socket = null\n  let progressTimer = null\n\n  return store => next => action => {\n    const isImageRequest = () => action.key === MopidyApi.LIBRARY_GET_IMAGES\n    const imageIsCached = () => findImageInCache(action.uri, store.getState().assets)\n    const preStoreImage = () => store.dispatch(actions.newImage(action.uri))\n    const getJWT = () => store.getState().settings.token\n    const packMessage = () => Payload.encodeToJson(getJWT(store), action.key, action.params)\n\n    const mopidyStateChange = data => {\n      if (JSON.parse(data).online) {\n        store.dispatch(actions.mopidyConnected())\n        return State.loadInitial(store)\n      }\n      store.dispatch(actions.mopidyDisconnected())\n    }\n    const onOpen = _evt => {\n      progressTimer = trackProgressTimer(store, actions)\n      store.dispatch(actions.wsConnected())\n    }\n    const onClose = _evt => store.dispatch(actions.wsDisconnect())\n    const onMessage = data => onMessageHandler(store, data, progressTimer)\n    const onConnect = () => {\n      if (socket != null) socket.close()\n      socket = io(url, { transports: ['websocket'] })\n      socket.on('mopidy', mopidyStateChange)\n      socket.on('message', onMessage)\n      socket.on('connect', onOpen)\n      socket.on('disconnect', onClose)\n\n      store.dispatch(actions.wsConnecting())\n    }\n    const onDisconnect = () => {\n      if (progressTimer) { progressTimer.reset() }\n      store.dispatch(actions.wsDisconnected())\n    }\n\n    switch (action.type) {\n      case Constants.CONNECT:\n        return onConnect()\n      case Constants.DISCONNECT:\n        return onDisconnect()\n      case Constants.SEND:\n        if (isImageRequest() && imageIsCached()) return\n        if (isImageRequest()) preStoreImage()\n\n        return socket.emit('message', packMessage())\n      default:\n        return next(action)\n    }\n  }\n})()\n\nexport default JukeboxMiddleware\n","import Types from 'constants/common'\n\nconst track = (state = null, action) => {\n  switch (action.type) {\n    case Types.ADD_CURRENT_TRACK:\n      return action.track\n    default:\n      return state\n  }\n}\n\nexport default track\n","import Types from 'constants/common'\n\nconst tracklist = (state = [], action) => {\n  switch (action.type) {\n    case Types.ADD_TRACKS:\n      return action.list.map(item => item.track)\n    default:\n      return state\n  }\n}\n\nexport default tracklist\n","import Types from 'constants/common'\n\nconst initalState = []\nconst MAX_IMAGES_IN_CACHE = 200\n\nconst assets = (state = initalState, action) => {\n  switch (action.type) {\n    case Types.NEW_IMAGE:\n      return (state.find(a => action.uri && a.ref === action.uri))\n        ? state\n        : [ ...state, { ref: action.uri } ]\n    case Types.RESOLVE_IMAGE:\n      return state.map(asset =>\n        (action.data[asset.ref] && action.data[asset.ref][0])\n          ? { ...asset, uri: action.data[asset.ref][0].uri }\n          : asset\n      ).slice(0, MAX_IMAGES_IN_CACHE)\n    default:\n      return state\n  }\n}\n\nexport default assets\n","import Types from 'constants/common'\n\nconst initalProgressState = {\n  position: 0,\n  duration: 0,\n  remaining: 0\n}\n\nconst timer = (state = initalProgressState, action) => {\n  switch (action.type) {\n    case Types.UPDATE_PROGRESS_TIMER:\n      return {\n        position: action.position,\n        duration: action.duration,\n        remaining: action.duration - action.position\n      }\n    default:\n      return state\n  }\n}\n\nexport default timer\n","import MopidyApi from 'constants/mopidy-api'\nimport Types from 'constants/common'\n\nconst initalState = {\n  online: false,\n  mopidyOnline: false,\n  volume: 0,\n  playbackState: MopidyApi.STOPPED\n}\n\nconst jukebox = (state = initalState, action) => {\n  switch (action.type) {\n    case Types.CONNECTED:\n      return Object.assign({}, state, {\n        online: true\n      })\n    case Types.DISCONNECTED:\n      return Object.assign({}, state, {\n        online: false\n      })\n    case Types.MOPIDY_CONNECTED:\n      return Object.assign({}, state, {\n        mopidyOnline: true\n      })\n    case Types.MOPIDY_DISCONNECTED:\n      return Object.assign({}, state, {\n        mopidyOnline: false\n      })\n    case Types.UPDATE_VOLUME:\n      return Object.assign({}, state, {\n        volume: action.volume\n      })\n    case Types.UPDATE_PLAYBACK_STATE:\n      return Object.assign({}, state, {\n        playbackState: action.state\n      })\n    default:\n      return state\n  }\n}\n\nexport default jukebox\n","import Types from 'constants/common'\n\nconst initalState = {\n  token: null\n}\n\nconst settings = (state = initalState, action) => {\n  switch (action.type) {\n    case Types.STORE_TOKEN:\n      if (action.token === state.token) return state\n      return Object.assign({}, state, {\n        token: action.token\n      })\n    case Types.CLEAR_STORE_TOKEN:\n      return Object.assign({}, state, {\n        token: null\n      })\n    default:\n      return state\n  }\n}\n\nexport default settings\n","import { combineReducers } from 'redux'\nimport track from './track'\nimport tracklist from './tracklist'\nimport assets from './assets'\nimport timer from './timer'\nimport jukebox from './jukebox'\nimport settings from './settings'\n\nconst jukeboxApp = combineReducers({\n  track,\n  tracklist,\n  assets,\n  timer,\n  jukebox,\n  settings\n})\n\nexport default jukeboxApp\n","import * as workerTimers from 'worker-timers'\n\nconst checkForTokenInMilliseconds = 2700000\n\nconst SignInToken = {\n  refresh: (googleApi, success) => {\n    return workerTimers.setTimeout(() => {\n      googleApi.reloadAuthResponse().then(\n        (response) => success(response.id_token),\n        (err) => console.warn('Token un-refreshable: ', err.message))\n    }, checkForTokenInMilliseconds)\n  },\n  clear: (id) => { if (id) workerTimers.clearTimeout(id) }\n}\n\nexport default SignInToken\n","import { createSelector } from 'reselect'\nimport { findImageInCache } from 'utils/images'\n\nconst getCurrentTrack = (state) => state.track\nconst getTrackList = (state) => state.tracklist\nconst getAssets = (state) => state.assets\n\nexport const getCurrentTrackImageInCache = createSelector(\n  [getCurrentTrack, getAssets],\n  (track, cache) => {\n    if (!track) { return null }\n    return findImageInCache(track.album.uri, cache)\n  }\n)\n\nexport const getTracklistImagesInCache = createSelector(\n  [getTrackList, getAssets],\n  (tracklist, cache) => {\n    const images = {}\n    tracklist.forEach(track => {\n      images[track.album.uri] = findImageInCache(track.album.uri, cache)\n    })\n    return images\n  }\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst previousButton = (cb, disabled) => (\n  <Button\n    onClick={cb}\n    animated='vertical'\n    className='jb-previous-button'\n    disabled={disabled}\n  >\n    <Button.Content hidden>Prev</Button.Content>\n    <Button.Content visible>\n      <Icon name='step backward' />\n    </Button.Content>\n  </Button>\n)\n\nconst nextButton = (cb, disabled) => (\n  <Button\n    onClick={cb}\n    animated='vertical'\n    className='jb-next-button'\n    disabled={disabled}\n  >\n    <Button.Content hidden>Next</Button.Content>\n    <Button.Content visible>\n      <Icon name='step forward' />\n    </Button.Content>\n  </Button>\n)\n\nconst SkipButtons = ({ disabled, onPrevious, onNext }) => (\n  <span>\n    {previousButton(onPrevious, disabled)}\n    {nextButton(onNext, disabled)}\n  </span>\n)\n\nSkipButtons.propTypes = {\n  disabled: PropTypes.bool,\n  onPrevious: PropTypes.func.isRequired,\n  onNext: PropTypes.func.isRequired\n}\n\nexport default SkipButtons\n","import React from 'react'\nimport SkipButtons from 'components/skip-buttons'\nimport MopidyApi from 'constants/mopidy-api'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst playButton = (cb, playbackState, disabled) => (\n  <Button\n    onClick={cb}\n    animated='vertical'\n    disabled={(playbackState === MopidyApi.PLAYING || disabled)}\n    active={(playbackState === MopidyApi.PLAYING)}\n    className='jb-play-button'\n  >\n    <Button.Content hidden>Play</Button.Content>\n    <Button.Content visible>\n      <Icon name='play' />\n    </Button.Content>\n  </Button>\n)\n\nconst pauseButton = (cb, playbackState, disabled) => (\n  <Button\n    onClick={cb}\n    animated='vertical'\n    disabled={(playbackState === MopidyApi.PAUSED || playbackState === MopidyApi.STOPPED || disabled)}\n    active={(playbackState === MopidyApi.PAUSED)}\n    className='jb-pause-button'\n  >\n    <Button.Content hidden>Pause</Button.Content>\n    <Button.Content visible>\n      <Icon name='pause' />\n    </Button.Content>\n  </Button>\n)\n\nconst stopButton = (cb, playbackState, disabled) => (\n  <Button\n    onClick={cb}\n    animated='vertical'\n    disabled={(playbackState === MopidyApi.STOPPED || disabled)}\n    active={(playbackState === MopidyApi.STOPPED)}\n    className='jb-stop-button'\n  >\n    <Button.Content hidden>Stop</Button.Content>\n    <Button.Content visible>\n      <Icon name='stop' />\n    </Button.Content>\n  </Button>\n)\n\nconst Controls = ({ disabled, playbackState, onPlay, onPause, onStop, onPrevious, onNext }) => {\n  return (\n    <span>\n      <SkipButtons\n        disabled={disabled}\n        onPrevious={onPrevious}\n        onNext={onNext}\n      />\n      {playButton(onPlay, playbackState, disabled)}\n      {pauseButton(onPause, playbackState, disabled)}\n      {stopButton(onStop, playbackState, disabled)}\n    </span>\n  )\n}\n\nControls.propTypes = {\n  disabled: PropTypes.bool,\n  playbackState: PropTypes.string,\n  onPlay: PropTypes.func.isRequired,\n  onPause: PropTypes.func.isRequired,\n  onStop: PropTypes.func.isRequired,\n  onPrevious: PropTypes.func.isRequired,\n  onNext: PropTypes.func.isRequired\n}\n\nexport default Controls\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { DropTarget } from 'react-dnd'\n\nconst boxTarget = {\n  drop (props, monitor) {\n    if (props.onDrop) {\n      props.onDrop(props, monitor)\n    }\n  }\n}\n\nconst boxHandler = (connect, monitor) => {\n  return {\n    connectDropTarget: connect.dropTarget()\n  }\n}\n\nclass UrlDropArea extends Component {\n  render () {\n    const { connectDropTarget } = this.props\n\n    return connectDropTarget(\n      <div title='Drag in Spotify tracks to add to playlist'>\n        { this.props.children }\n      </div>\n    )\n  }\n}\n\nUrlDropArea.propTypes = {\n  connectDropTarget: PropTypes.func.isRequired,\n  accepts: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onDrop: PropTypes.func\n}\n\nexport default DropTarget(props => props.accepts, boxTarget, boxHandler)(UrlDropArea)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContextProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport Constants from 'constants/common'\nimport UrlDropArea from 'components/url-drop-area'\n\nconst DragInTrack = ({ disabled, onDrop, children }) => {\n  if (disabled) { return children }\n\n  return (\n    <DragDropContextProvider backend={HTML5Backend}>\n      <UrlDropArea accepts={Constants.DROP_TYPES} onDrop={onDrop}>\n        { children }\n      </UrlDropArea>\n    </DragDropContextProvider>\n  )\n}\n\nDragInTrack.propTypes = {\n  disabled: PropTypes.bool,\n  onDrop: PropTypes.func.isRequired\n}\n\nexport default DragInTrack\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Card, Icon, Image } from 'semantic-ui-react'\nimport { Line } from 'rc-progress'\nimport defaultImage from './default-artwork.png'\nimport { millisToMinutesAndSeconds } from 'utils/time'\nimport './index.css'\n\nconst albumDescription = album => {\n  if (!album) return null\n  const year = album.year ? ` (${album.year})` : null\n  return <Card.Description>{album.name}{year}</Card.Description>\n}\n\nconst composerDescription = composer => {\n  if (!composer) return null\n  return <Card.Description>{composer.name}</Card.Description>\n}\n\nconst albumArt = (image) => {\n  if (!image) image = defaultImage\n  return <Image src={image} />\n}\n\nconst serviceIcon = (uri) => {\n  const lookup = {\n    spotify: 'green'\n  }\n  const key = uri.split(':')[0]\n  if (!lookup[key]) return null\n  return <Icon name={key} color={lookup[key]} />\n}\n\nconst noTrack = () => (\n  <Card>\n    { albumArt(null) }\n    <Card.Content>\n      <Card.Header>Nothing playing</Card.Header>\n      <Card.Description>Drag some music here or press play.</Card.Description>\n    </Card.Content>\n  </Card>\n)\n\nconst CurrentTrack = ({ track, image, progress, remaining }) => {\n  if (!track) { return noTrack() }\n\n  return (\n    <Card>\n      { albumArt(image) }\n      <Card.Content>\n        <div className='progress-container'>\n          <span className='remaining-text'>{millisToMinutesAndSeconds(remaining)}</span>\n          <span className='track-length'>{millisToMinutesAndSeconds(track.length)}</span>\n          <Line percent={progress} />\n        </div>\n        <Card.Header>{track.name}</Card.Header>\n        <Card.Meta>{track.artist.name}</Card.Meta>\n        { albumDescription(track.album) }\n        { composerDescription(track.composer) }\n      </Card.Content>\n      <Card.Content extra>\n        {serviceIcon(track.uri)}\n      </Card.Content>\n    </Card>\n  )\n}\n\nCurrentTrack.propTypes = {\n  track: PropTypes.object,\n  image: PropTypes.string,\n  progress: PropTypes.number,\n  remaining: PropTypes.number\n}\n\nexport default CurrentTrack\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { timerToPercentage } from 'utils/time'\nimport { getCurrentTrackImageInCache } from 'selectors'\nimport CurrentTrack from 'components/current-track'\n\nexport const CurrentTrackContainer = ({ track, image, progress, remaining }) => (\n  <CurrentTrack\n    track={track}\n    image={image}\n    progress={progress}\n    remaining={remaining}\n  />\n)\n\nconst mapStateToProps = state => {\n  return {\n    track: state.track,\n    image: getCurrentTrackImageInCache(state),\n    progress: timerToPercentage(state.timer),\n    remaining: state.timer.remaining\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(CurrentTrackContainer)\n","import React, { useContext } from 'react'\nimport { Button, Image } from 'semantic-ui-react'\nimport GoogleAuthContext from 'contexts/google'\nimport './index.css'\n\nexport const Settings = () => {\n  const { googleUser, signIn, signOut } = useContext(GoogleAuthContext)\n\n  let avatar = (\n    <Button\n      icon='power off'\n      floated='right'\n      onClick={() => signIn()}\n      className='jb-settings-toggle'\n      title='Login using Google'\n    />\n  )\n  if (googleUser && googleUser.profileObj) {\n    avatar = (\n      <Image\n        rounded\n        size='mini'\n        floated='right'\n        title={googleUser.profileObj.name}\n        src={googleUser.profileObj.imageUrl}\n        onClick={() => signOut()}\n      />\n    )\n  }\n\n  return (\n    <React.Fragment>{avatar}</React.Fragment>\n  )\n}\n\nexport default Settings\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { List, Image } from 'semantic-ui-react'\nimport { millisToMinutesAndSeconds } from 'utils/time'\nimport defaultImage from 'components/current-track/default-artwork.png'\nimport './index.css'\n\nconst isCurrentTrack = (currentTrack, track) => {\n  if (!currentTrack) return false\n  return currentTrack.uri === track.uri\n}\n\nconst trackImage = ({ image, isCurrent, onClick, hasBeenPlayed }) => {\n  let klass, title\n\n  if (isCurrent) klass = 'current-image'\n  if (onClick && !isCurrent) {\n    title = 'Click to remove from playlist'\n    klass = 'remove-image'\n  }\n\n  return (\n    <Image\n      className={klass}\n      size={hasBeenPlayed ? 'tiny' : 'mini'}\n      src={image}\n      title={title}\n      onClick={onClick}\n      inline\n    />\n  )\n}\n\nconst removeTrack = (uri, cb) => {\n  return () => cb(uri)\n}\n\nconst imageChooser = (disabled, track, images, isCurrent, onRemoveTrack, hasBeenPlayed) => {\n  let image\n  if (images && track.album) image = images[track.album.uri]\n  if (images && track.composer) image = images[track.composer.uri]\n  if (!image) image = defaultImage\n\n  return trackImage({\n    image,\n    hasBeenPlayed,\n    isCurrent,\n    onClick: (!disabled && !isCurrent) ? removeTrack(track.uri, onRemoveTrack) : undefined\n  })\n}\n\nconst trackHeading = (track) => (\n  <List.Header as='h4'>{track.name}</List.Header>\n)\n\nconst trackDescription = (track) => (\n  <List.Description>\n    {track.artist.name} <small>({millisToMinutesAndSeconds(track.length)})</small>\n  </List.Description>\n)\n\nconst listItems = (disabled, tracks, images, currentTrack, onRemoveTrack) => {\n  let time\n\n  return tracks.map((track, index) => {\n    const isCurrent = isCurrentTrack(currentTrack, track)\n    if (time) time += track.length\n    if (isCurrent) time = Date.now()\n\n    return (\n      <List.Item\n        className={classnames({ 'current-track': isCurrent })}\n        key={`${index}-${track.uri}`}\n      >\n        { imageChooser(disabled, track, images, isCurrent, onRemoveTrack, time) }\n        <List.Content\n          className={classnames({ 'track-info': !time })}\n        >\n          {trackHeading(track)}\n          {trackDescription(track)}\n        </List.Content>\n      </List.Item>\n    )\n  })\n}\n\nconst Tracklist = ({ disabled, tracks, images, currentTrack, onRemoveTrack }) => {\n  if (!tracks) { return null }\n\n  return (\n    <List relaxed>\n      {listItems(disabled, tracks, images, currentTrack, onRemoveTrack)}\n    </List>\n  )\n}\n\nTracklist.propTypes = {\n  disabled: PropTypes.bool,\n  tracks: PropTypes.array,\n  images: PropTypes.object,\n  currentTrack: PropTypes.object,\n  onRemoveTrack: PropTypes.func.isRequired\n}\n\nexport default Tracklist\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst VOLUME_INC = 1\nconst VOLUME_MAX = 100\nconst VOLUME_MIN = 0\n\nconst volumeUp = (volume, cb) => {\n  volume += VOLUME_INC\n  if (volume <= VOLUME_MAX) {\n    return () => {\n      cb(volume)\n    }\n  }\n}\n\nconst volumeDown = (volume, cb) => {\n  volume -= VOLUME_INC\n  if (volume >= VOLUME_MIN) {\n    return () => {\n      cb(volume)\n    }\n  }\n}\n\nconst VolumeButtons = ({ disabled, volume, onVolumeChange }) => (\n  <Button.Group floated='right'>\n    <Button\n      className='jb-volume-down'\n      onClick={volumeDown(volume, onVolumeChange)}\n      disabled={disabled}\n    >\n      <Icon name='volume down' />\n    </Button>\n    <Button.Or text={volume} />\n    <Button\n      className='jb-volume-up'\n      onClick={volumeUp(volume, onVolumeChange)}\n      disabled={disabled}\n    >\n      <Icon name='volume up' />\n    </Button>\n  </Button.Group>\n)\n\nVolumeButtons.propTypes = {\n  disabled: PropTypes.bool,\n  volume: PropTypes.number,\n  onVolumeChange: PropTypes.func.isRequired\n}\n\nexport default VolumeButtons\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Confirm, Label } from 'semantic-ui-react'\n\nclass ClearPlaylist extends Component {\n  state = { open: false }\n\n  clearButton = () => {\n    return (\n      <Label\n        horizontal\n        size='mini'\n        as='a'\n        color='red'\n        onClick={this.show}\n        className='jb-clear-button'\n      >CLEAR</Label>\n    )\n  }\n\n  show = () => {\n    this.setState({ open: true })\n  }\n\n  handleConfirm = (ev) => {\n    this.setState({ open: false })\n    this.props.onClear(ev)\n  }\n\n  handleCancel = () => {\n    this.setState({ open: false })\n  }\n\n  render () {\n    if (this.props.disabled) { return null }\n\n    return (\n      <span>\n        {this.clearButton()}\n        <Confirm\n          content='Are you sure you want to nuke the playlist?'\n          cancelButton='No thanks'\n          confirmButton='Do it!'\n          open={this.state.open}\n          onCancel={this.handleCancel}\n          onConfirm={this.handleConfirm}\n        />\n      </span>\n    )\n  }\n}\n\nClearPlaylist.propTypes = {\n  disabled: PropTypes.bool,\n  onClear: PropTypes.func.isRequired\n}\n\nexport default ClearPlaylist\n","import React from 'react'\nimport { Dimmer, Divider, Grid, Header } from 'semantic-ui-react'\nimport Controls from 'components/controls'\nimport DragInTrack from 'components/drag-in-track'\nimport CurrentTrackContainer from 'containers/current-track-container'\nimport Settings from 'components/settings'\nimport TrackList from 'components/tracklist'\nimport VolumeButtons from 'components/volume-buttons'\nimport ClearPlaylist from 'components/clear-playlist'\nimport './index.css'\n\nconst Dashboard = (props) => {\n  const {\n    online,\n    disabled,\n    volume,\n    playbackState,\n    onPlay,\n    onStop,\n    onPause,\n    onNext,\n    onPrevious,\n    onVolumeChange,\n    onDrop,\n    onTracklistClear,\n    trackListImages,\n    tracklist,\n    currentTrack,\n    onRemoveTrack\n  } = props\n\n  return (\n    <Dimmer.Dimmable\n      blurring\n      className='jukebox-dashboard'\n      dimmed={!online}\n    >\n      <Settings />\n      <VolumeButtons\n        disabled={disabled}\n        volume={volume}\n        onVolumeChange={onVolumeChange}\n      />\n      <Controls\n        disabled={disabled}\n        playbackState={playbackState}\n        onPlay={onPlay}\n        onStop={onStop}\n        onPause={onPause}\n        onNext={onNext}\n        onPrevious={onPrevious}\n      />\n      <Divider />\n      <Grid columns={2}>\n        <Grid.Column width={4}>\n          <DragInTrack\n            disabled={disabled}\n            onDrop={onDrop}\n          >\n            <Header size='small'>Current Track</Header>\n            <CurrentTrackContainer />\n          </DragInTrack>\n        </Grid.Column>\n        <Grid.Column width={12}>\n          <Header size='small'>\n            Playlist <ClearPlaylist\n              disabled={disabled}\n              onClear={onTracklistClear}\n            />\n          </Header>\n          <TrackList\n            disabled={disabled}\n            images={trackListImages}\n            tracks={tracklist}\n            currentTrack={currentTrack}\n            onRemoveTrack={onRemoveTrack}\n          />\n        </Grid.Column>\n      </Grid>\n    </Dimmer.Dimmable>\n  )\n}\n\nexport default Dashboard\n","import React, { useEffect, useContext, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { DragDropContext } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport SignInToken from 'utils/signin-token'\nimport GoogleAuthContext from 'contexts/google'\nimport * as actions from 'actions'\nimport { getTracklistImagesInCache } from 'selectors'\nimport Dashboard from 'views/dashboard'\n\nexport const DashboardContainer = () => {\n  const jukebox = useSelector(state => state.jukebox)\n  const tracklist = useSelector(state => state.tracklist)\n  const currentTrack = useSelector(state => state.track)\n  const tracklistImages = useSelector(state => getTracklistImagesInCache(state))\n  const dispatch = useDispatch()\n  const { isSignedIn, googleUser } = useContext(GoogleAuthContext)\n  const disable = !(isSignedIn && jukebox.mopidyOnline)\n  const googleTokenId = useRef()\n  const refreshTokenTimeoutID = useRef()\n  const hasTokenChanged = (token) => token !== googleTokenId.current\n\n  useEffect(() => {\n    dispatch(actions.wsConnect())\n\n    /* istanbul ignore next */\n    return () => {\n      dispatch(actions.wsDisconnect())\n    }\n  }, [dispatch])\n\n  if (isSignedIn && hasTokenChanged(googleUser.Zi.id_token)) {\n    googleTokenId.current = googleUser.Zi.id_token\n    refreshTokenTimeoutID.current = SignInToken.refresh(googleUser, (token) => {\n      dispatch(actions.updateToken(token))\n    })\n    dispatch(actions.updateToken(googleTokenId.current))\n  }\n\n  if (!isSignedIn) {\n    googleTokenId.current = undefined\n    SignInToken.clear(refreshTokenTimeoutID.current)\n    dispatch(actions.clearToken())\n  }\n\n  return (\n    <Dashboard\n      online={jukebox.online}\n      disabled={disable}\n      volume={jukebox.volume}\n      playbackState={jukebox.playbackState}\n      onPlay={() => dispatch(actions.startPlaying())}\n      onStop={() => dispatch(actions.stopPlaying())}\n      onPause={() => dispatch(actions.pausePlaying())}\n      onNext={() => dispatch(actions.nextPlaying())}\n      onPrevious={() => dispatch(actions.previousPlaying())}\n      onVolumeChange={(evt) => dispatch(actions.setVolume(evt))}\n      onDrop={\n        /* istanbul ignore next */\n        (_item, monitor) => {\n          if (monitor) {\n            dispatch(actions.addNewTrack(monitor.getItem().urls[0]))\n          }\n        }\n      }\n      onTracklistClear={() => dispatch(actions.clearTrackList())}\n      trackListImages={tracklistImages}\n      tracklist={tracklist}\n      currentTrack={currentTrack}\n      onRemoveTrack={\n        /* istanbul ignore next */\n        (evt) => dispatch(actions.removeFromTracklist(evt))\n      }\n    />\n  )\n}\n\nexport default DragDropContext(HTML5Backend)(DashboardContainer)\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport Notifications from 'react-notify-toast'\nimport { useGoogleLogin } from 'react-use-googlelogin'\nimport ErrorBoundary from 'components/error-boundary'\nimport GoogleAuthContext from 'contexts/google'\nimport jukeboxMiddleware from 'containers/jukebox-middleware'\nimport jukeboxApp from 'reducers'\nimport { Container } from 'semantic-ui-react'\nimport DashboardContainer from 'containers/dashboard-container'\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(jukeboxApp, composeEnhancers(applyMiddleware(jukeboxMiddleware)))\n\nconst App = () => {\n  const googleAuth = useGoogleLogin({\n    clientId: process.env.REACT_APP_CLIENT_ID,\n    hostedDomain: 'kyanmedia.com'\n  })\n\n  return (\n    <Provider store={store}>\n      <Container fluid>\n        <GoogleAuthContext.Provider value={googleAuth}>\n          <ErrorBoundary>\n            <Notifications />\n            <DashboardContainer />\n          </ErrorBoundary>\n        </GoogleAuthContext.Provider>\n      </Container>\n    </Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}