(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,n){e.exports=n.p+"static/media/default-artwork.f6680a9d.png"},349:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},390:function(e,t,n){e.exports=n(723)},395:function(e,t,n){},432:function(e,t){},546:function(e,t,n){},547:function(e,t,n){},606:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},648:function(e,t,n){},698:function(e,t,n){},699:function(e,t,n){},700:function(e,t,n){},721:function(e,t,n){},723:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateToken",(function(){return Q})),n.d(a,"clearToken",(function(){return H})),n.d(a,"addNewTrack",(function(){return W})),n.d(a,"addCurrentTrack",(function(){return X})),n.d(a,"syncSocialData",(function(){return Z})),n.d(a,"addTrackList",(function(){return $})),n.d(a,"removeFromTracklist",(function(){return ee})),n.d(a,"updateProgressTimer",(function(){return te})),n.d(a,"wsConnect",(function(){return ne})),n.d(a,"wsConnecting",(function(){return ae})),n.d(a,"wsConnected",(function(){return re})),n.d(a,"wsDisconnect",(function(){return ce})),n.d(a,"wsDisconnected",(function(){return ie})),n.d(a,"mopidyConnected",(function(){return oe})),n.d(a,"mopidyDisconnected",(function(){return le})),n.d(a,"getCurrentTrack",(function(){return ue})),n.d(a,"getTimePosition",(function(){return se})),n.d(a,"getState",(function(){return me})),n.d(a,"getTrackList",(function(){return de})),n.d(a,"clearTrackList",(function(){return fe})),n.d(a,"startPlaying",(function(){return Ee})),n.d(a,"stopPlaying",(function(){return be})),n.d(a,"pausePlaying",(function(){return ke})),n.d(a,"nextPlaying",(function(){return pe})),n.d(a,"previousPlaying",(function(){return ge})),n.d(a,"getVolume",(function(){return ve})),n.d(a,"updateVolume",(function(){return ye})),n.d(a,"updatePlaybackState",(function(){return Ce})),n.d(a,"setVolume",(function(){return he}));var r=n(0),c=n.n(r),i=n(22),o=n.n(i),l=(n(395),n(23)),u=n(49),s=n(97),m=n.n(s),d=n(347),f=n(155),E=n(156),b=n(165),k=n(157),p=n(166),g=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(k.a)(t).call(this,e))).state={hasError:!1},n}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),v=g,y=c.a.createContext(),C=y,h=n(348),N=n.n(h),O="playback.getCurrentTrack",_="event:trackPlaybackStarted",T="event:playbackStateChanged",S="event:trackPlaybackResumed",D="tracklist.getTracks",P="tracklist.add",A="tracklist.remove",j="tracklist.clear",w="playback.getTimePosition",R="playback.getState",I="playback.play",x="playback.stop",L="playback.pause",U="playback.next",V="playback.previous",M="playing",B="paused",K="stopped",Y="mixer.setVolume",q="mixer.getVolume",z="event:volumeChanged",F="validationError",G={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer",MOPIDY_CONNECTED:"actionMopidyConnected",MOPIDY_DISCONNECTED:"actionMopidyDisconnected",SYNC_SOCIAL_DATA:"syncSocialData"},J=n(349),Q=function(e){return{type:G.STORE_TOKEN,token:e}},H=function(){return{type:G.CLEAR_STORE_TOKEN}},W=function(e){var t=Object(J.transformUrl)(e);return{type:G.SEND,key:P,params:{uris:[t]}}},X=function(e){return{type:G.ADD_CURRENT_TRACK,track:e}},Z=function(e){return{type:G.SYNC_SOCIAL_DATA,track:e}},$=function(e){return{type:G.ADD_TRACKS,list:e}},ee=function(e){return{type:G.SEND,key:A,params:{criteria:{uri:[e]}}}},te=function(e,t){return t===1/0&&(t=0),{type:G.UPDATE_PROGRESS_TIMER,position:e,duration:t}},ne=function(){return{type:G.CONNECT}},ae=function(){return{type:G.CONNECTING}},re=function(){return{type:G.CONNECTED}},ce=function(){return{type:G.DISCONNECT}},ie=function(){return{type:G.DISCONNECTED}},oe=function(){return{type:G.MOPIDY_CONNECTED}},le=function(){return{type:G.MOPIDY_DISCONNECTED}},ue=function(){return{type:G.SEND,key:O}},se=function(){return{type:G.SEND,key:w}},me=function(){return{type:G.SEND,key:R}},de=function(){return{type:G.SEND,key:D}},fe=function(){return{type:G.SEND,key:j}},Ee=function(){return{type:G.SEND,key:I}},be=function(){return{type:G.SEND,key:x}},ke=function(){return{type:G.SEND,key:L}},pe=function(){return{type:G.SEND,key:U}},ge=function(){return{type:G.SEND,key:V}},ve=function(){return{type:G.SEND,key:q}},ye=function(e){return{type:G.UPDATE_VOLUME,volume:e}},Ce=function(e){return{type:G.UPDATE_PLAYBACK_STATE,state:e}},he=function(e){return{type:G.SEND,key:Y,params:[Number(e)]}},Ne="actionVote",Oe="castVote",_e="voteCasted",Te="actionTrackSearch",Se="searchGetTracks",De="actionStoreSearchResults",Pe="actionStoreSearchQuery",Ae="actionToggleSearchSidebar",je="actionRemoveFromSearchResults",we=n(350),Re=n.n(we),Ie=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},xe=function(e){return.001*e},Le=function(e){return{type:Ae,open:e}},Ue=function(e){return{type:Pe,query:e}},Ve=function(e,t){return{type:Te,key:Se,params:{query:e,options:t}}},Me="authenticationTokenInvalid",Be={decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify({jwt:e,key:t,data:n})}},Ke={info:function(e){var t=e.id,n=e.title,a=e.message;return s.store.addNotification({id:t,title:n,message:a,type:"info",insert:"top",container:"bottom-left",dismiss:{duration:3e3}})},success:function(e){var t=e.id,n=e.title,a=e.message;return s.store.addNotification({id:t,title:n,message:a,type:"success",insert:"top",container:"bottom-left",dismiss:{duration:3e3}})},warning:function(e){var t=e.id,n=e.title,a=e.message;return s.store.addNotification({id:t,title:n,message:a,type:"warning",insert:"top",container:"bottom-left",dismiss:{duration:5e3}})}},Ye=function(e,t){e.dispatch(Ce(t))},qe=function(e,t,n){var a=Be.decode(t),r=a.key,c=a.data,i=a.user;switch(r){case Me:console.error("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(H());break;case O:case _:c&&c.track&&function(e,t,n){t.dispatch(X(e)),t.dispatch(Z(e));var a=n.set(0,e.length);t.getState().jukebox.playbackState===M&&a.start()}(c.track,e,n);break;case T:case R:!function(e,t,n){switch(t){case B:case K:Ye(e,t),n.stop();break;case M:Ye(e,t),n.start()}}(e,c,n);break;case D:!function(e,t){t.dispatch($(e))}(c,e);break;case U:case V:e.dispatch(ue());break;case Y:Ke.info({title:"Volume Updated",message:"".concat(i.fullname," changed it to ").concat(c.volume)});break;case A:Ke.warning({title:"Track Removed",message:"".concat(i.fullname," removed: ").concat(c.message)});break;case P:Ke.success({title:"New Track",message:"".concat(i.fullname," added: ").concat(c.message)});break;case q:case z:e.dispatch(ye(c.volume));break;case w:n.set(c);break;case Se:e.dispatch({type:De,results:c});break;case _e:c&&e.dispatch(Z(c));break;case S:n.set(c);break;case F:Ke.warning({title:"Oops",message:c.message})}},ze={loadInitial:function(e){["getCurrentTrack","getState","getTrackList","getVolume","getTimePosition"].forEach((function(t){e.dispatch(a[t]())}))}},Fe=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null;return function(r){return function(c){return function(i){var o=function(){return Be.encodeToJson(r.getState().settings.token,i.key,i.params)},l=function(e){if(JSON.parse(e).online)return r.dispatch(oe()),ze.loadInitial(r);r.dispatch(le())},u=function(e){n=function(e,t){return Re()({callback:function(n,a){e.dispatch(t.updateProgressTimer(n,a))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(r,a),r.dispatch(re())},s=function(e){return r.dispatch(ce())},m=function(e){return qe(r,e,n)},d=function(e){return qe(r,e,n)},f=function(e){return qe(r,e,n)};switch(i.type){case G.CONNECT:return null!=t&&t.close(),(t=N()(e,{transports:["websocket"]})).on("vote",f),t.on("search",d),t.on("mopidy",l),t.on("message",m),t.on("connect",u),t.on("disconnect",s),void r.dispatch(ae());case G.DISCONNECT:return n&&n.reset(),void r.dispatch(ie());case G.SEND:return t.emit("message",o());case Te:return t.emit("search",o());case Ne:return t.emit("vote",o());default:return c(i)}}}}}(),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.ADD_CURRENT_TRACK:return t.track;case G.SYNC_SOCIAL_DATA:return Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics});default:return e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.ADD_TRACKS:return t.list.map((function(e){return e.track}));case G.SYNC_SOCIAL_DATA:return e.map((function(e){return e.uri===t.track.uri?Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics}):e}));default:return e}},Qe={position:0,duration:0,remaining:0},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration,remaining:t.duration-t.position};default:return e}},We={online:!1,mopidyOnline:!1,volume:0,playbackState:K},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.CONNECTED:return Object.assign({},e,{online:!0});case G.DISCONNECTED:return Object.assign({},e,{online:!1});case G.MOPIDY_CONNECTED:return Object.assign({},e,{mopidyOnline:!0});case G.MOPIDY_DISCONNECTED:return Object.assign({},e,{mopidyOnline:!1});case G.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case G.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Ze={token:null},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.STORE_TOKEN:return t.token===e.token?e:Object.assign({},e,{token:t.token});case G.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},et=n(381),tt={searchSideBarOpen:!1,query:"",limit:20,offset:0,total:0,results:[]},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(et.a)({},e,{results:e.results.filter((function(e){return e.track.uri!==t.uri}))});case Ae:return Object.assign({},e,{searchSideBarOpen:t.open});case Pe:return Object.assign({},e,{query:t.query});case De:var n=t.results.tracks;return Object.assign({},e,{limit:n.limit,offset:n.offset,total:n.total>1e4?1e4:n.total,results:n.items});default:return e}},at=Object(u.combineReducers)({track:Ge,tracklist:Je,timer:He,jukebox:Xe,settings:$e,search:nt}),rt=n(91),ct=n(158),it=n.n(ct),ot=n(233),lt={refresh:function(e,t){return ot.b((function(){e.reloadAuthResponse().then((function(e){return console.info("Token refreshed OK"),t(e.id_token)}),(function(e){return console.warn("Token un-refreshable: ",e.message)}))}),27e5)},clear:function(e){e&&ot.a(e)}},ut=n(749),st=n(4),mt=n.n(st),dt=n(62),ft=function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:mt()("c-button",{"c-button--disabled":e.disabled})},c.a.createElement(dt.a,{name:"step backward"}))},Et=function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:mt()("c-button",{"c-button--disabled":e.disabled})},c.a.createElement(dt.a,{name:"step forward"}))},bt=function(e){var t=e.disabled,n=e.onPrevious,a=e.onNext;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ft,{onClick:n,disabled:t}),c.a.createElement(Et,{onClick:a,disabled:t}))},kt=(n(546),function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.state===M||e.disabled,className:mt()("c-button",{"c-button--disabled":e.state===M||e.disabled,"c-button--active":e.state===M})},c.a.createElement(dt.a,{name:"play"}))}),pt=function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.state===B||e.state===K||e.disabled,className:mt()("c-button",{"c-button--disabled":e.state===B||e.state===K||e.disabled,"c-button--active":e.state===B})},c.a.createElement(dt.a,{name:"pause"}))},gt=function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.state===K||e.disabled,className:mt()("c-button",{"c-button--disabled":e.state===K||e.disabled,"c-button--active":e.state===K})},c.a.createElement(dt.a,{name:"stop"}))},vt=function(e){var t=Object(l.c)((function(e){return e.jukebox})),n=e.disabled,a=e.onPlay,r=e.onPause,i=e.onStop,o=e.onPrevious,u=e.onNext;return c.a.createElement("span",{className:"c-controls"},c.a.createElement(bt,{disabled:n,onPrevious:o,onNext:u}),c.a.createElement(kt,{onClick:a,state:t.playbackState,disabled:n}),c.a.createElement(pt,{onClick:r,state:t.playbackState,disabled:n}),c.a.createElement(gt,{onClick:i,state:t.playbackState,disabled:n}))},yt=(n(547),function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.isOver;return t(c.a.createElement("div",null,n?c.a.createElement("div",{className:"drag-is-over"},c.a.createElement("p",null,"Drop da track")):null,this.props.children))}}]),t}(r.Component)),Ct=Object(rt.DropTarget)((function(e){return e.accepts}),{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(yt),ht=function(e){var t=e.disabled,n=e.onDrop,a=e.children;return t?a:c.a.createElement(rt.DragDropContextProvider,{backend:it.a},c.a.createElement(Ct,{accepts:G.DROP_TYPES,onDrop:n},a))},Nt=n(378),Ot=n(743),_t=n(380),Tt=n(741),St=n(160),Dt=n.n(St),Pt=(n(606),function(e){return c.a.createElement(Ot.a,{className:"added-by-list"},e.map((function(e,t){var n=e.user?e.user.fullname:"User unknown";return c.a.createElement(Ot.a.Item,{key:t},At(e),c.a.createElement(Ot.a.Content,null,c.a.createElement(Ot.a.Description,null,c.a.createElement("strong",null,Dt()(e.addedAt,"dd mmm yyyy @ h:MM tt"))," - ",n)))})))}),At=function(e){return e&&e.user&&e.user.picture?c.a.createElement(_t.a,{avatar:!0,className:"added_by_avatar_image",src:e.user.picture}):c.a.createElement(dt.a,{name:"user"})},jt=function(e){var t=e.users,n=void 0===t?[]:t,a=At(n[0]);return n.length?c.a.createElement(Tt.a,{wide:!0,content:Pt(n),trigger:a}):a},wt=n(164),Rt=(n(645),function(e){return Math.round(e/10-5)}),It=function(e){return c.a.createElement(Ot.a,null,e.votes.map((function(e,t){var n=e.user?e.user.fullname:"User unknown",a=c.a.createElement(wt.a,{circular:!0,size:"mini"},Rt(e.vote));return c.a.createElement(Ot.a.Item,{key:t},xt(e),c.a.createElement(Ot.a.Content,null,c.a.createElement(Ot.a.Description,null,c.a.createElement("strong",null,Dt()(e.at,"dd mmm yyyy @ h:MM tt"))," - ",n," ",a)))})))},xt=function(e){return e&&e.user&&e.user.picture?c.a.createElement(_t.a,{avatar:!0,className:"voted_by_avatar_image",src:e.user.picture}):null},Lt=function(e){var t=!0,n="grey",a="thumbs up",r=Rt(e.total);return r<0&&(a="thumbs down"),r>4&&(n="green",t=!1),r<-4&&(n="red",t=!1),c.a.createElement(wt.a,{className:"track-label vote-track-label",size:e.size||"tiny",color:n,basic:t,icon:a,content:r,ribbon:e.ribbon?"right":null})},Ut=function(e){var t=e.votes?e.votes.length:0;return e.show?t<1?Lt(e):c.a.createElement(Tt.a,{wide:"very",content:It(e),trigger:Lt(e)}):null},Vt=n(379),Mt=(n(646),function(){var e=Object(l.c)((function(e){return e.timer})),t=Object(l.c)((function(e){return e.track})),n=function(e){if(0===e.duration)return 0;var t=xe(e.position),n=xe(e.duration),a=Math.round(t/n*100);return isNaN(a)?0:a}(e);return c.a.createElement("div",{className:"c-progressBar"},c.a.createElement("span",{className:"c-progressBar__trackLength"},Ie(t.length)),c.a.createElement("span",{className:"c-progressBar__remainingTime"},Ie(e.remaining)),c.a.createElement(Vt.a,{percent:n,strokeLinecap:"square"}))}),Bt=n(115),Kt=n.n(Bt),Yt=n(231),qt=(n(647),n(648),{0:{style:{color:"red"},label:c.a.createElement(dt.a,{name:"thumbs down",color:"red"})},50:c.a.createElement(dt.a,{name:"handshake"}),100:{style:{color:"green"},label:c.a.createElement(dt.a,{name:"thumbs up",color:"green"})}}),zt=function(e){var t=e.split(":").pop();return"https://open.spotify.com/track/".concat(t)},Ft=function(e){var t=" (".concat(e.album.year,")");return c.a.createElement("p",null,e.album.name,t)},Gt=function(e){var t=e.map((function(e){return e.vote}));return t.length<1?0:Object(Yt.mean)(Object(Yt.flatten)(t))},Jt=function(e){return e>50?"#21ba45":e<50?"red":"gray"},Qt=function(e){return e.metrics?c.a.createElement(Ut,{total:e.metrics.votesAverage,show:e.metrics.votes>0,ribbon:!0}):null},Ht=function(e){return c.a.createElement("div",{className:"c-nowPlaying__metaItem"},c.a.createElement("h6",null,"Added"),e.count)},Wt=function(e){return c.a.createElement("div",{className:"c-nowPlaying__metaItem"},c.a.createElement("h6",null,"Played"),e.metrics&&e.metrics.plays)},Xt=function(e){return c.a.createElement("div",{className:"c-nowPlaying__metaItem"},c.a.createElement("h6",null,"Votes"),e.metrics&&e.metrics.votes)},Zt=function(e){var t=e.track,n=e.onVote,a=e.userID;if(!t)return c.a.createElement("div",{className:"c-nowPlaying"},c.a.createElement("div",null,c.a.createElement("img",{className:"c-nowPlaying__image",src:Kt.a,alt:"Kyan Limited Edition Collectors Vinyl"}),c.a.createElement("div",{className:"c-nowPlaying__trackInfo"},c.a.createElement("h6",null,"Now playing"),c.a.createElement("h4",null,"-"),c.a.createElement("p",null,"Drag some music here or press play."))));var r,i=t.addedBy,o=void 0===i?[]:i,l=o[0]&&o[0].votes||[],u=l.find((function(e){return e.user._id===a})),s=u?u.vote:null;return c.a.createElement("div",{className:"c-nowPlaying"},c.a.createElement("div",null,c.a.createElement("img",{src:t.image||Kt.a,className:"c-nowPlaying__image",alt:t.image?t.name:"Kyan Limited Edition Collectors Vinyl"}),c.a.createElement("div",{className:"c-nowPlaying__trackInfo"},c.a.createElement("div",{className:"c-nowPlaying__rating"},c.a.createElement(Qt,{metrics:t.metrics})),c.a.createElement("h6",null,"Now playing"),c.a.createElement("a",{className:"h4",href:zt(t.uri),target:"_blank",rel:"noopener noreferrer"},t.name),c.a.createElement("p",null,t.artist.name),c.a.createElement(Ft,{album:t.album}),c.a.createElement(Mt,null))),c.a.createElement("div",null,c.a.createElement("div",{className:"c-nowPlaying__votingWrapper"},c.a.createElement(Nt.a,{disabled:!a,dots:!0,value:s,included:!1,marks:qt,step:10,onChange:(r=t.uri,function(e){return n(r,e/10)}),handleStyle:{borderColor:Jt(s),backgroundColor:Jt(s)}})),c.a.createElement("div",{className:"c-nowPlaying__metaWrapper"},c.a.createElement(Ht,{count:o.length}),c.a.createElement(Wt,{metrics:t.metrics}),c.a.createElement(Xt,{metrics:t.metrics})),c.a.createElement("div",{className:"c-nowPlaying__footer"},c.a.createElement(jt,{users:t.addedBy}),c.a.createElement(Ut,{size:"mini",show:l.length>0,total:Gt(l),votes:l}))))},$t=function(){var e=Object(r.useContext)(C).googleUser,t=Object(l.c)((function(e){return e.track})),n=Object(l.b)();return c.a.createElement(Zt,{userID:e&&e.googleId,track:t,onVote:function(e,t){return n(function(e,t){return{type:Ne,key:Oe,params:{uri:e,vote:t}}}(e,t))}})},en=function(){var e=Object(r.useContext)(C),t=e.googleUser,n=e.signIn,a=e.signOut,i=c.a.createElement("button",{onClick:function(){return n()},className:"c-button"},c.a.createElement(dt.a,{name:"power off"}));return t&&t.profileObj&&(i=c.a.createElement("button",{onClick:function(){return a()},className:"c-button c-button--image"},c.a.createElement("img",{title:t.profileObj.name,src:t.profileObj.imageUrl,alt:t.profileObj.name}))),c.a.createElement(c.a.Fragment,null,i)},tn=n(740),nn=n(742),an=n(163),rn=n(738),cn=function(e){var t=c.a.useState(!1),n=Object(an.a)(t,2),a=n[0],r=n[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(tn.a.Action,{className:"remove-track",onClick:function(){return r(!0)}},"Remove"),c.a.createElement(rn.a,{content:"Are you sure you want to remove: ".concat(e.name),cancelButton:"No thanks",confirmButton:"Do it!",open:a,onCancel:function(){return r(!1)},onConfirm:function(t){e.onClick(t),r(!1)}}))},on=(n(698),function(e){return c.a.createElement(tn.a.Avatar,{src:e.src,className:mt()("c-tracklist__image",{"c-tracklist__image--current":e.isCurrent})})}),ln=function(e){var t=e.image?e.image:Kt.a;return c.a.createElement(on,{src:t,isCurrent:e.isCurrent})},un=function(e){return c.a.createElement("span",{className:"c-tracklist__title"},e.name)},sn=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"c-tracklist__artist"},c.a.createElement(nn.a,{as:"a",className:"track-search-link",onClick:e.onClick},e.artistName)),c.a.createElement("span",{className:"c-tracklist__trackLength"},Ie(e.trackLength)))},mn=function(e){if(!e.metrics)return null;var t=e.metrics.votes>0;return t?c.a.createElement(tn.a.Action,{as:"span"},c.a.createElement(Ut,{total:e.metrics.votesAverage,show:t})):null},dn=function(e){if(e.isCurrent||e.disabled)return null;var t,n;return c.a.createElement(cn,{uri:e.uri,name:e.name,onClick:(t=e.uri,n=e.onClick,function(){return n(t)})})},fn=function(e){var t=!0,n="grey";return e.metrics?(e.metrics.plays>0&&(t=!1,n=null),c.a.createElement(tn.a.Action,{as:"span"},c.a.createElement(wt.a,{className:"track-label",size:"tiny",color:n,basic:t},"Played ",c.a.createElement(wt.a.Detail,null,e.metrics.plays)))):null},En=function(e){var t=!1;return e.tracks.map((function(n,a){var r,i,o=n.addedBy,l=(r=e.current,i=n.uri,r&&r.uri===i);return l&&(t=t||!0),c.a.createElement("div",{className:mt()("c-tracklist__item",{"c-tracklist__item--current":l}),key:"".concat(a).concat(n.uri)},c.a.createElement(ln,{image:n.image,isCurrent:l}),c.a.createElement("div",{className:mt()({"c-tracklist__info":!t})},c.a.createElement(un,{name:n.name}),c.a.createElement(sn,{artistName:n.artist.name,trackLength:n.length,onClick:e.onArtistSearch(n.artist.name)}),c.a.createElement(tn.a.Actions,null,c.a.createElement(mn,{metrics:n.metrics}),c.a.createElement(fn,{metrics:n.metrics}),c.a.createElement(tn.a.Action,null,c.a.createElement(jt,{users:o})),c.a.createElement(dn,{uri:n.uri,name:n.name,disabled:e.disabled,isCurrent:l,onClick:e.onRemove}))))}))},bn=function(e){return e.tracks?c.a.createElement("div",{className:"c-tracklist"},c.a.createElement(En,{disabled:e.disabled,tracks:e.tracks,current:e.currentTrack,onRemove:e.onRemoveTrack,onArtistSearch:e.onArtistSearch})):null},kn=function(e){var t=e.onClick,n=e.disabled;return c.a.createElement("button",{onClick:t,disabled:n,className:mt()("c-button",{"c-button--disabled":n})},c.a.createElement(dt.a,{name:"search"}))},pn=(n(699),function(e,t){if((e+=5)<=100)return function(){t(e)}}),gn=function(e,t){if((e-=5)>=0)return function(){t(e)}},vn=function(e){return c.a.createElement("button",{onClick:gn(e.volume,e.onChange),disabled:e.disabled,className:mt()("c-button",{"c-button--disabled":e.disabled})},c.a.createElement(dt.a,{name:"volume down"}))},yn=function(e){return c.a.createElement("button",{onClick:pn(e.volume,e.onChange),disabled:e.disabled,className:mt()("c-button",{"c-button--disabled":e.disabled})},c.a.createElement(dt.a,{name:"volume up"}))},Cn=function(e){var t=e.disabled,n=e.onVolumeChange,a=Object(l.c)((function(e){return e.jukebox}));return c.a.createElement("div",{className:"c-volumeControls"},c.a.createElement(vn,{volume:a.volume,onChange:n,disabled:t}),c.a.createElement(yn,{volume:a.volume,onChange:n,disabled:t}),c.a.createElement("div",{className:"c-volumeControls__indicator"},a.volume))},hn=function(e){var t=c.a.useState(!1),n=Object(an.a)(t,2),a=n[0],r=n[1];if(e.disabled)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(wt.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:function(){return r(!0)},className:"jb-clear-button"},"CLEAR"),c.a.createElement(rn.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:a,onCancel:function(){return r(!1)},onConfirm:function(t){e.onClear(t),r(!1)}}))},Nn=n(748),On=n(737),_n=n(746),Tn=n(736),Sn=n(747),Dn=n(744),Pn=(n(700),function(e){return e.metrics?c.a.createElement(Ut,{size:"mini",total:e.metrics.votesAverage,show:e.metrics.votes>0}):null}),An=function(e){return c.a.createElement("div",{className:mt()("search-list-item",{disabled:e.track.explicit}),onClick:e.track.explicit?void 0:e.onClick},c.a.createElement(_t.a,{floated:"left",src:e.track.image,size:"tiny",title:"Click to add - ".concat(e.track.name," - ").concat(e.track.artist.name),className:"search-list-item__image",disabled:e.track.explicit}),c.a.createElement(Ot.a.Content,null,c.a.createElement("div",{className:"search-list-item__header"},e.track.name," - ",e.track.artist.name),c.a.createElement("div",{className:"search-list-item__content"},e.track.album.name),c.a.createElement(Pn,{metrics:e.track.metrics})))},jn=function(e){return e.tracks.map((function(t){return c.a.createElement(An,{key:t.track.uri,track:t.track,onClick:function(){return e.onAddTrack(t.track.uri)}})}))},wn=function(e){var t=e.visible,n=e.onClose,a=e.results,i=e.onSubmit,o=e.query,l=e.onQueryChange,u=e.onAddTrack,s=e.totalPages,m=e.onPageChange,d=Object(r.useRef)(null);return c.a.createElement(Nn.a.Pushable,null,c.a.createElement(Nn.a,{animation:"overlay",icon:"labeled",inverted:"true",vertical:"true",visible:t,width:"very wide",direction:"right",className:"sidebar-search",onShow:function(){return d.current.focus()}},c.a.createElement(On.a,{inverted:!0,onSubmit:i},c.a.createElement(On.a.Field,null,c.a.createElement("label",{required:!0},"SEARCH"),c.a.createElement("input",{ref:d,placeholder:"track, artist or album",onChange:l,value:o})),c.a.createElement(_n.a,{type:"submit",fluid:!0},"Submit")),c.a.createElement(Tn.a,{horizontal:!0},c.a.createElement(Sn.a,{as:"h4",inverted:!0},"Results")),s>0&&c.a.createElement(Dn.a,{className:"search-list-pagination",defaultActivePage:1,firstItem:null,lastItem:null,pointing:!0,secondary:!0,totalPages:s,onPageChange:m}),c.a.createElement(Ot.a,{divided:!0,relaxed:!0,inverted:!0,size:"tiny"},c.a.createElement(jn,{tracks:a,onAddTrack:u}))),c.a.createElement(Nn.a.Pusher,{dimmed:t,onClick:t?n:null},e.children))},Rn=function(e){var t=Object(l.c)((function(e){return e.search})),n=Object(l.b)(),a=function(e){n(function(e){return{type:je,uri:e}}(e)),n(W(e))},r=function(e){var a={offset:(e.activePage-1)*t.limit,limit:t.limit};n(Ve(t.query,a))};return c.a.createElement(wn,{visible:t.searchSideBarOpen,onClose:function(){return n(Le(!1))},onSubmit:function(){return r({activePage:1})},onAddTrack:function(e){return a(e)},onQueryChange:function(e){return n(Ue(e.target.value))},onPageChange:function(e,t){return r(t)},results:t.results,totalPages:Math.round(t.total/t.limit),query:t.query},e.children)},In=(n(721),function(e){var t=e.online,n=e.disabled,a=e.onPlay,r=e.onStop,i=e.onPause,o=e.onNext,l=e.onPrevious,u=e.onVolumeChange,s=e.onDrop,m=e.onTracklistClear,d=e.onSearchClick,f=e.tracklist,E=e.currentTrack,b=e.onRemoveTrack,k=e.onArtistSearch;return c.a.createElement(ut.a.Dimmable,{blurring:!0,dimmed:!t},c.a.createElement(ht,{disabled:n,onDrop:s},c.a.createElement(Rn,null,c.a.createElement("div",{className:"c-header"},c.a.createElement(vt,{disabled:n,onPlay:a,onStop:r,onPause:i,onNext:o,onPrevious:l}),c.a.createElement("div",{className:"c-header__actions"},c.a.createElement(kn,{onClick:d,disabled:n}),c.a.createElement(Cn,{disabled:n,onVolumeChange:u}),c.a.createElement(en,null))),c.a.createElement("div",{className:"c-main"},c.a.createElement("div",{className:"c-main__nowPlaying"},c.a.createElement($t,null)),c.a.createElement("div",{className:"c-main__trackList"},c.a.createElement("h6",null,"Tracklist ",c.a.createElement(hn,{disabled:n,onClear:m})),c.a.createElement(bn,{disabled:n,tracks:f,currentTrack:E,onRemoveTrack:b,onArtistSearch:k}))))))}),xn=Object(rt.DragDropContext)(it.a)((function(){var e=Object(l.c)((function(e){return e.jukebox})),t=Object(l.c)((function(e){return e.tracklist})),n=Object(l.c)((function(e){return e.track})),a=Object(l.b)(),i=Object(r.useContext)(C),o=i.isSignedIn,u=i.googleUser,s=!(o&&e.mopidyOnline),m=Object(r.useRef)(),d=Object(r.useRef)();Object(r.useEffect)((function(){return a(ne()),function(){a(ce())}}),[a]),o&&u.tokenId!==m.current&&(m.current=u.tokenId,d.current=lt.refresh(u,(function(e){a(Q(e))})),a(Q(m.current))),o||(m.current=void 0,lt.clear(d.current),a(H()));var f=Object(r.useCallback)((function(){return a(Ee())}),[a]),E=Object(r.useCallback)((function(){return a(be())}),[a]),b=Object(r.useCallback)((function(){return a(ke())}),[a]),k=Object(r.useCallback)((function(){return a(pe())}),[a]),p=Object(r.useCallback)((function(){return a(ge())}),[a]),g=Object(r.useCallback)((function(e){return a(he(e))}),[a]),v=Object(r.useCallback)((function(e,t){t&&a(W(t.getItem().urls[0]))}),[a]),y=Object(r.useCallback)((function(){return a(fe())}),[a]),h=Object(r.useCallback)((function(){return a(Le(!0))}),[a]),N=Object(r.useCallback)((function(e){return a(ee(e))}),[a]),O=Object(r.useCallback)((function(e){return function(t){var n={offset:0};a(Ve(e,n)),a(Ue(e)),a(Le(!0))}}),[a]);return c.a.createElement(In,{online:e.online,disabled:s,onPlay:f,onStop:E,onPause:b,onNext:k,onPrevious:p,onVolumeChange:g,onDrop:v,onTracklistClear:y,onSearchClick:h,tracklist:t,currentTrack:n,onRemoveTrack:N,onArtistSearch:O})})),Ln=(n(722),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.compose),Un=Object(u.createStore)(at,Ln(Object(u.applyMiddleware)(Fe))),Vn=function(){var e=Object(d.useGoogleLogin)({clientId:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(l.a,{store:Un},c.a.createElement(m.a,null),c.a.createElement("div",{className:"c-app"},c.a.createElement(C.Provider,{value:e},c.a.createElement(v,null,c.a.createElement(xn,null)))))};o.a.render(c.a.createElement(Vn,null),document.getElementById("root"))}},[[390,1,2]]]);
//# sourceMappingURL=main.e992cf4c.chunk.js.map