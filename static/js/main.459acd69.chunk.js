(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/default-artwork.6bba9800.png"},224:function(e,t){e.exports={transformUrl:e=>{const t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},385:function(e,t,a){e.exports=a(713)},423:function(e,t){},563:function(e,t,a){},622:function(e,t,a){},638:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){},688:function(e,t,a){},689:function(e,t,a){},710:function(e,t,a){},712:function(e,t,a){},713:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"updateToken",(function(){return F})),a.d(n,"clearToken",(function(){return Y})),a.d(n,"addNewTrack",(function(){return q})),a.d(n,"addNewTracks",(function(){return G})),a.d(n,"addCurrentTrack",(function(){return H})),a.d(n,"syncSocialData",(function(){return J})),a.d(n,"addTrackList",(function(){return W})),a.d(n,"removeFromTracklist",(function(){return Q})),a.d(n,"updateProgressTimer",(function(){return X})),a.d(n,"wsConnect",(function(){return Z})),a.d(n,"wsConnecting",(function(){return $})),a.d(n,"wsConnected",(function(){return ee})),a.d(n,"wsDisconnect",(function(){return te})),a.d(n,"wsDisconnected",(function(){return ae})),a.d(n,"mopidyConnected",(function(){return ne})),a.d(n,"mopidyDisconnected",(function(){return re})),a.d(n,"getCurrentTrack",(function(){return ce})),a.d(n,"getTimePosition",(function(){return le})),a.d(n,"getState",(function(){return se})),a.d(n,"getTrackList",(function(){return oe})),a.d(n,"clearTrackList",(function(){return ie})),a.d(n,"startPlaying",(function(){return me})),a.d(n,"stopPlaying",(function(){return ue})),a.d(n,"pausePlaying",(function(){return de})),a.d(n,"nextPlaying",(function(){return Ee})),a.d(n,"previousPlaying",(function(){return ke})),a.d(n,"getVolume",(function(){return pe})),a.d(n,"updateVolume",(function(){return be})),a.d(n,"updatePlaybackState",(function(){return Ce})),a.d(n,"setVolume",(function(){return ge}));var r=a(0),c=a.n(r),l=a(23),s=a.n(l),o=a(22),i=a(50),m=a(343),u=a(98),d=a.n(u),E=a(344);class k extends c.a.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0})}render(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}var p=k;var b=c.a.createContext(),C=a(345),g=a.n(C),v="playback.getCurrentTrack",y="event:trackPlaybackStarted",h="event:playbackStateChanged",T="event:trackPlaybackResumed",O="tracklist.getTracks",f="tracklist.add",N="tracklist.remove",S="tracklist.clear",D="playback.getTimePosition",A="playback.getState",_="playback.play",j="playback.stop",P="playback.pause",R="playback.next",w="playback.previous",x="playing",I="paused",M="stopped",L="mixer.setVolume",U="mixer.getVolume",V="event:volumeChanged",z="validationError",K={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer",MOPIDY_CONNECTED:"actionMopidyConnected",MOPIDY_DISCONNECTED:"actionMopidyDisconnected",SYNC_SOCIAL_DATA:"syncSocialData"},B=a(224);const F=e=>({type:K.STORE_TOKEN,token:e}),Y=()=>({type:K.CLEAR_STORE_TOKEN}),q=e=>{let t=Object(B.transformUrl)(e);return{type:K.SEND,key:f,params:{uris:[t]}}},G=e=>({type:K.SEND,key:f,params:{uris:e.map(e=>Object(B.transformUrl)(e))}}),H=e=>({type:K.ADD_CURRENT_TRACK,track:e}),J=e=>({type:K.SYNC_SOCIAL_DATA,track:e}),W=e=>({type:K.ADD_TRACKS,list:e}),Q=e=>({type:K.SEND,key:N,params:{criteria:{uri:[e]}}}),X=(e,t)=>(t===1/0&&(t=0),{type:K.UPDATE_PROGRESS_TIMER,position:e,duration:t}),Z=()=>({type:K.CONNECT}),$=()=>({type:K.CONNECTING}),ee=()=>({type:K.CONNECTED}),te=()=>({type:K.DISCONNECT}),ae=()=>({type:K.DISCONNECTED}),ne=()=>({type:K.MOPIDY_CONNECTED}),re=()=>({type:K.MOPIDY_DISCONNECTED}),ce=()=>({type:K.SEND,key:v}),le=()=>({type:K.SEND,key:D}),se=()=>({type:K.SEND,key:A}),oe=()=>({type:K.SEND,key:O}),ie=()=>({type:K.SEND,key:S}),me=()=>({type:K.SEND,key:_}),ue=()=>({type:K.SEND,key:j}),de=()=>({type:K.SEND,key:P}),Ee=()=>({type:K.SEND,key:R}),ke=()=>({type:K.SEND,key:w}),pe=()=>({type:K.SEND,key:U}),be=e=>({type:K.UPDATE_VOLUME,volume:e}),Ce=e=>({type:K.UPDATE_PLAYBACK_STATE,state:e}),ge=e=>({type:K.SEND,key:L,params:[Number(e)]});var ve="actionVote",ye="castVote",he="voteCasted",Te="actionTrackSearch",Oe="searchGetTracks",fe="actionStoreSearchResults",Ne="actionStoreSearchQuery",Se="actionToggleSearchSidebar",De="actionRemoveFromSearchResults",Ae="curateAddTrackToMix",_e="curateRemoveTracksFromMix",je="searchSwapTracks",Pe="searchClearMix",Re=a(346),we=a.n(Re);const xe=e=>{let t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},Ie=e=>.001*e,Me=e=>({type:Se,open:e}),Le=e=>({type:Ne,query:e}),Ue=(e,t)=>({type:Te,key:Oe,params:{query:e,options:t}}),Ve=e=>({type:De,uris:e});var ze="authenticationTokenInvalid";var Ke={decode:e=>JSON.parse(e),encodeToJson:({jwt:e,key:t,data:a})=>JSON.stringify({jwt:e,key:t,data:a})};var Be={info:({id:e,title:t,message:a})=>u.store.addNotification({id:e,title:t,message:a,type:"info",insert:"top",container:"bottom-left",dismiss:{duration:3e3}}),success:({id:e,title:t,message:a})=>u.store.addNotification({id:e,title:t,message:a,type:"success",insert:"top",container:"bottom-left",dismiss:{duration:3e3}}),warning:({id:e,title:t,message:a})=>u.store.addNotification({id:e,title:t,message:a,type:"warning",insert:"top",container:"bottom-left",dismiss:{duration:5e3}})};const Fe=(e,t)=>{e.dispatch(Ce(t))};var Ye=(e,t,a)=>{const n=Ke.decode(t),r=n.key,c=n.data,l=n.user;switch(r){case ze:console.error("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(Y());break;case v:case y:c&&c.track&&((e,t,a)=>{t.dispatch(H(e)),t.dispatch(J(e));const n=a.set(0,e.length);t.getState().jukebox.playbackState===x&&n.start()})(c.track,e,a);break;case h:case A:((e,t,a)=>{switch(t){case I:case M:Fe(e,t),a.stop();break;case x:Fe(e,t),a.start()}})(e,c,a);break;case O:((e,t)=>{t.dispatch(W(e))})(c,e);break;case R:case w:e.dispatch(ce());break;case L:Be.info({title:"Volume Updated",message:"".concat(l.fullname," changed it to ").concat(c.volume)});break;case N:Be.warning({title:"Track Removed",message:"".concat(l.fullname," removed: ").concat(c.message)});break;case f:Be.success({title:"New Track",message:"".concat(l.fullname," added: ").concat(c.message)});break;case U:case V:e.dispatch(be(c.volume));break;case D:a.set(c);break;case Oe:e.dispatch({type:fe,results:c});break;case he:c&&e.dispatch(J(c));break;case T:a.set(c);break;case z:Be.warning({title:"Oops",message:c.message})}};var qe={loadInitial:e=>{["getCurrentTrack","getState","getTrackList","getVolume","getTimePosition"].forEach(t=>{e.dispatch(n[t]())})}};var Ge=(()=>{const e="http://".concat("jukebox-api-prod.local",":").concat("8080");let t,a=null;return r=>c=>l=>{const s=()=>Ke.encodeToJson({jwt:r.getState().settings.token,key:l.key,data:l.params}),o=e=>{if(JSON.parse(e).online)return r.dispatch(ne()),qe.loadInitial(r);r.dispatch(re())},i=()=>{a=((e,t)=>we()({callback:(a,n)=>{e.dispatch(t.updateProgressTimer(a,n))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0}))(r,n),r.dispatch(ee())},m=()=>r.dispatch(te()),u=e=>Ye(r,e,a),d=e=>Ye(r,e,a),E=e=>Ye(r,e,a);switch(l.type){case K.CONNECT:return null!=t&&t.close(),t=g()(e,{transports:["websocket"]}),t.on("vote",E),t.on("search",d),t.on("mopidy",o),t.on("message",u),t.on("connect",i),t.on("disconnect",m),void r.dispatch($());case K.DISCONNECT:return a&&a.reset(),void r.dispatch(ae());case K.SEND:return t&&t.emit("message",s());case Te:return t&&t.emit("search",s());case ve:return t&&t.emit("vote",s());default:return c(l)}}})();var He=(e=null,t)=>{switch(t.type){case K.ADD_CURRENT_TRACK:return t.track;case K.SYNC_SOCIAL_DATA:return Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics});default:return e}};var Je=(e=[],t)=>{switch(t.type){case K.ADD_TRACKS:return t.list.map(e=>e.track);case K.SYNC_SOCIAL_DATA:return e.map(e=>e.uri===t.track.uri?Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics}):e);default:return e}};const We={position:0,duration:0,remaining:0};var Qe=(e=We,t)=>{switch(t.type){case K.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration,remaining:t.duration-t.position};default:return e}};const Xe={online:!1,mopidyOnline:!1,volume:0,playbackState:M};var Ze=(e=Xe,t)=>{switch(t.type){case K.CONNECTED:return Object.assign({},e,{online:!0});case K.DISCONNECTED:return Object.assign({},e,{online:!1});case K.MOPIDY_CONNECTED:return Object.assign({},e,{mopidyOnline:!0});case K.MOPIDY_DISCONNECTED:return Object.assign({},e,{mopidyOnline:!1});case K.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case K.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}};const $e={token:null};var et=(e=$e,t)=>{switch(t.type){case K.STORE_TOKEN:return t.token===e.token?e:Object.assign({},e,{token:t.token});case K.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},tt=a(47);const at={searchSideBarOpen:!1,query:"",limit:20,offset:0,total:0,results:[]};var nt=(e=at,t)=>{switch(t.type){case De:return Object(tt.a)(Object(tt.a)({},e),{},{results:e.results.filter(e=>!t.uris.includes(e.track.uri))});case Se:return Object.assign({},e,{searchSideBarOpen:t.open});case Ne:return Object.assign({},e,{query:t.query});case fe:{const a=t.results.tracks;return Object.assign({},e,{limit:a.limit,offset:a.offset,total:a.total>1e4?1e4:a.total,results:a.items})}default:return e}};const rt={tracks:[]};var ct=(e=rt,t)=>{switch(t.type){case Ae:return e.tracks.find(e=>e.track.uri===t.track.uri)||e.tracks.push({track:t.track}),e;case _e:return Object(tt.a)(Object(tt.a)({},e),{},{tracks:e.tracks.filter(e=>e.track.uri!==t.uri)});case je:{const a=e.tracks;return a[t.a]=a.splice(t.b,1,a[t.a])[0],Object(tt.a)(Object(tt.a)({},e),{},{tracks:a})}case Pe:return Object(tt.a)(Object(tt.a)({},e),{},{tracks:[]});default:return e}};var lt=Object(i.combineReducers)({track:He,tracklist:Je,timer:Qe,jukebox:Ze,settings:et,search:nt,curatedList:ct}),st=a(727),ot=a(92),it=a(157),mt=a.n(it),ut=a(230);var dt={refresh:(e,t)=>ut.b(()=>{e.reloadAuthResponse().then(e=>(console.info("Token refreshed OK"),t(e.id_token)),e=>console.warn("Token un-refreshable: ",e.message))},27e5),clear:e=>{e&&ut.a(e)}},Et=a(739),kt=a(726),pt=a(742),bt=a(740),Ct=a(738),gt=a(63);const vt=e=>c.a.createElement(Ct.a,{onClick:e.onClick,animated:"vertical",className:"jb-previous-button",disabled:e.disabled},c.a.createElement(Ct.a.Content,{hidden:!0},"Prev"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"step backward"}))),yt=e=>c.a.createElement(Ct.a,{onClick:e.onClick,animated:"vertical",className:"jb-next-button",disabled:e.disabled},c.a.createElement(Ct.a.Content,{hidden:!0},"Next"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"step forward"})));var ht=({disabled:e,onPrevious:t,onNext:a})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(vt,{onClick:t,disabled:e}),c.a.createElement(yt,{onClick:a,disabled:e}));const Tt=e=>c.a.createElement(Ct.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===x||e.disabled,active:e.state===x,className:"jb-play-button"},c.a.createElement(Ct.a.Content,{hidden:!0},"Play"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"play"}))),Ot=e=>c.a.createElement(Ct.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===I||e.state===M||e.disabled,active:e.state===I,className:"jb-pause-button"},c.a.createElement(Ct.a.Content,{hidden:!0},"Pause"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"pause"}))),ft=e=>c.a.createElement(Ct.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===M||e.disabled,active:e.state===M,className:"jb-stop-button"},c.a.createElement(Ct.a.Content,{hidden:!0},"Stop"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"stop"})));var Nt=e=>{const t=Object(o.c)(e=>e.jukebox),a=e.disabled,n=e.onPlay,r=e.onPause,l=e.onStop,s=e.onPrevious,i=e.onNext;return c.a.createElement("span",null,c.a.createElement(ht,{disabled:a,onPrevious:s,onNext:i}),c.a.createElement(Tt,{onClick:n,state:t.playbackState,disabled:a}),c.a.createElement(Ot,{onClick:r,state:t.playbackState,disabled:a}),c.a.createElement(ft,{onClick:l,state:t.playbackState,disabled:a}))};a(563);const St={drop(e,t){e.onDrop&&e.onDrop(e,t)}};class Dt extends r.Component{render(){const e=this.props,t=e.connectDropTarget,a=e.isOver;return t(c.a.createElement("div",null,a?c.a.createElement("div",{className:"drag-is-over"},c.a.createElement("p",null,"Drop da track")):null,this.props.children))}}var At=Object(ot.DropTarget)(e=>e.accepts,St,(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver()}))(Dt);var _t=({disabled:e,onDrop:t,children:a})=>e?a:c.a.createElement(ot.DragDropContextProvider,{backend:mt.a},c.a.createElement(At,{accepts:K.DROP_TYPES,onDrop:t},a));var jt=a(735),Pt=a(376),Rt=a(165),wt=a(374),xt=a(734),It=a(732),Mt=a(161),Lt=a.n(Mt);a(622);const Ut=e=>c.a.createElement(xt.a,{className:"added-by-list"},e.map((e,t)=>{const a=e.user?e.user.fullname:"User unknown";return c.a.createElement(xt.a.Item,{key:t},Vt(e),c.a.createElement(xt.a.Content,null,c.a.createElement(xt.a.Description,null,c.a.createElement("strong",null,Lt()(e.addedAt,"dd mmm yyyy @ h:MM tt"))," - ",a)))})),Vt=e=>e&&e.user&&e.user.picture?c.a.createElement(Pt.a,{avatar:!0,className:"added_by_avatar_image",src:e.user.picture}):c.a.createElement(gt.a,{name:"user"});var zt=({users:e=[]})=>{const t=Vt(e[0]);return e.length?c.a.createElement(It.a,{wide:!0,content:Ut(e),trigger:t}):t};a(638);const Kt=e=>Math.round(e/10-5),Bt=e=>c.a.createElement(xt.a,null,e.votes.map((e,t)=>{const a=e.user?e.user.fullname:"User unknown",n=c.a.createElement(Rt.a,{circular:!0,size:"mini"},Kt(e.vote));return c.a.createElement(xt.a.Item,{key:t},Ft(e),c.a.createElement(xt.a.Content,null,c.a.createElement(xt.a.Description,null,c.a.createElement("strong",null,Lt()(e.at,"dd mmm yyyy @ h:MM tt"))," - ",a," ",n)))})),Ft=e=>e&&e.user&&e.user.picture?c.a.createElement(Pt.a,{avatar:!0,className:"voted_by_avatar_image",src:e.user.picture}):null,Yt=e=>{let t=!0,a="grey",n="thumbs up";const r=Kt(e.total);return r<0&&(n="thumbs down"),r>4&&(a="green",t=!1),r<-4&&(a="red",t=!1),c.a.createElement(Rt.a,{className:"track-label vote-track-label",size:e.size||"tiny",color:a,basic:t,icon:n,content:r,ribbon:e.ribbon?"right":null})};var qt=e=>{const t=e.votes?e.votes.length:0;return e.show?t<1?Yt(e):c.a.createElement(It.a,{wide:"very",content:Bt(e),trigger:Yt(e)}):null},Gt=a(375);var Ht=()=>{const e=Object(o.c)(e=>e.timer),t=Object(o.c)(e=>e.track),a=(e=>{if(0===e.duration)return 0;const t=Ie(e.position),a=Ie(e.duration),n=Math.round(t/a*100);return isNaN(n)?0:n})(e);return c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"remaining-text"},xe(e.remaining)),c.a.createElement("span",{className:"track-length"},xe(t.length)),c.a.createElement(Gt.a,{percent:a}))},Jt=a(116),Wt=a.n(Jt),Qt=a(228);a(639),a(640);const Xt={0:{style:{color:"red"},label:c.a.createElement(gt.a,{name:"thumbs down",color:"red"})},50:c.a.createElement(gt.a,{name:"handshake"}),100:{style:{color:"green"},label:c.a.createElement(gt.a,{name:"thumbs up",color:"green"})}},Zt=e=>{const t=e.split(":").pop();return"https://open.spotify.com/track/".concat(t)},$t=e=>{const t=" (".concat(e.album.year,")");return c.a.createElement(jt.a.Description,null,e.album.name,t)},ea=e=>{const t=e.map(e=>e.vote);return t.length<1?0:Object(Qt.mean)(Object(Qt.flatten)(t))},ta=e=>e>50?"#21ba45":e<50?"red":"gray",aa=e=>e.metrics?c.a.createElement(qt,{total:e.metrics.votesAverage,show:e.metrics.votes>0,ribbon:!0}):null,na=e=>c.a.createElement(Rt.a,{size:"mini"},"Added",c.a.createElement(Rt.a.Detail,null,e.count)),ra=e=>e.metrics?c.a.createElement(Rt.a,{size:"mini"},"Played",c.a.createElement(Rt.a.Detail,null,e.metrics.plays)):null,ca=e=>e.metrics?c.a.createElement(Rt.a,{size:"mini"},"Activity",c.a.createElement(Rt.a.Detail,null,e.metrics.votes)):null;var la=e=>{const t=e.track,a=e.onVote,n=e.userID;if(!t)return c.a.createElement(jt.a,null,c.a.createElement(Pt.a,{src:Wt.a}),c.a.createElement(jt.a.Content,null,c.a.createElement(jt.a.Header,null,"Nothing playing"),c.a.createElement(jt.a.Description,null,"Drag some music here or press play.")));const r=t.addedBy,l=void 0===r?[]:r,s=l[0]&&l[0].votes||[],o=s.find(e=>e.user._id===n),i=o?o.vote:null;return c.a.createElement(jt.a,null,c.a.createElement(Pt.a,{src:t.image||Wt.a,label:c.a.createElement(aa,{metrics:t.metrics})}),c.a.createElement(jt.a.Content,null,c.a.createElement(Ht,null),c.a.createElement(jt.a.Header,null,t.name),c.a.createElement(jt.a.Meta,null,t.artist.name),c.a.createElement($t,{album:t.album})),c.a.createElement(jt.a.Content,{extra:!0},c.a.createElement("div",{className:"track-rating-container"},c.a.createElement(wt.a,{disabled:!n,dots:!0,value:i,included:!1,marks:Xt,step:10,onChange:(m=t.uri,e=>a(m,e/10)),handleStyle:{borderColor:ta(i),backgroundColor:ta(i)}}))),c.a.createElement(jt.a.Content,{extra:!0},c.a.createElement(na,{count:l.length}),c.a.createElement(ra,{metrics:t.metrics}),c.a.createElement(ca,{metrics:t.metrics}),c.a.createElement(qt,{size:"mini",show:s.length>0,total:ea(s),votes:s})),c.a.createElement(jt.a.Content,{extra:!0},c.a.createElement(zt,{users:t.addedBy}),c.a.createElement("a",{className:"track-uri",href:Zt(t.uri),target:"_blank",rel:"noopener noreferrer"},t.uri)));var m};var sa=()=>{const e=Object(r.useContext)(b).googleUser,t=Object(o.c)(e=>e.track),a=Object(o.b)();return c.a.createElement(la,{userID:e&&e.googleId,track:t,onVote:(e,t)=>a(((e,t)=>({type:ve,key:ye,params:{uri:e,vote:t}}))(e,t))})};a(641);var oa=()=>{const e=Object(r.useContext)(b),t=e.googleUser,a=e.signIn,n=e.signOut;let l=c.a.createElement(Ct.a,{icon:"power off",floated:"right",onClick:()=>a(),className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(l=c.a.createElement(Pt.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:()=>n()})),c.a.createElement(c.a.Fragment,null,l)},ia=a(4),ma=a.n(ia),ua=a(731),da=a(733),Ea=a(164),ka=a(729);var pa=e=>{const t=c.a.useState(!1),a=Object(Ea.a)(t,2),n=a[0],r=a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(ua.a.Action,{className:"remove-track",onClick:()=>r(!0)},"Remove"),c.a.createElement(ka.a,{content:"Are you sure you want to remove: ".concat(e.name),cancelButton:"No thanks",confirmButton:"Do it!",open:n,onCancel:()=>r(!1),onConfirm:t=>{e.onClick(t),r(!1)}}))};a(688);const ba=e=>c.a.createElement(ua.a.Avatar,{className:e.isCurrent?"current-image":null,src:e.src}),Ca=e=>{const t=e.image?e.image:Wt.a;return c.a.createElement(ba,{src:t,isCurrent:e.isCurrent})},ga=e=>c.a.createElement(ua.a.Author,null,e.name),va=e=>c.a.createElement(ua.a.Text,null,c.a.createElement(da.a,{as:"a",className:"track-search-link",onClick:e.onClick},e.artistName)," ",c.a.createElement("small",null,"(",xe(e.trackLength),")")),ya=e=>{if(!e.metrics)return null;const t=e.metrics.votes>0;return t?c.a.createElement(ua.a.Action,{as:"span"},c.a.createElement(qt,{total:e.metrics.votesAverage,show:t})):null},ha=e=>{if(e.isCurrent||e.disabled)return null;return c.a.createElement(pa,{uri:e.uri,name:e.name,onClick:(t=e.uri,a=e.onClick,()=>a(t))});var t,a},Ta=e=>{let t=!0,a="grey";return e.metrics?(e.metrics.plays>0&&(t=!1,a=null),c.a.createElement(ua.a.Action,{as:"span"},c.a.createElement(Rt.a,{className:"track-label",size:"tiny",color:a,basic:t},"Played ",c.a.createElement(Rt.a.Detail,null,e.metrics.plays)))):null},Oa=e=>{let t=!1;return e.tracks.map((a,n)=>{const r=a.addedBy,l=(s=e.current,o=a.uri,s&&s.uri===o);var s,o;return l&&(t=t||!0),c.a.createElement(ua.a,{className:ma()({"current-track":l}),key:"".concat(n).concat(a.uri)},c.a.createElement(Ca,{image:a.image,isCurrent:l}),c.a.createElement(ua.a.Content,{className:ma()({"track-info":!t})},c.a.createElement(ga,{name:a.name}),c.a.createElement(va,{artistName:a.artist.name,trackLength:a.length,onClick:e.onArtistSearch(a.artist.name)}),c.a.createElement(ua.a.Actions,null,c.a.createElement(ya,{metrics:a.metrics}),c.a.createElement(Ta,{metrics:a.metrics}),c.a.createElement(ua.a.Action,null,c.a.createElement(zt,{users:r})),c.a.createElement(ha,{uri:a.uri,name:a.name,disabled:e.disabled,isCurrent:l,onClick:e.onRemove}))))})};var fa=e=>e.tracks?c.a.createElement(ua.a.Group,{size:"small"},c.a.createElement(Oa,{disabled:e.disabled,tracks:e.tracks,current:e.currentTrack,onRemove:e.onRemoveTrack,onArtistSearch:e.onArtistSearch})):null;var Na=e=>c.a.createElement(Ct.a,{animated:"vertical",floated:"right",onClick:e.onClick,disabled:e.disabled},c.a.createElement(Ct.a.Content,{hidden:!0},"Search"),c.a.createElement(Ct.a.Content,{visible:!0},c.a.createElement(gt.a,{name:"search"})));const Sa=(e,t)=>{if((e+=5)<=100)return()=>{t(e)}},Da=(e,t)=>{if((e-=5)>=0)return()=>{t(e)}},Aa=e=>c.a.createElement(Ct.a,{className:"jb-volume-down",onClick:Da(e.volume,e.onChange),disabled:e.disabled},c.a.createElement(gt.a,{name:"volume down"})),_a=e=>c.a.createElement(Ct.a,{className:"jb-volume-up",onClick:Sa(e.volume,e.onChange),disabled:e.disabled},c.a.createElement(gt.a,{name:"volume up"}));var ja=({disabled:e,onVolumeChange:t})=>{const a=Object(o.c)(e=>e.jukebox);return c.a.createElement(Ct.a.Group,{floated:"right"},c.a.createElement(Aa,{volume:a.volume,onChange:t,disabled:e}),c.a.createElement(Ct.a.Or,{text:a.volume}),c.a.createElement(_a,{volume:a.volume,onChange:t,disabled:e}))};var Pa=e=>{const t=c.a.useState(!1),a=Object(Ea.a)(t,2),n=a[0],r=a[1];if(e.disabled)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Rt.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:()=>r(!0),className:"jb-clear-button"},"CLEAR"),c.a.createElement(ka.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:n,onCancel:()=>r(!1),onConfirm:t=>{e.onClear(t),r(!1)}}))},Ra=a(741),wa=a(728),xa=a(736);const Ia=e=>e.metrics?c.a.createElement(qt,{size:"mini",total:e.metrics.votesAverage,show:e.metrics.votes>0}):null;var Ma=e=>c.a.createElement("div",{className:ma()(e.className,"search-list-item",{disabled:e.track.explicit})},c.a.createElement(Pt.a,{alt:e.track.name,floated:"left",src:e.track.image,size:"tiny",title:"Click to add - ".concat(e.track.name," - ").concat(e.track.artist.name),className:"search-list-item__image",disabled:e.track.explicit,onClick:e.track.explicit?void 0:e.onClick}),c.a.createElement(xt.a.Content,null,c.a.createElement("div",{className:"search-list-item__header"},e.track.name," - ",e.track.artist.name),c.a.createElement("div",{className:"search-list-item__content"},e.track.album.name),c.a.createElement(Ia,{metrics:e.track.metrics}),e.onAdd?c.a.createElement("span",{onClick:e.onAdd,className:"search-list-item__add"},"Add to mix"):null));var La=e=>{const t=e.i;return c.a.createElement("div",{draggable:!0,className:ma()("draggable","search-list-item-draggable"),onDragStart:e=>((e,t)=>{e.dataTransfer&&e.dataTransfer.setData("text/plain",t)})(e,String(t)),onDrop:a=>((t,a)=>{const n=t.dataTransfer&&t.dataTransfer.getData("text/plain");n&&e.action(parseInt(a,10),parseInt(n,10))})(a,String(t)),title:"You can drag this to sort."},c.a.createElement(Ma,{key:e.track.uri,track:e.track}),c.a.createElement("span",{onClick:e.onRemove,className:"search-list-item__remove"},"Remove"))};a(689);const Ua=e=>c.a.createElement(c.a.Fragment,null,e.tracks.map(t=>c.a.createElement(Ma,{key:t.track.uri,track:t.track,onClick:()=>e.onClick(t.track.uri),onAdd:()=>e.onAdd(t.track)}))),Va=e=>c.a.createElement(c.a.Fragment,null,e.tracks.map((t,a)=>c.a.createElement(La,{i:a,key:a,track:t.track,onRemove:()=>e.onRemove(t.track.uri),action:e.onSwap}))),za=e=>{if(0===e.tracks.length)return null;const t=e.tracks.map(e=>e.track.uri);return c.a.createElement(c.a.Fragment,null,c.a.createElement(kt.a,{horizontal:!0},c.a.createElement(bt.a,{as:"h4",inverted:!0},"Your Mix")),c.a.createElement(xt.a,{divided:!0,inverted:!0,size:"tiny"},c.a.createElement(Va,{tracks:e.tracks,onRemove:e.onRemoveFromMix,onSwap:e.onSwapTracks})),c.a.createElement(Ct.a,{fluid:!0,onClick:()=>e.onAddTracks(t),className:"search-list-item__add_to_mix"},"Add mix to playlist"),c.a.createElement(kt.a,{horizontal:!0}))};var Ka=e=>{const t=e.visible,a=e.onClose,n=e.results,r=e.curatedList,l=e.onSubmit,s=e.query,o=e.onSwapTracks,i=e.onRemoveFromMix,m=e.onQueryChange,u=e.onAddTrack,d=e.onAddTracks,E=e.onAddTrackToMix,k=e.totalPages,p=e.onPageChange,b=c.a.useRef(null);return c.a.createElement(Ra.a.Pushable,null,c.a.createElement(Ra.a,{animation:"overlay",icon:"labeled",inverted:"true",vertical:"true",visible:t,width:"very wide",direction:"right",className:"sidebar-search",onShow:()=>b.current&&b.current.focus()},c.a.createElement(za,{tracks:r,onSwapTracks:o,onAddTracks:d,onRemoveFromMix:i}),c.a.createElement(wa.a,{inverted:!0,onSubmit:l},c.a.createElement(wa.a.Field,null,c.a.createElement("label",null,"SEARCH"),c.a.createElement("input",{ref:b,"aria-label":"search-input",placeholder:"track, artist or album",onChange:m,value:s})),c.a.createElement(Ct.a,{type:"submit",fluid:!0},"Find")),c.a.createElement(kt.a,{horizontal:!0},c.a.createElement(bt.a,{as:"h4",inverted:!0},"Results")),k>0&&c.a.createElement(xa.a,{className:"search-list-pagination",defaultActivePage:1,firstItem:null,lastItem:null,pointing:!0,secondary:!0,totalPages:k,onPageChange:p}),c.a.createElement(xt.a,{divided:!0,relaxed:!0,inverted:!0,size:"tiny"},c.a.createElement(Ua,{tracks:n,onClick:u,onAdd:E}))),c.a.createElement(Ra.a.Pusher,{dimmed:t,onClick:t?a:null},e.children))};const Ba=e=>e.search,Fa=e=>e.curatedList;var Ya=e=>{const t=Object(o.c)(Ba),a=Object(o.c)(Fa),n=Object(o.b)(),r=(e={activePage:1})=>{const a={offset:(e.activePage-1)*t.limit,limit:t.limit};n(Ue(t.query,a))};return c.a.createElement(Ka,{visible:t.searchSideBarOpen,onClose:()=>n(Me(!1)),onSubmit:()=>r(),onSwapTracks:(e,t)=>{n(((e,t)=>({type:je,a:e,b:t}))(e,t))},onAddTrack:e=>{n(Ve([e])),n(q(e))},onAddTracks:e=>{n(G(e)),n({type:Pe})},onAddTrackToMix:e=>{a.tracks.length<5&&(n(Ve([e.uri])),n((e=>({type:Ae,track:e}))(e)))},onRemoveFromMix:e=>{n((e=>({type:_e,uri:e}))(e)),r()},onQueryChange:e=>n(Le(e.target.value)),onPageChange:(e,t)=>r(t),results:t.results,curatedList:a.tracks,totalPages:Math.round(t.total/t.limit),query:t.query},e.children)};a(710);var qa=e=>{const t=e.online,a=e.disabled,n=e.onPlay,r=e.onStop,l=e.onPause,s=e.onNext,o=e.onPrevious,i=e.onVolumeChange,m=e.onDrop,u=e.onTracklistClear,d=e.onSearchClick,E=e.tracklist,k=e.currentTrack,p=e.onRemoveTrack,b=e.onArtistSearch;return c.a.createElement(Et.a.Dimmable,{blurring:!0,dimmed:!t},c.a.createElement(_t,{disabled:a,onDrop:m},c.a.createElement(Ya,null,c.a.createElement(st.a,{className:"header-wrapper",fluid:!0},c.a.createElement(oa,null),c.a.createElement(ja,{disabled:a,onVolumeChange:i}),c.a.createElement(Na,{onClick:d,disabled:a}),c.a.createElement(Nt,{disabled:a,onPlay:n,onStop:r,onPause:l,onNext:s,onPrevious:o})),c.a.createElement(kt.a,null),c.a.createElement(st.a,{className:"body-wrapper",fluid:!0},c.a.createElement(pt.a,{stackable:!0,columns:2,className:"dashboard-grid"},c.a.createElement(pt.a.Column,{width:4},c.a.createElement(bt.a,{size:"small"},"Current Track"),c.a.createElement(sa,null)),c.a.createElement(pt.a.Column,{width:8},c.a.createElement(bt.a,{size:"small"},"Playlist ",c.a.createElement(Pa,{disabled:a,onClear:u})),c.a.createElement(fa,{disabled:a,tracks:E,currentTrack:k,onRemoveTrack:p,onArtistSearch:b})))))))};var Ga=Object(ot.DragDropContext)(mt.a)(()=>{const e=Object(o.c)(e=>e.jukebox),t=Object(o.c)(e=>e.tracklist),a=Object(o.c)(e=>e.track),n=Object(o.b)(),l=Object(r.useContext)(b),s=l.isSignedIn,i=l.googleUser,m=!(s&&e.mopidyOnline),u=Object(r.useRef)(),d=Object(r.useRef)();Object(r.useEffect)(()=>(n(Z()),()=>{n(te())}),[n]),s&&i.tokenId!==u.current&&(u.current=i.tokenId,d.current=dt.refresh(i,e=>{n(F(e))}),n(F(u.current))),s||(u.current=void 0,dt.clear(d.current),n(Y()));const E=Object(r.useCallback)(()=>n(me()),[n]),k=Object(r.useCallback)(()=>n(ue()),[n]),p=Object(r.useCallback)(()=>n(de()),[n]),C=Object(r.useCallback)(()=>n(Ee()),[n]),g=Object(r.useCallback)(()=>n(ke()),[n]),v=Object(r.useCallback)(e=>n(ge(e)),[n]),y=Object(r.useCallback)((e,t)=>{t&&n(q(t.getItem().urls[0]))},[n]),h=Object(r.useCallback)(()=>n(ie()),[n]),T=Object(r.useCallback)(()=>n(Me(!0)),[n]),O=Object(r.useCallback)(e=>n(Q(e)),[n]),f=Object(r.useCallback)(e=>t=>{const a={offset:0};n(Ue(e,a)),n(Le(e)),n(Me(!0))},[n]);return c.a.createElement(qa,{online:e.online,disabled:m,onPlay:E,onStop:k,onPause:p,onNext:C,onPrevious:g,onVolumeChange:v,onDrop:y,onTracklistClear:h,onSearchClick:T,tracklist:t,currentTrack:a,onRemoveTrack:O,onArtistSearch:f})});a(711);const Ha=Object(i.createStore)(lt,Object(m.composeWithDevTools)(Object(i.applyMiddleware)(Ge)));var Ja=()=>{const e=Object(E.useGoogleLogin)({clientId:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",hostedDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_CLIENT_ID:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",REACT_APP_WS_URL:"jukebox-api-prod.local",REACT_APP_WS_PORT:"8080"}).GOOGLE_AUTH_DOMAIN});return c.a.createElement(o.a,{store:Ha},c.a.createElement(d.a,null),c.a.createElement(st.a,{fluid:!0},c.a.createElement(b.Provider,{value:e},c.a.createElement(p,null,c.a.createElement(Ga,null)))))};a(712);s.a.render(c.a.createElement(Ja,null),document.getElementById("root"))}},[[385,1,2]]]);
//# sourceMappingURL=main.459acd69.chunk.js.map