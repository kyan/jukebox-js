{"version":3,"sources":["components/current-track/default-artwork.png","utils/spotify/index.js","components/error-boundary/index.js","contexts/google.js","constants/mopidy-api.js","constants/common.js","actions/index.js","votes/constants.js","search/constants.js","utils/time/index.js","search/actions/index.js","constants/auth-api.js","utils/payload/index.js","utils/notify/index.js","utils/on-message-handler/index.js","utils/state/index.js","containers/jukebox-middleware/index.js","reducers/track/index.js","reducers/tracklist/index.js","reducers/timer/index.js","reducers/jukebox/index.js","reducers/settings/index.js","search/reducers/index.js","reducers/index.js","utils/signin-token/index.js","components/skip-buttons/index.js","components/controls/index.js","components/url-drop-area/index.js","components/drag-in-track/index.js","components/added-by/index.js","components/voted-by/index.js","components/progress-bar/index.js","components/current-track/index.js","containers/current-track-container/index.js","votes/actions/index.js","components/settings/index.js","components/tracklist/index.js","search/components/button/index.js","components/volume-buttons/index.js","components/clear-playlist/index.js","search/components/sidebar/index.js","search/index.js","dashboard/index.js","containers/dashboard-container/index.js","App.js","index.js"],"names":["module","exports","transformUrl","url","uri","replace","match","ErrorBoundary","props","state","hasError","error","info","this","setState","children","React","Component","GoogleAuthContext","createContext","ADD_CURRENT_TRACK","ADD_TRACKS","CONNECT","CONNECTING","CONNECTED","DISCONNECT","DISCONNECTED","DROP_TYPES","SEND","STORE_TOKEN","CLEAR_STORE_TOKEN","UPDATE_VOLUME","UPDATE_PLAYBACK_STATE","UPDATE_PROGRESS_TIMER","MOPIDY_CONNECTED","MOPIDY_DISCONNECTED","SYNC_SOCIAL_DATA","updateToken","token","type","Types","clearToken","addNewTrack","key","MopidyApi","params","addCurrentTrack","track","syncSocialData","addTrackList","list","removeFromTracklist","updateProgressTimer","position","duration","Infinity","wsConnect","wsConnecting","wsConnected","wsDisconnect","wsDisconnected","mopidyConnected","mopidyDisconnected","getCurrentTrack","getTimePosition","getState","getTrackList","clearTrackList","startPlaying","stopPlaying","pausePlaying","nextPlaying","previousPlaying","getVolume","updateVolume","volume","updatePlaybackState","setVolume","Number","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","millisToSeconds","toggleSearchSidebar","open","Search","storeSearchQuery","query","search","options","Payload","decode","payload","JSON","parse","encodeToJson","jwt","data","stringify","Notify","success","message","notify","show","warning","store","dispatch","actions","onMessageHandler","progressTimer","AuthApi","console","progress","set","length","jukebox","playbackState","start","stop","playBackChanged","tracklist","name","album","artist","SearchConst","results","VoteConst","State","loadInitial","forEach","action","JukeboxMiddleware","process","socket","next","packMessage","settings","onMopidyStateChange","online","onOpen","_evt","ProgressTimer","callback","fallbackTargetFrameRate","disableRequestAnimationFrame","trackProgressTimer","onClose","onMessage","onSearchResults","onVote","Constants","close","io","transports","on","reset","emit","VoteConstant","Object","assign","addedBy","metrics","map","item","initalProgressState","remaining","timer","initalState","mopidyOnline","searchSideBarOpen","limit","offset","total","Constant","filter","tracks","items","jukeboxApp","combineReducers","SignInToken","refresh","googleApi","workerTimers","reloadAuthResponse","then","response","id_token","err","warn","clear","id","PreviousButton","Button","onClick","animated","className","disabled","Content","hidden","visible","Icon","NextButton","SkipButtons","onPrevious","onNext","PlayButton","active","PauseButton","StopButton","Controls","useSelector","onPlay","onPause","onStop","UrlDropArea","connectDropTarget","isOver","DropTarget","accepts","drop","monitor","onDrop","connect","dropTarget","DragInTrack","backend","HTML5Backend","addedByContent","users","List","i","fullName","user","fullname","Item","userPicture","Description","dateFormat","addedAt","picture","Image","avatar","src","AddedBy","Popup","wide","content","trigger","voteNormaliser","v","round","votedByContent","votes","voteScore","Label","circular","size","vote","at","voteLabel","basic","color","icon","normalisedTotal","ribbon","VotedBy","voteCount","ProgressBar","progressPercentage","percentage","isNaN","timerToPercentage","percent","marks","0","style","label","50","100","spotifyLink","code","split","pop","AlbumDescription","year","Card","calcVoteAverage","mean","flatten","voteHandleColor","TrackVotes","votesAverage","AddLabel","Detail","count","PlayLabel","plays","VoteLabel","CurrentTrack","userID","defaultImage","Header","currentUserVoter","find","u","_id","currentUserVote","image","Meta","extra","dots","value","included","step","onChange","rating","handleStyle","borderColor","backgroundColor","href","target","rel","CurrentTrackContainer","googleUser","useContext","useDispatch","googleId","Vote","voteActions","Settings","signIn","signOut","floated","title","profileObj","rounded","imageUrl","Fragment","TrackImage","klass","isCurrent","hasBeenPlayed","Comment","Avatar","ImageChooser","cb","undefined","TrackHeading","Author","TrackDescription","Text","as","artistName","trackLength","CurrentVote","Action","CurrentPlays","ListItems","beenPlayed","current","classnames","disable","onRemove","onArtistSearch","Actions","Tracklist","Group","currentTrack","onRemoveTrack","SearchButton","volumeUp","volumeDown","VolumeDownButton","VolumeUpButton","VolumeButtons","onVolumeChange","Or","text","ClearPlaylist","useState","setOpen","horizontal","Confirm","cancelButton","confirmButton","onCancel","onConfirm","ev","onClear","VoteInfo","SearchItem","explicit","SearchItems","onAddTrack","onSubmit","onQueryChange","totalPages","onPageChange","inputEl","useRef","Sidebar","Pushable","animation","inverted","vertical","width","direction","onShow","focus","Form","Field","required","ref","placeholder","fluid","Divider","Pagination","defaultActivePage","firstItem","lastItem","pointing","secondary","divided","relaxed","Pusher","dimmed","SearchContainer","searchActions","mopidyActions","onSearch","searchOptions","activePage","evt","_","Dashboard","onTracklistClear","onSearchClick","Dimmer","Dimmable","blurring","Container","Grid","stackable","columns","Column","DragDropContext","isSignedIn","googleTokenId","refreshTokenTimeoutID","useEffect","tokenId","useCallback","_item","getItem","urls","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","jukeboxMiddleware","App","googleAuth","useGoogleLogin","clientId","hostedDomain","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f62dc6bc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/default-artwork.6bba9800.png\";","// https://open.spotify.com/track/0c41pMosF5Kqwwegcps8ES\nconst transformUrl = (url) => {\n  const uri = url.replace(/^.*\\/track\\//, 'spotify:track:')\n  return (uri.match(/spotify:track/g) ? uri : null)\n}\n\nmodule.exports = {\n  transformUrl\n}\n","import React from 'react'\n\n// uses code from https://reactjs.org/blog/2017/07/26/error-handling-in-react-16.html\nclass ErrorBoundary extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  componentDidCatch (error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true })\n\n    // You can also log the error to an error reporting service\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`error: ${error}`)\n      console.log(`info: ${info}`)\n    }\n  }\n\n  render () {\n    if (this.state.hasError) {\n      return <h1>Ouch! I broke a bit.</h1>\n    }\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\n\nconst GoogleAuthContext = React.createContext()\n\nexport default GoogleAuthContext\n","export default {\n  PLAYBACK_GET_CURRENT_TRACK: 'playback.getCurrentTrack',\n  EVENT_TRACK_PLAYBACK_STARTED: 'event:trackPlaybackStarted',\n  EVENT_PLAYBACK_STATE_CHANGED: 'event:playbackStateChanged',\n  EVENT_PLAYBACK_STATE_RESUMED: 'event:trackPlaybackResumed',\n  TRACKLIST_GET_TRACKS: 'tracklist.getTracks',\n  TRACKLIST_ADD_TRACK: 'tracklist.add',\n  TRACKLIST_REMOVE_TRACK: 'tracklist.remove',\n  TRACKLIST_CLEAR: 'tracklist.clear',\n  PLAYBACK_GET_TIME_POSITION: 'playback.getTimePosition',\n  PLAYBACK_GET_PLAYBACK_STATE: 'playback.getState',\n  PLAYBACK_PLAY: 'playback.play',\n  PLAYBACK_STOP: 'playback.stop',\n  PLAYBACK_PAUSE: 'playback.pause',\n  PLAYBACK_NEXT: 'playback.next',\n  PLAYBACK_BACK: 'playback.previous',\n  PLAYING: 'playing',\n  PAUSED: 'paused',\n  STOPPED: 'stopped',\n  SET_VOLUME: 'mixer.setVolume',\n  GET_VOLUME: 'mixer.getVolume',\n  EVENT_VOLUME_CHANGED: 'event:volumeChanged',\n  VALIDATION_ERROR: 'validationError'\n}\n","export default {\n  ADD_CURRENT_TRACK: 'actionAddCurrentTrack',\n  ADD_TRACKS: 'actionAddTracks',\n  CONNECT: 'actionConnect',\n  CONNECTING: 'actionConnecting',\n  CONNECTED: 'actionConnected',\n  DISCONNECT: 'actionDisconnect',\n  DISCONNECTED: 'actionDisconnected',\n  DROP_TYPES: ['__NATIVE_URL__'],\n  SEND: 'actionSend',\n  STORE_TOKEN: 'actionStoreToken',\n  CLEAR_STORE_TOKEN: 'actionClearStoreToken',\n  UPDATE_VOLUME: 'actionUpdateVolume',\n  UPDATE_PLAYBACK_STATE: 'actionPlaybackState',\n  UPDATE_PROGRESS_TIMER: 'actionUpdateProgressTimer',\n  MOPIDY_CONNECTED: 'actionMopidyConnected',\n  MOPIDY_DISCONNECTED: 'actionMopidyDisconnected',\n  SYNC_SOCIAL_DATA: 'syncSocialData'\n}\n","import MopidyApi from 'constants/mopidy-api'\nimport Types from 'constants/common'\nimport { transformUrl } from 'utils/spotify'\n\nexport const updateToken = token => {\n  return {\n    type: Types.STORE_TOKEN,\n    token\n  }\n}\n\nexport const clearToken = () => {\n  return {\n    type: Types.CLEAR_STORE_TOKEN\n  }\n}\n\nexport const addNewTrack = url => {\n  let uri = transformUrl(url)\n\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_ADD_TRACK,\n    params: { 'uri': uri }\n  }\n}\n\nexport const addCurrentTrack = track => {\n  return {\n    type: Types.ADD_CURRENT_TRACK,\n    track\n  }\n}\n\nexport const syncSocialData = track => {\n  return {\n    type: Types.SYNC_SOCIAL_DATA,\n    track\n  }\n}\n\nexport const addTrackList = list => {\n  return {\n    type: Types.ADD_TRACKS,\n    list\n  }\n}\n\nexport const removeFromTracklist = uri => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_REMOVE_TRACK,\n    params: { 'uri': [uri] }\n  }\n}\n\nexport const updateProgressTimer = (position, duration) => {\n  if (duration === Infinity) { duration = 0 }\n\n  return {\n    type: Types.UPDATE_PROGRESS_TIMER,\n    position,\n    duration\n  }\n}\n\nexport const wsConnect = () => {\n  return {\n    type: Types.CONNECT\n  }\n}\n\nexport const wsConnecting = () => {\n  return {\n    type: Types.CONNECTING\n  }\n}\n\nexport const wsConnected = () => {\n  return {\n    type: Types.CONNECTED\n  }\n}\n\nexport const wsDisconnect = () => {\n  return {\n    type: Types.DISCONNECT\n  }\n}\n\nexport const wsDisconnected = () => {\n  return {\n    type: Types.DISCONNECTED\n  }\n}\n\nexport const mopidyConnected = () => {\n  return {\n    type: Types.MOPIDY_CONNECTED\n  }\n}\n\nexport const mopidyDisconnected = () => {\n  return {\n    type: Types.MOPIDY_DISCONNECTED\n  }\n}\n\nexport const getCurrentTrack = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_CURRENT_TRACK\n  }\n}\n\nexport const getTimePosition = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_TIME_POSITION\n  }\n}\n\nexport const getState = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_GET_PLAYBACK_STATE\n  }\n}\n\nexport const getTrackList = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_GET_TRACKS\n  }\n}\n\nexport const clearTrackList = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.TRACKLIST_CLEAR\n  }\n}\n\nexport const startPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_PLAY\n  }\n}\n\nexport const stopPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_STOP\n  }\n}\n\nexport const pausePlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_PAUSE\n  }\n}\n\nexport const nextPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_NEXT\n  }\n}\n\nexport const previousPlaying = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.PLAYBACK_BACK\n  }\n}\n\nexport const getVolume = () => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.GET_VOLUME\n  }\n}\n\nexport const updateVolume = (volume) => {\n  return {\n    type: Types.UPDATE_VOLUME,\n    volume\n  }\n}\n\nexport const updatePlaybackState = (state) => {\n  return {\n    type: Types.UPDATE_PLAYBACK_STATE,\n    state\n  }\n}\n\nexport const setVolume = (volume) => {\n  return {\n    type: Types.SEND,\n    key: MopidyApi.SET_VOLUME,\n    params: [Number(volume)]\n  }\n}\n","export default {\n  VOTE: 'actionVote',\n  CAST_VOTE: 'castVote',\n  VOTE_CASTED: 'voteCasted'\n}\n","export default {\n  SEARCH: 'actionTrackSearch',\n  SEARCH_GET_TRACKS: 'searchGetTracks',\n  STORE_SEARCH_RESULTS: 'actionStoreSearchResults',\n  STORE_SEARCH_QUERY: 'actionStoreSearchQuery',\n  TOGGLE_SEARCH_SIDEBAR: 'actionToggleSearchSidebar',\n  REMOVE_FROM_SEARCH_RESULTS: 'actionRemoveFromSearchResults'\n}\n","import ProgressTimer from 'media-progress-timer'\n\nexport const millisToMinutesAndSeconds = (millis) => {\n  let minutes = Math.floor(millis / 60000)\n  let seconds = ((millis % 60000) / 1000).toFixed(0)\n  return minutes + ':' + (seconds < 10 ? '0' : '') + seconds\n}\n\nexport const millisToSeconds = (millis) => {\n  return millis * 0.001\n}\n\nexport const timerToPercentage = timer => {\n  if (timer.duration === 0) { return 0 }\n  const position = millisToSeconds(timer.position)\n  const duration = millisToSeconds(timer.duration)\n  const percentage = Math.round((position / duration) * 100)\n\n  return isNaN(percentage) ? 0 : percentage\n}\n\nexport const trackProgressTimer = (store, actions) => {\n  return ProgressTimer({\n    callback: (position, duration) => {\n      store.dispatch(actions.updateProgressTimer(position, duration))\n    },\n    fallbackTargetFrameRate: 1,\n    disableRequestAnimationFrame: true\n  })\n}\n","import Search from 'search/constants'\n\nexport const toggleSearchSidebar = (open) => {\n  return {\n    type: Search.TOGGLE_SEARCH_SIDEBAR,\n    open\n  }\n}\n\nexport const storeSearchResults = (results) => {\n  return {\n    type: Search.STORE_SEARCH_RESULTS,\n    results\n  }\n}\n\nexport const storeSearchQuery = (query) => {\n  return {\n    type: Search.STORE_SEARCH_QUERY,\n    query\n  }\n}\n\nexport const search = (query, options) => {\n  return {\n    type: Search.SEARCH,\n    key: Search.SEARCH_GET_TRACKS,\n    params: { query, options }\n  }\n}\n\nexport const removeFromSearchResults = (uri) => {\n  return {\n    type: Search.REMOVE_FROM_SEARCH_RESULTS,\n    uri\n  }\n}\n","export default {\n  AUTHENTICATION_TOKEN_INVALID: 'authenticationTokenInvalid'\n}\n","const Payload = {\n  decode: payload => JSON.parse(payload),\n  encodeToJson: (jwt, key, data) => JSON.stringify({ jwt, key, data })\n}\n\nexport default Payload\n","import { notify } from 'react-notify-toast'\n\nconst Notify = {\n  success: (message) => notify.show(message, 'success', 3000, {}),\n  warning: (message) => notify.show(message, 'warning', 3000, {})\n}\n\nexport default Notify\n","import * as actions from 'actions'\nimport * as searchActions from 'search/actions'\nimport AuthApi from 'constants/auth-api'\nimport MopidyApi from 'constants/mopidy-api'\nimport SearchConst from 'search/constants'\nimport VoteConst from 'votes/constants'\nimport Payload from 'utils/payload'\nimport notify from 'utils/notify'\n\nconst updatePlaybackState = (store, state) => {\n  store.dispatch(actions.updatePlaybackState(state))\n}\n\nconst playBackChanged = (store, state, progress) => {\n  switch (state) {\n    case MopidyApi.PAUSED:\n    case MopidyApi.STOPPED:\n      updatePlaybackState(store, state)\n      progress.stop()\n      notify.success('Jukebox Halted')\n      break\n    case MopidyApi.PLAYING:\n      updatePlaybackState(store, state)\n      progress.start()\n      break\n    default:\n      break\n  }\n}\n\nconst addCurrentTrack = (track, store, progress) => {\n  store.dispatch(actions.addCurrentTrack(track))\n  store.dispatch(actions.syncSocialData(track))\n  const progressTimer = progress.set(0, track.length)\n  if (store.getState().jukebox.playbackState === MopidyApi.PLAYING) progressTimer.start()\n}\n\nconst addTrackList = (tracklist, store) => {\n  store.dispatch(actions.addTrackList(tracklist))\n}\n\nconst onMessageHandler = (store, payload, progressTimer) => {\n  const { key, data } = Payload.decode(payload)\n\n  switch (key) {\n    case AuthApi.AUTHENTICATION_TOKEN_INVALID:\n      console.error(`AUTHENTICATION_TOKEN_INVALID: ${data.error}`)\n      store.dispatch(actions.clearToken())\n      break\n    case MopidyApi.PLAYBACK_GET_CURRENT_TRACK:\n    case MopidyApi.EVENT_TRACK_PLAYBACK_STARTED:\n      if (data && data.track) addCurrentTrack(data.track, store, progressTimer)\n      break\n    case MopidyApi.EVENT_PLAYBACK_STATE_CHANGED:\n    case MopidyApi.PLAYBACK_GET_PLAYBACK_STATE:\n      playBackChanged(store, data, progressTimer)\n      break\n    case MopidyApi.TRACKLIST_GET_TRACKS:\n      addTrackList(data, store)\n      break\n    case MopidyApi.TRACKLIST_ADD_TRACK:\n      const track = data.track\n      notify.success(`Adding: ${track.name} / ${track.album.name} by ${track.artist.name}`)\n      break\n    case MopidyApi.PLAYBACK_NEXT:\n    case MopidyApi.PLAYBACK_BACK:\n      store.dispatch(actions.getCurrentTrack())\n      break\n    case MopidyApi.GET_VOLUME:\n      store.dispatch(actions.updateVolume(data))\n      break\n    case MopidyApi.EVENT_VOLUME_CHANGED:\n      store.dispatch(actions.updateVolume(data))\n      notify.success('Volume Changed')\n      break\n    case MopidyApi.PLAYBACK_GET_TIME_POSITION:\n      progressTimer.set(data)\n      break\n    case SearchConst.SEARCH_GET_TRACKS:\n      store.dispatch(searchActions.storeSearchResults(data))\n      break\n    case VoteConst.VOTE_CASTED:\n      if (data) {\n        store.dispatch(actions.syncSocialData(data))\n      }\n      break\n    case MopidyApi.VALIDATION_ERROR:\n      notify.warning(data)\n      break\n    case MopidyApi.EVENT_PLAYBACK_STATE_RESUMED:\n      progressTimer.set(data)\n      break\n    default:\n      break\n  }\n}\n\nexport default onMessageHandler\n","import * as actions from 'actions'\n\nconst State = {\n  loadInitial: (store) => {\n    [\n      'getCurrentTrack',\n      'getState',\n      'getTrackList',\n      'getVolume',\n      'getTimePosition'\n    ].forEach(action => {\n      store.dispatch(actions[action]())\n    })\n  }\n}\n\nexport default State\n","import io from 'socket.io-client'\nimport * as actions from 'actions'\nimport Constants from 'constants/common'\nimport VoteConstant from 'votes/constants'\nimport SearchConst from 'search/constants'\nimport { trackProgressTimer } from 'utils/time'\nimport onMessageHandler from 'utils/on-message-handler'\nimport Payload from 'utils/payload'\nimport State from 'utils/state'\n\nconst JukeboxMiddleware = (() => {\n  let url = `http://${process.env.REACT_APP_WS_URL}:${process.env.REACT_APP_WS_PORT}`\n  let socket = null\n  let progressTimer = null\n\n  return store => next => action => {\n    const getJWT = () => store.getState().settings.token\n    const packMessage = () => Payload.encodeToJson(getJWT(store), action.key, action.params)\n\n    const onMopidyStateChange = data => {\n      if (JSON.parse(data).online) {\n        store.dispatch(actions.mopidyConnected())\n        return State.loadInitial(store)\n      }\n      store.dispatch(actions.mopidyDisconnected())\n    }\n    const onOpen = _evt => {\n      progressTimer = trackProgressTimer(store, actions)\n      store.dispatch(actions.wsConnected())\n    }\n    const onClose = _evt => store.dispatch(actions.wsDisconnect())\n    const onMessage = data => onMessageHandler(store, data, progressTimer)\n    const onSearchResults = data => onMessageHandler(store, data, progressTimer)\n    const onVote = data => onMessageHandler(store, data, progressTimer)\n    const onConnect = () => {\n      if (socket != null) socket.close()\n      socket = io(url, { transports: ['websocket'] })\n      socket.on('vote', onVote)\n      socket.on('search', onSearchResults)\n      socket.on('mopidy', onMopidyStateChange)\n      socket.on('message', onMessage)\n      socket.on('connect', onOpen)\n      socket.on('disconnect', onClose)\n\n      store.dispatch(actions.wsConnecting())\n    }\n    const onDisconnect = () => {\n      if (progressTimer) { progressTimer.reset() }\n      store.dispatch(actions.wsDisconnected())\n    }\n\n    switch (action.type) {\n      case Constants.CONNECT:\n        return onConnect()\n      case Constants.DISCONNECT:\n        return onDisconnect()\n      case Constants.SEND:\n        return socket.emit('message', packMessage())\n      case SearchConst.SEARCH:\n        return socket.emit('search', packMessage())\n      case VoteConstant.VOTE:\n        return socket.emit('vote', packMessage())\n      default:\n        return next(action)\n    }\n  }\n})()\n\nexport default JukeboxMiddleware\n","import Types from 'constants/common'\n\nconst track = (state = null, action) => {\n  switch (action.type) {\n    case Types.ADD_CURRENT_TRACK:\n      return action.track\n    case Types.SYNC_SOCIAL_DATA:\n      return Object.assign({}, state, {\n        addedBy: action.track.addedBy,\n        metrics: action.track.metrics\n      })\n    default:\n      return state\n  }\n}\n\nexport default track\n","import Types from 'constants/common'\n\nconst tracklist = (state = [], action) => {\n  switch (action.type) {\n    case Types.ADD_TRACKS:\n      return action.list.map(item => item.track)\n    case Types.SYNC_SOCIAL_DATA:\n      return state.map(item => {\n        if (item.uri === action.track.uri) {\n          return Object.assign({}, item, {\n            addedBy: action.track.addedBy,\n            metrics: action.track.metrics\n          })\n        }\n\n        return item\n      })\n    default:\n      return state\n  }\n}\n\nexport default tracklist\n","import Types from 'constants/common'\n\nconst initalProgressState = {\n  position: 0,\n  duration: 0,\n  remaining: 0\n}\n\nconst timer = (state = initalProgressState, action) => {\n  switch (action.type) {\n    case Types.UPDATE_PROGRESS_TIMER:\n      return {\n        position: action.position,\n        duration: action.duration,\n        remaining: action.duration - action.position\n      }\n    default:\n      return state\n  }\n}\n\nexport default timer\n","import MopidyApi from 'constants/mopidy-api'\nimport Types from 'constants/common'\n\nconst initalState = {\n  online: false,\n  mopidyOnline: false,\n  volume: 0,\n  playbackState: MopidyApi.STOPPED\n}\n\nconst jukebox = (state = initalState, action) => {\n  switch (action.type) {\n    case Types.CONNECTED:\n      return Object.assign({}, state, {\n        online: true\n      })\n    case Types.DISCONNECTED:\n      return Object.assign({}, state, {\n        online: false\n      })\n    case Types.MOPIDY_CONNECTED:\n      return Object.assign({}, state, {\n        mopidyOnline: true\n      })\n    case Types.MOPIDY_DISCONNECTED:\n      return Object.assign({}, state, {\n        mopidyOnline: false\n      })\n    case Types.UPDATE_VOLUME:\n      return Object.assign({}, state, {\n        volume: action.volume\n      })\n    case Types.UPDATE_PLAYBACK_STATE:\n      return Object.assign({}, state, {\n        playbackState: action.state\n      })\n    default:\n      return state\n  }\n}\n\nexport default jukebox\n","import Types from 'constants/common'\n\nconst initalState = {\n  token: null\n}\n\nconst settings = (state = initalState, action) => {\n  switch (action.type) {\n    case Types.STORE_TOKEN:\n      if (action.token === state.token) return state\n      return Object.assign({}, state, {\n        token: action.token\n      })\n    case Types.CLEAR_STORE_TOKEN:\n      return Object.assign({}, state, {\n        token: null\n      })\n    default:\n      return state\n  }\n}\n\nexport default settings\n","import Constant from 'search/constants'\n\nconst initalState = {\n  searchSideBarOpen: false,\n  query: '',\n  limit: 20,\n  offset: 0,\n  total: 0,\n  results: []\n}\n\nconst search = (state = initalState, action) => {\n  switch (action.type) {\n    case Constant.REMOVE_FROM_SEARCH_RESULTS:\n      return {\n        ...state,\n        results: state.results.filter(item => {\n          return item.track.uri !== action.uri\n        })\n      }\n    case Constant.TOGGLE_SEARCH_SIDEBAR:\n      return Object.assign({}, state, {\n        searchSideBarOpen: action.open\n      })\n    case Constant.STORE_SEARCH_QUERY:\n      return Object.assign({}, state, {\n        query: action.query\n      })\n    case Constant.STORE_SEARCH_RESULTS:\n      const results = action.results.tracks\n      return Object.assign({}, state, {\n        limit: results.limit,\n        offset: results.offset,\n        total: results.total > 10000 ? 10000 : results.total,\n        results: results.items\n      })\n    default:\n      return state\n  }\n}\n\nexport default search\n","import { combineReducers } from 'redux'\nimport track from 'reducers/track'\nimport tracklist from 'reducers/tracklist'\nimport timer from 'reducers/timer'\nimport jukebox from 'reducers/jukebox'\nimport settings from 'reducers/settings'\nimport search from 'search/reducers'\n\nconst jukeboxApp = combineReducers({\n  track,\n  tracklist,\n  timer,\n  jukebox,\n  settings,\n  search\n})\n\nexport default jukeboxApp\n","import * as workerTimers from 'worker-timers'\n\nconst checkForTokenInMilliseconds = 2700000\n\nconst SignInToken = {\n  refresh: (googleApi, success) => {\n    return workerTimers.setTimeout(() => {\n      googleApi.reloadAuthResponse().then(\n        (response) => {\n          console.info('Token refreshed OK')\n          return success(response.id_token)\n        },\n        (err) => console.warn('Token un-refreshable: ', err.message))\n    }, checkForTokenInMilliseconds)\n  },\n  clear: (id) => { if (id) workerTimers.clearTimeout(id) }\n}\n\nexport default SignInToken\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst PreviousButton = (props) => (\n  <Button\n    onClick={props.onClick}\n    animated='vertical'\n    className='jb-previous-button'\n    disabled={props.disabled}\n  >\n    <Button.Content hidden>Prev</Button.Content>\n    <Button.Content visible>\n      <Icon name='step backward' />\n    </Button.Content>\n  </Button>\n)\n\nconst NextButton = (props) => (\n  <Button\n    onClick={props.onClick}\n    animated='vertical'\n    className='jb-next-button'\n    disabled={props.disabled}\n  >\n    <Button.Content hidden>Next</Button.Content>\n    <Button.Content visible>\n      <Icon name='step forward' />\n    </Button.Content>\n  </Button>\n)\n\nconst SkipButtons = ({ disabled, onPrevious, onNext }) => (\n  <>\n    <PreviousButton onClick={onPrevious} disabled={disabled} />\n    <NextButton onClick={onNext} disabled={disabled} />\n  </>\n)\n\nSkipButtons.propTypes = {\n  disabled: PropTypes.bool,\n  onPrevious: PropTypes.func.isRequired,\n  onNext: PropTypes.func.isRequired\n}\n\nexport default SkipButtons\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport SkipButtons from 'components/skip-buttons'\nimport MopidyApi from 'constants/mopidy-api'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst PlayButton = (props) => (\n  <Button\n    onClick={props.onClick}\n    animated='vertical'\n    disabled={(props.state === MopidyApi.PLAYING || props.disabled)}\n    active={(props.state === MopidyApi.PLAYING)}\n    className='jb-play-button'\n  >\n    <Button.Content hidden>Play</Button.Content>\n    <Button.Content visible>\n      <Icon name='play' />\n    </Button.Content>\n  </Button>\n)\n\nconst PauseButton = (props) => (\n  <Button\n    onClick={props.onClick}\n    animated='vertical'\n    disabled={(props.state === MopidyApi.PAUSED || props.state === MopidyApi.STOPPED || props.disabled)}\n    active={(props.state === MopidyApi.PAUSED)}\n    className='jb-pause-button'\n  >\n    <Button.Content hidden>Pause</Button.Content>\n    <Button.Content visible>\n      <Icon name='pause' />\n    </Button.Content>\n  </Button>\n)\n\nconst StopButton = (props) => (\n  <Button\n    onClick={props.onClick}\n    animated='vertical'\n    disabled={(props.state === MopidyApi.STOPPED || props.disabled)}\n    active={(props.state === MopidyApi.STOPPED)}\n    className='jb-stop-button'\n  >\n    <Button.Content hidden>Stop</Button.Content>\n    <Button.Content visible>\n      <Icon name='stop' />\n    </Button.Content>\n  </Button>\n)\n\nconst Controls = (props) => {\n  const jukebox = useSelector(state => state.jukebox)\n  const { disabled, onPlay, onPause, onStop, onPrevious, onNext } = props\n\n  return (\n    <span>\n      <SkipButtons\n        disabled={disabled}\n        onPrevious={onPrevious}\n        onNext={onNext}\n      />\n      <PlayButton\n        onClick={onPlay}\n        state={jukebox.playbackState}\n        disabled={disabled}\n      />\n      <PauseButton\n        onClick={onPause}\n        state={jukebox.playbackState}\n        disabled={disabled}\n      />\n      <StopButton\n        onClick={onStop}\n        state={jukebox.playbackState}\n        disabled={disabled}\n      />\n    </span>\n  )\n}\n\nControls.propTypes = {\n  disabled: PropTypes.bool,\n  onPlay: PropTypes.func.isRequired,\n  onPause: PropTypes.func.isRequired,\n  onStop: PropTypes.func.isRequired,\n  onPrevious: PropTypes.func.isRequired,\n  onNext: PropTypes.func.isRequired\n}\n\nexport default Controls\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { DropTarget } from 'react-dnd'\nimport './index.css'\n\nconst boxTarget = {\n  drop (props, monitor) {\n    if (props.onDrop) {\n      props.onDrop(props, monitor)\n    }\n  }\n}\n\nconst boxHandler = (connect, monitor) => {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver()\n  }\n}\n\nconst dropTrack = (show) => {\n  if (!show) return null\n  return <div className='drag-is-over'><p>Drop da track</p></div>\n}\n\nclass UrlDropArea extends Component {\n  render () {\n    const { connectDropTarget, isOver } = this.props\n\n    return connectDropTarget(\n      <div>\n        { dropTrack(isOver) }\n        { this.props.children }\n      </div>\n    )\n  }\n}\n\nUrlDropArea.propTypes = {\n  connectDropTarget: PropTypes.func.isRequired,\n  accepts: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onDrop: PropTypes.func\n}\n\nexport default DropTarget(props => props.accepts, boxTarget, boxHandler)(UrlDropArea)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContextProvider } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport Constants from 'constants/common'\nimport UrlDropArea from 'components/url-drop-area'\n\nconst DragInTrack = ({ disabled, onDrop, children }) => {\n  if (disabled) { return children }\n\n  return (\n    <DragDropContextProvider backend={HTML5Backend}>\n      <UrlDropArea accepts={Constants.DROP_TYPES} onDrop={onDrop}>\n        { children }\n      </UrlDropArea>\n    </DragDropContextProvider>\n  )\n}\n\nDragInTrack.propTypes = {\n  disabled: PropTypes.bool,\n  onDrop: PropTypes.func.isRequired\n}\n\nexport default DragInTrack\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { List, Popup, Icon, Image } from 'semantic-ui-react'\nimport dateFormat from 'dateformat'\nimport './index.css'\n\nconst addedByContent = (users) => (\n  <List className='added-by-list'>\n    {\n      users.map((data, i) => {\n        const fullName = data.user ? data.user.fullname : 'User unknown'\n\n        return (\n          <List.Item key={i}>\n            {userPicture(data)}\n            <List.Content>\n              <List.Description>\n                <strong>{dateFormat(data.addedAt, 'dd mmm yyyy @ h:MM tt')}</strong> - {fullName}\n              </List.Description>\n            </List.Content>\n          </List.Item>\n        )\n      })\n    }\n  </List>\n)\n\nconst userPicture = data => {\n  if (data && data.user && data.user.picture) return <Image avatar className='added_by_avatar_image' src={data.user.picture} />\n  return <Icon name='user' />\n}\n\nconst AddedBy = ({ users = [] }) => {\n  const avatar = userPicture(users[0])\n  if (!users.length) return avatar\n\n  return (\n    <Popup\n      wide\n      content={addedByContent(users)}\n      trigger={avatar}\n    />\n  )\n}\n\nAddedBy.propTypes = {\n  users: PropTypes.array\n}\n\nexport default AddedBy\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport dateFormat from 'dateformat'\nimport { List, Popup, Image, Label } from 'semantic-ui-react'\nimport './index.css'\n\nconst voteNormaliser = (v) => Math.round((v / 10) - 5) // 100 is max a user can vote per play\n\nconst votedByContent = (props) => (\n  <List>\n    {\n      props.votes.map((data, i) => {\n        const fullName = data.user ? data.user.fullname : 'User unknown'\n        const voteScore = <Label circular size='mini'>{voteNormaliser(data.vote)}</Label>\n\n        return (\n          <List.Item key={i}>\n            {userPicture(data)}\n            <List.Content>\n              <List.Description>\n                <strong>{dateFormat(data.at, 'dd mmm yyyy @ h:MM tt')}</strong> - {fullName} {voteScore}\n              </List.Description>\n            </List.Content>\n          </List.Item>\n        )\n      })\n    }\n  </List>\n)\n\nconst userPicture = data => {\n  if (data && data.user && data.user.picture) return <Image avatar className='voted_by_avatar_image' src={data.user.picture} />\n  return null\n}\n\nconst voteLabel = (props) => {\n  let basic = true\n  let color = 'grey'\n  let icon = 'thumbs up'\n  const normalisedTotal = voteNormaliser(props.total)\n\n  if (normalisedTotal < 0) icon = 'thumbs down'\n  if (normalisedTotal > 4) {\n    color = 'green'\n    basic = false\n  }\n  if (normalisedTotal < -4) {\n    color = 'red'\n    basic = false\n  }\n\n  return (\n    <Label\n      className='track-label vote-track-label'\n      size={props.size || 'tiny'}\n      color={color}\n      basic={basic}\n      icon={icon}\n      content={normalisedTotal}\n      ribbon={props.ribbon ? 'right' : null}\n    />\n  )\n}\n\nconst VotedBy = (props) => {\n  const voteCount = props.votes ? props.votes.length : 0\n  if (!props.show) return null\n  if (voteCount < 1) return voteLabel(props)\n\n  return (\n    <Popup\n      wide='very'\n      content={votedByContent(props)}\n      trigger={voteLabel(props)}\n    />\n  )\n}\n\nVotedBy.propTypes = {\n  show: PropTypes.bool,\n  ribbon: PropTypes.bool,\n  votes: PropTypes.array,\n  total: PropTypes.number,\n  size: PropTypes.string\n}\n\nexport default VotedBy\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Line } from 'rc-progress'\nimport { timerToPercentage, millisToMinutesAndSeconds } from 'utils/time'\n\nconst ProgressBar = () => {\n  const timer = useSelector(state => state.timer)\n  const track = useSelector(state => state.track)\n  const progressPercentage = timerToPercentage(timer)\n\n  return (\n    <div className='progress-container'>\n      <span className='remaining-text'>{millisToMinutesAndSeconds(timer.remaining)}</span>\n      <span className='track-length'>{millisToMinutesAndSeconds(track.length)}</span>\n      <Line percent={progressPercentage} />\n    </div>\n  )\n}\n\nexport default ProgressBar\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Card, Image, Label, Icon } from 'semantic-ui-react'\nimport Slider from 'rc-slider'\nimport AddedBy from 'components/added-by'\nimport VotedBy from 'components/voted-by'\nimport ProgressBar from 'components/progress-bar'\nimport defaultImage from './default-artwork.png'\nimport { flatten, mean } from 'lodash'\nimport 'rc-slider/assets/index.css'\nimport './index.css'\n\nconst marks = {\n  0: {\n    style: {\n      color: 'red'\n    },\n    label: <Icon name='thumbs down' color='red' />\n  },\n  50: <Icon name='handshake' />,\n  100: {\n    style: {\n      color: 'green'\n    },\n    label: <Icon name='thumbs up' color='green' />\n  }\n}\n\nconst spotifyLink = (uri) => {\n  const code = uri.split(':').pop()\n  return `https://open.spotify.com/track/${code}`\n}\n\nconst AlbumDescription = (props) => {\n  const year = ` (${props.album.year})`\n  return <Card.Description>{props.album.name}{year}</Card.Description>\n}\n\nconst noTrack = () => (\n  <Card>\n    <Image src={defaultImage} />\n    <Card.Content>\n      <Card.Header>Nothing playing</Card.Header>\n      <Card.Description>Drag some music here or press play.</Card.Description>\n    </Card.Content>\n  </Card>\n)\n\nconst calcVoteAverage = (data) => {\n  const votes = data.map(i => i.vote)\n  if (votes.length < 1) return 0\n  return mean(flatten(votes))\n}\n\nconst voteHandleColor = (total) => {\n  if (total > 50) return '#21ba45'\n  if (total < 50) return 'red'\n  return 'gray'\n}\n\nconst TrackVotes = (props) => {\n  if (!props.metrics) return null\n  return <VotedBy total={props.metrics.votesAverage} show={props.metrics.votes > 0} ribbon />\n}\n\nconst AddLabel = (props) => {\n  return (\n    <Label size='mini'>\n      Added\n      <Label.Detail>{props.count}</Label.Detail>\n    </Label>\n  )\n}\n\nconst PlayLabel = (props) => {\n  if (!props.metrics) return null\n\n  return (\n    <Label size='mini'>\n      Played\n      <Label.Detail>{props.metrics.plays}</Label.Detail>\n    </Label>\n  )\n}\n\nconst VoteLabel = (props) => {\n  if (!props.metrics) return null\n\n  return (\n    <Label size='mini'>\n      Activity\n      <Label.Detail>{props.metrics.votes}</Label.Detail>\n    </Label>\n  )\n}\n\nconst CurrentTrack = (props) => {\n  const { track, onVote, userID } = props\n  if (!track) { return noTrack() }\n  const maxRating = 10\n  const { addedBy = [] } = track\n  const votes = (addedBy[0] && addedBy[0].votes) || []\n  const currentUserVoter = votes.find(u => u.user._id === userID)\n  const currentUserVote = currentUserVoter ? (currentUserVoter.vote) : null\n  const doVote = (uri) => (rating) => onVote(uri, rating / maxRating)\n\n  return (\n    <Card>\n      <Image\n        src={track.image || defaultImage}\n        label={<TrackVotes metrics={track.metrics} />}\n      />\n      <Card.Content>\n        <ProgressBar />\n        <Card.Header>{track.name}</Card.Header>\n        <Card.Meta>{track.artist.name}</Card.Meta>\n        <AlbumDescription album={track.album} />\n      </Card.Content>\n      <Card.Content extra>\n        <div className='track-rating-container'>\n          <Slider\n            disabled={!userID}\n            dots\n            value={currentUserVote}\n            included={false}\n            marks={marks}\n            step={maxRating}\n            onChange={doVote(track.uri)}\n            handleStyle={{\n              borderColor: voteHandleColor(currentUserVote),\n              backgroundColor: voteHandleColor(currentUserVote)\n            }}\n          />\n        </div>\n      </Card.Content>\n      <Card.Content extra>\n        <AddLabel count={addedBy.length} />\n        <PlayLabel metrics={track.metrics} />\n        <VoteLabel metrics={track.metrics} />\n        <VotedBy size='mini' show={votes.length > 0} total={calcVoteAverage(votes)} votes={votes} />\n      </Card.Content>\n      <Card.Content extra>\n        <AddedBy users={track.addedBy} />\n        <a\n          className='track-uri'\n          href={spotifyLink(track.uri)}\n          target='_blank'\n          rel='noopener noreferrer'\n        >{track.uri}</a>\n      </Card.Content>\n    </Card>\n  )\n}\n\nCurrentTrack.propTypes = {\n  userID: PropTypes.string,\n  track: PropTypes.object,\n  onVote: PropTypes.func\n}\n\nexport default CurrentTrack\n","import React, { useContext } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport GoogleAuthContext from 'contexts/google'\nimport * as voteActions from 'votes/actions'\nimport CurrentTrack from 'components/current-track'\n\nexport const CurrentTrackContainer = () => {\n  const { googleUser } = useContext(GoogleAuthContext)\n  const track = useSelector(state => state.track)\n  const dispatch = useDispatch()\n\n  return (\n    <CurrentTrack\n      userID={googleUser && googleUser.googleId}\n      track={track}\n      onVote={(uri, rating) => dispatch(voteActions.vote(uri, rating))}\n    />\n  )\n}\n\nexport default CurrentTrackContainer\n","import Vote from 'votes/constants'\n\nexport const vote = (uri, vote) => {\n  return {\n    type: Vote.VOTE,\n    key: Vote.CAST_VOTE,\n    params: { uri, vote }\n  }\n}\n","import React, { useContext } from 'react'\nimport { Button, Image } from 'semantic-ui-react'\nimport GoogleAuthContext from 'contexts/google'\nimport './index.css'\n\nexport const Settings = () => {\n  const { googleUser, signIn, signOut } = useContext(GoogleAuthContext)\n\n  let avatar = (\n    <Button\n      icon='power off'\n      floated='right'\n      onClick={() => signIn()}\n      className='jb-settings-toggle'\n      title='Login using Google'\n    />\n  )\n  if (googleUser && googleUser.profileObj) {\n    avatar = (\n      <Image\n        rounded\n        size='mini'\n        floated='right'\n        title={googleUser.profileObj.name}\n        src={googleUser.profileObj.imageUrl}\n        onClick={() => signOut()}\n      />\n    )\n  }\n\n  return (\n    <React.Fragment>{avatar}</React.Fragment>\n  )\n}\n\nexport default Settings\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { Comment, Label, Item } from 'semantic-ui-react'\nimport { millisToMinutesAndSeconds } from 'utils/time'\nimport defaultImage from 'components/current-track/default-artwork.png'\nimport AddedBy from 'components/added-by'\nimport VotedBy from 'components/voted-by'\nimport './index.css'\n\nconst TrackImage = (props) => {\n  let klass, title\n\n  if (props.isCurrent) klass = 'current-image'\n  if (props.onClick && !props.isCurrent) {\n    title = 'Click to remove from playlist'\n    klass = `remove-image ${props.hasBeenPlayed ? 'small' : 'tiny'}`\n  }\n\n  return (\n    <Comment.Avatar\n      className={klass}\n      src={props.src}\n      title={title}\n      onClick={props.onClick}\n    />\n  )\n}\n\nconst ImageChooser = (props) => {\n  const removeTrack = (uri, cb) => () => cb(uri)\n  const image = props.image ? props.image : defaultImage\n  const onClick = (!props.disabled && !props.isCurrent) ? removeTrack(props.uri, props.onClick) : undefined\n\n  return (\n    <TrackImage\n      src={image}\n      isCurrent={props.isCurrent}\n      onClick={onClick}\n      hasBeenPlayed={props.hasBeenPlayed}\n    />\n  )\n}\n\nconst TrackHeading = (props) => (\n  <Comment.Author>{props.name}</Comment.Author>\n)\n\nconst TrackDescription = (props) => (\n  <Comment.Text>\n    <Item as='a' className='track-search-link' onClick={props.onClick}>\n      {props.artistName}\n    </Item> <small>({millisToMinutesAndSeconds(props.trackLength)})</small>\n  </Comment.Text>\n)\n\nconst CurrentVote = (props) => {\n  if (!props.metrics) return null\n  const show = props.metrics.votes > 0\n  if (!show) return null\n\n  return (\n    <Comment.Action as='span'>\n      <VotedBy total={props.metrics.votesAverage} show={show} />\n    </Comment.Action>\n  )\n}\n\nconst CurrentPlays = (props) => {\n  let basic = true\n  let color = 'grey'\n  if (!props.metrics) return null\n  if (props.metrics.plays > 0) {\n    basic = false\n    color = null\n  }\n\n  return (\n    <Comment.Action as='span'>\n      <Label\n        className='track-label'\n        size='tiny'\n        color={color}\n        basic={basic}\n      >Played <Label.Detail>{props.metrics.plays}</Label.Detail>\n      </Label>\n    </Comment.Action>\n  )\n}\n\nconst ListItems = (props) => {\n  let beenPlayed = false\n  const isCurrentTrack = (current, uri) => current && current.uri === uri\n\n  return props.tracks.map((track, i) => {\n    const { addedBy } = track\n    const isCurrent = isCurrentTrack(props.current, track.uri)\n    if (isCurrent) beenPlayed = beenPlayed || true\n\n    return (\n      <Comment\n        className={classnames({ 'current-track': isCurrent })}\n        key={`${i}${track.uri}`}\n      >\n        <ImageChooser\n          disable={props.disabled}\n          uri={track.uri}\n          image={track.image}\n          isCurrent={isCurrent}\n          onClick={props.onRemove}\n          hasBeenPlayed={beenPlayed}\n        />\n        <Comment.Content\n          className={classnames({ 'track-info': !beenPlayed })}\n        >\n          <TrackHeading\n            name={track.name}\n          />\n          <TrackDescription\n            artistName={track.artist.name}\n            trackLength={track.length}\n            onClick={props.onArtistSearch(track.artist.name)}\n          />\n          <Comment.Actions>\n            <CurrentVote metrics={track.metrics} />\n            <CurrentPlays metrics={track.metrics} />\n            <Comment.Action>\n              <AddedBy users={addedBy} />\n            </Comment.Action>\n          </Comment.Actions>\n        </Comment.Content>\n      </Comment>\n    )\n  })\n}\n\nconst Tracklist = (props) => {\n  if (!props.tracks) { return null }\n\n  return (\n    <Comment.Group size='small'>\n      <ListItems\n        disabled={props.disabled}\n        tracks={props.tracks}\n        current={props.currentTrack}\n        onRemove={props.onRemoveTrack}\n        onArtistSearch={props.onArtistSearch}\n      />\n    </Comment.Group>\n  )\n}\n\nTracklist.propTypes = {\n  disabled: PropTypes.bool,\n  tracks: PropTypes.array,\n  currentTrack: PropTypes.object,\n  onRemoveTrack: PropTypes.func.isRequired,\n  onArtistSearch: PropTypes.func.isRequired\n}\n\nexport default Tracklist\n","import React from 'react'\nimport { func, bool } from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst SearchButton = ({ onClick, disabled }) => (\n  <Button\n    animated='vertical'\n    floated='right'\n    onClick={onClick}\n    disabled={disabled}\n  >\n    <Button.Content hidden>Search</Button.Content>\n    <Button.Content visible>\n      <Icon name='search' />\n    </Button.Content>\n  </Button>\n)\n\nSearchButton.propTypes = {\n  onClick: func.isRequired,\n  disabled: bool.isRequired\n}\n\nexport default SearchButton\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\n\nconst VOLUME_INC = 5\nconst VOLUME_MAX = 100\nconst VOLUME_MIN = 0\n\nconst volumeUp = (volume, cb) => {\n  volume += VOLUME_INC\n  if (volume <= VOLUME_MAX) {\n    return () => {\n      cb(volume)\n    }\n  }\n}\n\nconst volumeDown = (volume, cb) => {\n  volume -= VOLUME_INC\n  if (volume >= VOLUME_MIN) {\n    return () => {\n      cb(volume)\n    }\n  }\n}\n\nconst VolumeDownButton = (props) => (\n  <Button\n    className='jb-volume-down'\n    onClick={volumeDown(props.volume, props.onChange)}\n    disabled={props.disabled}\n  >\n    <Icon name='volume down' />\n  </Button>\n)\n\nconst VolumeUpButton = (props) => (\n  <Button\n    className='jb-volume-up'\n    onClick={volumeUp(props.volume, props.onChange)}\n    disabled={props.disabled}\n  >\n    <Icon name='volume up' />\n  </Button>\n)\n\nconst VolumeButtons = ({ disabled, onVolumeChange }) => {\n  const jukebox = useSelector(state => state.jukebox)\n\n  return (\n    <Button.Group floated='right'>\n      <VolumeDownButton\n        volume={jukebox.volume}\n        onChange={onVolumeChange}\n        disabled={disabled}\n      />\n      <Button.Or text={jukebox.volume} />\n      <VolumeUpButton\n        volume={jukebox.volume}\n        onChange={onVolumeChange}\n        disabled={disabled}\n      />\n    </Button.Group>\n  )\n}\n\nVolumeButtons.propTypes = {\n  disabled: PropTypes.bool,\n  onVolumeChange: PropTypes.func.isRequired\n}\n\nexport default VolumeButtons\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Confirm, Label } from 'semantic-ui-react'\n\nconst ClearPlaylist = (props) => {\n  const [open, setOpen] = React.useState(false)\n  if (props.disabled) { return null }\n\n  const confirm = (ev) => {\n    props.onClear(ev)\n    setOpen(false)\n  }\n  const cancel = () => setOpen(false)\n  const show = () => setOpen(true)\n\n  return (\n    <>\n      <Label\n        horizontal\n        size='mini'\n        as='a'\n        color='red'\n        onClick={show}\n        className='jb-clear-button'\n      >CLEAR</Label>\n      <Confirm\n        content='Are you sure you want to nuke the playlist?'\n        cancelButton='No thanks'\n        confirmButton='Do it!'\n        open={open}\n        onCancel={cancel}\n        onConfirm={confirm}\n      />\n    </>\n  )\n}\n\nClearPlaylist.propTypes = {\n  disabled: PropTypes.bool,\n  onClear: PropTypes.func.isRequired\n}\n\nexport default ClearPlaylist\n","import React, { useRef } from 'react'\nimport classnames from 'classnames'\nimport { string, func, bool, array, number } from 'prop-types'\nimport VotedBy from 'components/voted-by'\nimport { Sidebar, Button, Form, List, Header, Divider, Image, Pagination } from 'semantic-ui-react'\nimport './index.css'\n\nconst VoteInfo = (props) => {\n  if (!props.metrics) return null\n  return <VotedBy size='mini' total={props.metrics.votesAverage} show={props.metrics.votes > 0} />\n}\n\nconst SearchItem = (props) => (\n  <div\n    className={classnames('search-list-item', { 'disabled': props.track.explicit })}\n    onClick={props.track.explicit ? undefined : props.onClick}\n  >\n    <Image\n      floated='left'\n      src={props.track.image}\n      size='tiny'\n      title={`Click to add - ${props.track.name} - ${props.track.artist.name}`}\n      className='search-list-item__image'\n      disabled={props.track.explicit}\n    />\n    <List.Content>\n      <div className='search-list-item__header'>{props.track.name} - {props.track.artist.name}</div>\n      <div className='search-list-item__content'>{props.track.album.name}</div>\n      <VoteInfo metrics={props.track.metrics} />\n    </List.Content>\n  </div>\n)\n\nconst SearchItems = (props) => (\n  props.tracks.map(item => (\n    <SearchItem\n      key={item.track.uri}\n      track={item.track}\n      onClick={() => props.onAddTrack(item.track.uri)}\n    />\n  ))\n)\n\nconst Search = (props) => {\n  const {\n    visible, onClose, results, onSubmit, query,\n    onQueryChange, onAddTrack, totalPages, onPageChange\n  } = props\n  const inputEl = useRef(null)\n\n  return (\n    <Sidebar.Pushable>\n      <Sidebar\n        animation='overlay'\n        icon='labeled'\n        inverted='true'\n        vertical='true'\n        visible={visible}\n        width='very wide'\n        direction='right'\n        className='sidebar-search'\n        onShow={() => inputEl.current.focus()}\n      >\n        <Form inverted onSubmit={onSubmit}>\n          <Form.Field>\n            <label required>SEARCH</label>\n            <input\n              ref={inputEl}\n              placeholder='track, artist or album'\n              onChange={onQueryChange}\n              value={query}\n            />\n          </Form.Field>\n          <Button type='submit' fluid>Submit</Button>\n        </Form>\n        <Divider horizontal>\n          <Header as='h4' inverted>Results</Header>\n        </Divider>\n        {(totalPages > 0) &&\n          <Pagination\n            className='search-list-pagination'\n            defaultActivePage={1}\n            firstItem={null}\n            lastItem={null}\n            pointing\n            secondary\n            totalPages={totalPages}\n            onPageChange={onPageChange}\n          />\n        }\n        <List divided relaxed inverted size='tiny'>\n          <SearchItems tracks={results} onAddTrack={onAddTrack} />\n        </List>\n      </Sidebar>\n      <Sidebar.Pusher\n        dimmed={visible}\n        onClick={visible ? onClose : null}\n      >\n        { props.children }\n      </Sidebar.Pusher>\n    </Sidebar.Pushable >\n  )\n}\n\nSearch.propTypes = {\n  onClose: func.isRequired,\n  onSubmit: func.isRequired,\n  onQueryChange: func.isRequired,\n  onAddTrack: func.isRequired,\n  onPageChange: func.isRequired,\n  visible: bool.isRequired,\n  results: array.isRequired,\n  totalPages: number.isRequired,\n  query: string\n}\n\nexport default Search\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport * as mopidyActions from 'actions'\nimport * as searchActions from 'search/actions'\nimport SearchSidebar from 'search/components/sidebar'\n\nexport const SearchContainer = (props) => {\n  const search = useSelector(state => state.search)\n  const dispatch = useDispatch()\n\n  const onAddTrack = (uri) => {\n    dispatch(searchActions.removeFromSearchResults(uri))\n    dispatch(mopidyActions.addNewTrack(uri))\n  }\n\n  const onSearch = (params) => {\n    const searchOptions = {\n      offset: (params.activePage - 1) * search.limit,\n      limit: search.limit\n    }\n    dispatch(searchActions.search(search.query, searchOptions))\n  }\n\n  return (\n    <SearchSidebar\n      visible={search.searchSideBarOpen}\n      onClose={() => dispatch(searchActions.toggleSearchSidebar(false))}\n      onSubmit={() => onSearch({ activePage: 1 })}\n      onAddTrack={(uri) => onAddTrack(uri)}\n      onQueryChange={(evt) => dispatch(searchActions.storeSearchQuery(evt.target.value))}\n      onPageChange={(_, data) => onSearch(data)}\n      results={search.results}\n      totalPages={Math.round(search.total / search.limit)}\n      query={search.query}\n    >\n      { props.children }\n    </SearchSidebar>\n  )\n}\n\nexport default SearchContainer\n","import React from 'react'\nimport { Dimmer, Divider, Grid, Header, Container } from 'semantic-ui-react'\nimport Controls from 'components/controls'\nimport DragInTrack from 'components/drag-in-track'\nimport CurrentTrackContainer from 'containers/current-track-container'\nimport Settings from 'components/settings'\nimport TrackList from 'components/tracklist'\nimport SearchButton from 'search/components/button'\nimport VolumeButtons from 'components/volume-buttons'\nimport ClearPlaylist from 'components/clear-playlist'\nimport SearchContainer from 'search'\nimport './index.css'\n\nconst Dashboard = (props) => {\n  const {\n    online,\n    disabled,\n    onPlay,\n    onStop,\n    onPause,\n    onNext,\n    onPrevious,\n    onVolumeChange,\n    onDrop,\n    onTracklistClear,\n    onSearchClick,\n    tracklist,\n    currentTrack,\n    onRemoveTrack,\n    onArtistSearch\n  } = props\n\n  return (\n    <Dimmer.Dimmable\n      blurring\n      dimmed={!online}\n    >\n      <DragInTrack\n        disabled={disabled}\n        onDrop={onDrop}\n      >\n        <SearchContainer>\n          <Container className='header-wrapper' fluid>\n            <Settings />\n            <VolumeButtons\n              disabled={disabled}\n              onVolumeChange={onVolumeChange}\n            />\n            <SearchButton\n              onClick={onSearchClick}\n              disabled={disabled}\n            />\n            <Controls\n              disabled={disabled}\n              onPlay={onPlay}\n              onStop={onStop}\n              onPause={onPause}\n              onNext={onNext}\n              onPrevious={onPrevious}\n            />\n          </Container>\n          <Divider />\n          <Container className='body-wrapper' fluid>\n            <Grid stackable columns={2} className='dashboard-grid'>\n              <Grid.Column width={4}>\n                <Header size='small'>Current Track</Header>\n                <CurrentTrackContainer />\n              </Grid.Column>\n              <Grid.Column width={8}>\n                <Header size='small'>\n                  Playlist <ClearPlaylist disabled={disabled} onClear={onTracklistClear} />\n                </Header>\n                <TrackList\n                  disabled={disabled}\n                  tracks={tracklist}\n                  currentTrack={currentTrack}\n                  onRemoveTrack={onRemoveTrack}\n                  onArtistSearch={onArtistSearch}\n                />\n              </Grid.Column>\n            </Grid>\n          </Container>\n        </SearchContainer>\n      </DragInTrack>\n    </Dimmer.Dimmable>\n  )\n}\n\nexport default Dashboard\n","import React, { useCallback, useEffect, useContext, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { DragDropContext } from 'react-dnd'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport SignInToken from 'utils/signin-token'\nimport GoogleAuthContext from 'contexts/google'\nimport * as actions from 'actions'\nimport * as searchActions from 'search/actions'\nimport Dashboard from 'dashboard'\n\nexport const DashboardContainer = () => {\n  const jukebox = useSelector(state => state.jukebox)\n  const tracklist = useSelector(state => state.tracklist)\n  const currentTrack = useSelector(state => state.track)\n  const dispatch = useDispatch()\n  const { isSignedIn, googleUser } = useContext(GoogleAuthContext)\n  const disable = !(isSignedIn && jukebox.mopidyOnline)\n  const googleTokenId = useRef()\n  const refreshTokenTimeoutID = useRef()\n  const hasTokenChanged = (token) => token !== googleTokenId.current\n\n  useEffect(() => {\n    dispatch(actions.wsConnect())\n\n    /* istanbul ignore next */\n    return () => {\n      dispatch(actions.wsDisconnect())\n    }\n  }, [dispatch])\n\n  if (isSignedIn && hasTokenChanged(googleUser.tokenId)) {\n    googleTokenId.current = googleUser.tokenId\n    refreshTokenTimeoutID.current = SignInToken.refresh(googleUser, (token) => {\n      dispatch(actions.updateToken(token))\n    })\n    dispatch(actions.updateToken(googleTokenId.current))\n  }\n\n  if (!isSignedIn) {\n    googleTokenId.current = undefined\n    SignInToken.clear(refreshTokenTimeoutID.current)\n    dispatch(actions.clearToken())\n  }\n\n  const onPlay = useCallback(() => dispatch(actions.startPlaying()), [dispatch])\n  const onStop = useCallback(() => dispatch(actions.stopPlaying()), [dispatch])\n  const onPause = useCallback(() => dispatch(actions.pausePlaying()), [dispatch])\n  const onNext = useCallback(() => dispatch(actions.nextPlaying()), [dispatch])\n  const onPrevious = useCallback(() => dispatch(actions.previousPlaying()), [dispatch])\n  const onVolumeChange = useCallback((evt) => dispatch(actions.setVolume(evt)), [dispatch])\n  /* istanbul ignore next */\n  const onDrop = useCallback((_item, monitor) => {\n    if (monitor) {\n      dispatch(actions.addNewTrack(monitor.getItem().urls[0]))\n    }\n  }, [dispatch])\n  const onTracklistClear = useCallback(() => dispatch(actions.clearTrackList()), [dispatch])\n  const onSearchClick = useCallback(() => dispatch(searchActions.toggleSearchSidebar(true)), [dispatch])\n  const onRemoveTrack = useCallback((evt) => dispatch(actions.removeFromTracklist(evt)), [dispatch])\n  const onArtistSearch = useCallback((query) => _ => {\n    const searchOptions = { offset: 0 }\n    dispatch(searchActions.search(query, searchOptions))\n    dispatch(searchActions.storeSearchQuery(query, searchOptions))\n    dispatch(searchActions.toggleSearchSidebar(true))\n  }, [dispatch])\n\n  return (\n    <Dashboard\n      online={jukebox.online}\n      disabled={disable}\n      onPlay={onPlay}\n      onStop={onStop}\n      onPause={onPause}\n      onNext={onNext}\n      onPrevious={onPrevious}\n      onVolumeChange={onVolumeChange}\n      onDrop={onDrop}\n      onTracklistClear={onTracklistClear}\n      onSearchClick={onSearchClick}\n      tracklist={tracklist}\n      currentTrack={currentTrack}\n      onRemoveTrack={onRemoveTrack}\n      onArtistSearch={onArtistSearch}\n    />\n  )\n}\n\nexport default DragDropContext(HTML5Backend)(DashboardContainer)\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport Notifications from 'react-notify-toast'\nimport { useGoogleLogin } from 'react-use-googlelogin'\nimport ErrorBoundary from 'components/error-boundary'\nimport GoogleAuthContext from 'contexts/google'\nimport jukeboxMiddleware from 'containers/jukebox-middleware'\nimport jukeboxApp from 'reducers'\nimport { Container } from 'semantic-ui-react'\nimport DashboardContainer from 'containers/dashboard-container'\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(jukeboxApp, composeEnhancers(applyMiddleware(jukeboxMiddleware)))\n\nconst App = () => {\n  const googleAuth = useGoogleLogin({\n    clientId: process.env.REACT_APP_CLIENT_ID,\n    hostedDomain: 'kyanmedia.com'\n  })\n\n  return (\n    <Provider store={store}>\n      <Container fluid>\n        <GoogleAuthContext.Provider value={googleAuth}>\n          <ErrorBoundary>\n            <Notifications />\n            <DashboardContainer />\n          </ErrorBoundary>\n        </GoogleAuthContext.Provider>\n      </Container>\n    </Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}