(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{294:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},334:function(e,t,n){e.exports=n(610)},381:function(e,t){},519:function(e,t,n){},520:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},587:function(e,t,n){},608:function(e,t,n){},609:function(e,t,n){},610:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateToken",(function(){return F})),n.d(a,"clearToken",(function(){return G})),n.d(a,"addNewTrack",(function(){return J})),n.d(a,"addCurrentTrack",(function(){return H})),n.d(a,"syncSocialData",(function(){return Q})),n.d(a,"addTrackList",(function(){return X})),n.d(a,"removeFromTracklist",(function(){return Z})),n.d(a,"updateProgressTimer",(function(){return W})),n.d(a,"wsConnect",(function(){return $})),n.d(a,"wsConnecting",(function(){return ee})),n.d(a,"wsConnected",(function(){return te})),n.d(a,"wsDisconnect",(function(){return ne})),n.d(a,"wsDisconnected",(function(){return ae})),n.d(a,"mopidyConnected",(function(){return re})),n.d(a,"mopidyDisconnected",(function(){return ce})),n.d(a,"getCurrentTrack",(function(){return ie})),n.d(a,"getTimePosition",(function(){return oe})),n.d(a,"getState",(function(){return ue})),n.d(a,"getTrackList",(function(){return le})),n.d(a,"clearTrackList",(function(){return se})),n.d(a,"startPlaying",(function(){return me})),n.d(a,"stopPlaying",(function(){return de})),n.d(a,"pausePlaying",(function(){return fe})),n.d(a,"nextPlaying",(function(){return Ee})),n.d(a,"previousPlaying",(function(){return pe})),n.d(a,"getVolume",(function(){return be})),n.d(a,"updateVolume",(function(){return ke})),n.d(a,"updatePlaybackState",(function(){return ge})),n.d(a,"setVolume",(function(){return Ce}));var r=n(0),c=n.n(r),i=n(35),o=n.n(i),u=n(20),l=n(40),s=n(89),m=n.n(s),d=n(292),f=n(128),E=n(129),p=n(138),b=n(130),k=n(140),g=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1},n}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),C=c.a.createContext(),y=n(293),v=n.n(y),h="playback.getCurrentTrack",O="event:trackPlaybackStarted",N="event:playbackStateChanged",T="tracklist.getTracks",S="tracklist.add",D="tracklist.remove",j="tracklist.clear",P="playback.getTimePosition",_="playback.getState",A="playback.play",R="playback.stop",w="playback.pause",I="playback.next",x="playback.previous",U="playing",L="paused",M="stopped",V="mixer.setVolume",B="mixer.getVolume",K="event:volumeChanged",Y="validationError",z={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer",MOPIDY_CONNECTED:"actionMopidyConnected",MOPIDY_DISCONNECTED:"actionMopidyDisconnected",SYNC_SOCIAL_DATA:"syncSocialData"},q=n(294),F=function(e){return{type:z.STORE_TOKEN,token:e}},G=function(){return{type:z.CLEAR_STORE_TOKEN}},J=function(e){var t=Object(q.transformUrl)(e);return{type:z.SEND,key:S,params:{uri:t}}},H=function(e){return{type:z.ADD_CURRENT_TRACK,track:e}},Q=function(e){return{type:z.SYNC_SOCIAL_DATA,track:e}},X=function(e){return{type:z.ADD_TRACKS,list:e}},Z=function(e){return{type:z.SEND,key:D,params:{uri:[e]}}},W=function(e,t){return t===1/0&&(t=0),{type:z.UPDATE_PROGRESS_TIMER,position:e,duration:t}},$=function(){return{type:z.CONNECT}},ee=function(){return{type:z.CONNECTING}},te=function(){return{type:z.CONNECTED}},ne=function(){return{type:z.DISCONNECT}},ae=function(){return{type:z.DISCONNECTED}},re=function(){return{type:z.MOPIDY_CONNECTED}},ce=function(){return{type:z.MOPIDY_DISCONNECTED}},ie=function(){return{type:z.SEND,key:h}},oe=function(){return{type:z.SEND,key:P}},ue=function(){return{type:z.SEND,key:_}},le=function(){return{type:z.SEND,key:T}},se=function(){return{type:z.SEND,key:j}},me=function(){return{type:z.SEND,key:A}},de=function(){return{type:z.SEND,key:R}},fe=function(){return{type:z.SEND,key:w}},Ee=function(){return{type:z.SEND,key:I}},pe=function(){return{type:z.SEND,key:x}},be=function(){return{type:z.SEND,key:B}},ke=function(e){return{type:z.UPDATE_VOLUME,volume:e}},ge=function(e){return{type:z.UPDATE_PLAYBACK_STATE,state:e}},Ce=function(e){return{type:z.SEND,key:V,params:[Number(e)]}},ye="actionVote",ve="castVote",he="voteCasted",Oe="actionTrackSearch",Ne="searchGetTracks",Te="actionStoreSearchResults",Se="actionStoreSearchQuery",De="actionToggleSearchSidebar",je="actionRemoveFromSearchResults",Pe=n(295),_e=n.n(Pe),Ae=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},Re=function(e){return.001*e},we=function(e){return{type:De,open:e}},Ie=function(e){return{type:Se,query:e}},xe=function(e,t){return{type:Oe,key:Ne,params:{query:e,options:t}}},Ue="authenticationTokenInvalid",Le={decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify({jwt:e,key:t,data:n})}},Me={success:function(e){return s.notify.show(e,"success",3e3,{})},warning:function(e){return s.notify.show(e,"warning",3e3,{})}},Ve=function(e,t){e.dispatch(ge(t))},Be=function(e,t,n){var a=Le.decode(t),r=a.key,c=a.data;switch(r){case Ue:console.log("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(G());break;case h:case O:c&&c.track&&function(e,t,n){t.dispatch(H(e)),t.dispatch(Q(e));var a=n.set(0,e.length);t.getState().jukebox.playbackState===U&&a.start()}(c.track,e,n);break;case N:case _:!function(e,t,n){switch(t){case L:case M:Ve(e,t),n.stop(),Me.success("Jukebox Halted");break;case U:Ve(e,t),n.start()}}(e,c,n);break;case T:!function(e,t){t.dispatch(X(e))}(c,e);break;case S:var i=c.track;Me.success("Adding: ".concat(i.name," / ").concat(i.album.name," by ").concat(i.artist.name));break;case I:case x:e.dispatch(ie());break;case B:e.dispatch(ke(c));break;case K:e.dispatch(ke(c)),Me.success("Volume Changed");break;case P:n.set(c);break;case Ne:e.dispatch({type:Te,results:c});break;case he:c&&e.dispatch(Q(c));break;case Y:Me.warning(c);break;default:console.log("Unknown message: ".concat(r," body: ").concat(c))}},Ke={loadInitial:function(e){["getCurrentTrack","getTimePosition","getState","getTrackList","getVolume"].forEach((function(t){e.dispatch(a[t]())}))}},Ye=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null;return function(r){return function(c){return function(i){var o=function(){return Le.encodeToJson(r.getState().settings.token,i.key,i.params)},u=function(e){if(JSON.parse(e).online)return r.dispatch(re()),Ke.loadInitial(r);r.dispatch(ce())},l=function(e){n=function(e,t){return _e()({callback:function(n,a){e.dispatch(t.updateProgressTimer(n,a))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(r,a),r.dispatch(te())},s=function(e){return r.dispatch(ne())},m=function(e){return Be(r,e,n)},d=function(e){return Be(r,e,n)},f=function(e){return Be(r,e,n)};switch(i.type){case z.CONNECT:return null!=t&&t.close(),(t=v()(e,{transports:["websocket"]})).on("vote",f),t.on("search",d),t.on("mopidy",u),t.on("message",m),t.on("connect",l),t.on("disconnect",s),void r.dispatch(ee());case z.DISCONNECT:return n&&n.reset(),void r.dispatch(ae());case z.SEND:return t.emit("message",o());case Oe:return t.emit("search",o());case ye:return t.emit("vote",o());default:return c(i)}}}}}(),ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.ADD_CURRENT_TRACK:return t.track;case z.SYNC_SOCIAL_DATA:return Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics});default:return e}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.ADD_TRACKS:return t.list.map((function(e){return e.track}));case z.SYNC_SOCIAL_DATA:return e.map((function(e){return e.uri===t.track.uri?Object.assign({},e,{addedBy:t.track.addedBy,metrics:t.track.metrics}):e}));default:return e}},Fe={position:0,duration:0,remaining:0},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration,remaining:t.duration-t.position};default:return e}},Je={online:!1,mopidyOnline:!1,volume:0,playbackState:M},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.CONNECTED:return Object.assign({},e,{online:!0});case z.DISCONNECTED:return Object.assign({},e,{online:!1});case z.MOPIDY_CONNECTED:return Object.assign({},e,{mopidyOnline:!0});case z.MOPIDY_DISCONNECTED:return Object.assign({},e,{mopidyOnline:!1});case z.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case z.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Qe={token:null},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.STORE_TOKEN:return t.token===e.token?e:Object.assign({},e,{token:t.token});case z.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},Ze=n(296);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach((function(t){Object(Ze.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et={searchSideBarOpen:!1,query:"",limit:20,offset:0,total:0,results:[]},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return $e({},e,{results:e.results.filter((function(e){return e.track.uri!==t.uri}))});case De:return Object.assign({},e,{searchSideBarOpen:t.open});case Se:return Object.assign({},e,{query:t.query});case Te:var n=t.results.tracks;return Object.assign({},e,{limit:n.limit,offset:n.offset,total:n.total>1e4?1e4:n.total,results:n.items});default:return e}},nt=Object(l.combineReducers)({track:ze,tracklist:qe,timer:Ge,jukebox:He,settings:Xe,search:tt}),at=n(624),rt=n(71),ct=n(131),it=n.n(ct),ot=n(189),ut={refresh:function(e,t){return ot.b((function(){e.reloadAuthResponse().then((function(e){return t(e.id_token)}),(function(e){return console.warn("Token un-refreshable: ",e.message)}))}),27e5)},clear:function(e){e&&ot.a(e)}},lt=n(636),st=n(623),mt=n(638),dt=n(637),ft=n(634),Et=n(49),pt=function(e){return c.a.createElement(ft.a,{onClick:e.onClick,animated:"vertical",className:"jb-previous-button",disabled:e.disabled},c.a.createElement(ft.a.Content,{hidden:!0},"Prev"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"step backward"})))},bt=function(e){return c.a.createElement(ft.a,{onClick:e.onClick,animated:"vertical",className:"jb-next-button",disabled:e.disabled},c.a.createElement(ft.a.Content,{hidden:!0},"Next"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"step forward"})))},kt=function(e){var t=e.disabled,n=e.onPrevious,a=e.onNext;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pt,{onClick:n,disabled:t}),c.a.createElement(bt,{onClick:a,disabled:t}))},gt=function(e){return c.a.createElement(ft.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===U||e.disabled,active:e.state===U,className:"jb-play-button"},c.a.createElement(ft.a.Content,{hidden:!0},"Play"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"play"})))},Ct=function(e){return c.a.createElement(ft.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===L||e.state===M||e.disabled,active:e.state===L,className:"jb-pause-button"},c.a.createElement(ft.a.Content,{hidden:!0},"Pause"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"pause"})))},yt=function(e){return c.a.createElement(ft.a,{onClick:e.onClick,animated:"vertical",disabled:e.state===M||e.disabled,active:e.state===M,className:"jb-stop-button"},c.a.createElement(ft.a.Content,{hidden:!0},"Stop"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"stop"})))},vt=function(e){var t=Object(u.c)((function(e){return e.jukebox})),n=e.disabled,a=e.onPlay,r=e.onPause,i=e.onStop,o=e.onPrevious,l=e.onNext;return c.a.createElement("span",null,c.a.createElement(kt,{disabled:n,onPrevious:o,onNext:l}),c.a.createElement(gt,{onClick:a,state:t.playbackState,disabled:n}),c.a.createElement(Ct,{onClick:r,state:t.playbackState,disabled:n}),c.a.createElement(yt,{onClick:i,state:t.playbackState,disabled:n}))},ht=(n(519),function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,n=e.isOver;return t(c.a.createElement("div",null,n?c.a.createElement("div",{className:"drag-is-over"},c.a.createElement("p",null,"Drop da track")):null,this.props.children))}}]),t}(r.Component)),Ot=Object(rt.DropTarget)((function(e){return e.accepts}),{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))(ht),Nt=function(e){var t=e.disabled,n=e.onDrop,a=e.children;return t?a:c.a.createElement(rt.DragDropContextProvider,{backend:it.a},c.a.createElement(Ot,{accepts:z.DROP_TYPES,onDrop:n},a))},Tt=n(631),St=n(325),Dt=n(639),jt=n(139),Pt=n(323),_t=n(630),At=n(629),Rt=n(135),wt=n.n(Rt),It=(n(520),function(e){return c.a.createElement(_t.a,null,e.map((function(e,t){var n=e.user?e.user.fullname:"User unknown";return c.a.createElement(_t.a.Item,{key:t},xt(e),c.a.createElement(_t.a.Content,null,c.a.createElement(_t.a.Description,null,c.a.createElement("strong",null,wt()(e.addedAt,"dd mmm yyyy @ h:MM tt"))," - ",n)))})))}),xt=function(e){return e&&e.user&&e.user.picture?c.a.createElement(St.a,{avatar:!0,className:"added_by_avatar_image",src:e.user.picture}):c.a.createElement(Et.a,{name:"spotify",color:"green"})},Ut=function(e){var t=e.users,n=void 0===t?[]:t,a=xt(n[0]);return n.length?c.a.createElement(At.a,{wide:!0,content:It(n),trigger:a}):a},Lt=(n(537),function(e){return Math.round(e/10-5)}),Mt=function(e){return c.a.createElement(_t.a,null,e.map((function(e,t){var n=e.user?e.user.fullname:"User unknown",a=c.a.createElement(jt.a,{circular:!0,size:"mini"},Lt(e.vote));return c.a.createElement(_t.a.Item,{key:t},Vt(e),c.a.createElement(_t.a.Content,null,c.a.createElement(_t.a.Description,null,c.a.createElement("strong",null,wt()(e.at,"dd mmm yyyy @ h:MM tt"))," - ",n," ",a)))})))},Vt=function(e){return e&&e.user&&e.user.picture?c.a.createElement(St.a,{avatar:!0,className:"voted_by_avatar_image",src:e.user.picture}):null},Bt=function(e,t){var n="green",a="thumbs up",r=Lt(e);return r<0&&(a="thumbs down"),r<0&&(n="red"),c.a.createElement(jt.a,{className:"track-label vote-track-label",size:"tiny",color:n,icon:a,content:r,ribbon:t?"right":null})},Kt=function(e){var t=e.total,n=e.votes,a=e.ribbon,r=n?n.length:0;return t<1?null:r<1?Bt(t,a):c.a.createElement(At.a,{wide:"very",content:Mt(n),trigger:Bt(t,a)})},Yt=n(90),zt=n.n(Yt),qt=n(187),Ft=(n(538),function(e){var t=e.split(":").pop();return"https://open.spotify.com/track/".concat(t)}),Gt=function(e){var t=e.map((function(e){return e.vote}));return t.length<1?0:Object(qt.mean)(Object(qt.flatten)(t))},Jt=function(e){var t=e.track,n=e.progress,a=e.remaining,r=e.onVote,i=e.userID;if(!t)return c.a.createElement(Tt.a,null,c.a.createElement(St.a,{src:zt.a}),c.a.createElement(Tt.a.Content,null,c.a.createElement(Tt.a.Header,null,"Nothing playing"),c.a.createElement(Tt.a.Description,null,"Drag some music here or press play.")));var o,u=t.addedBy,l=void 0===u?[]:u,s=l[0]&&l[0].votes||[],m=t.metrics.plays,d=t.metrics.votesAverage,f=s.find((function(e){return e.user._id===i})),E=f?f.vote/10:0;return c.a.createElement(Tt.a,null,c.a.createElement(St.a,{src:t.image||zt.a,label:c.a.createElement(Kt,{total:d,ribbon:!0})}),c.a.createElement(Tt.a.Content,null,c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"remaining-text"},Ae(a)),c.a.createElement("span",{className:"track-length"},Ae(t.length)),c.a.createElement(Pt.a,{percent:n})),c.a.createElement(Tt.a.Header,null,t.name),c.a.createElement(Tt.a.Meta,null,t.artist.name),function(e){if(!e)return null;var t=e.year?" (".concat(e.year,")"):null;return c.a.createElement(Tt.a.Description,null,e.name,t)}(t.album)),c.a.createElement(Tt.a.Content,{className:"rating-container",extra:!0},c.a.createElement(Dt.a,{disabled:!i,maxRating:10,rating:E,onRate:(o=t.uri,function(e,t){return r(o,t.rating)})}),c.a.createElement(Kt,{total:Gt(s),votes:s})),c.a.createElement(Tt.a.Content,{extra:!0},c.a.createElement(jt.a,{size:"mini"},"Added",c.a.createElement(jt.a.Detail,null,l.length)),c.a.createElement(jt.a,{size:"mini"},"Played",c.a.createElement(jt.a.Detail,null,m))),c.a.createElement(Tt.a.Content,{extra:!0},c.a.createElement(Ut,{users:t.addedBy}),c.a.createElement("a",{className:"track-uri",href:Ft(t.uri),target:"_blank",rel:"noopener noreferrer"},t.uri)))},Ht=function(){var e=Object(r.useContext)(C).googleUser,t=Object(u.c)((function(e){return function(e){if(0===e.duration)return 0;var t=Re(e.position),n=Re(e.duration),a=Math.round(t/n*100);return isNaN(a)?0:a}(e.timer)})),n=Object(u.c)((function(e){return e.timer.remaining})),a=Object(u.c)((function(e){return e.track})),i=Object(u.b)();return c.a.createElement(Jt,{userID:e&&e.googleId,track:a,progress:t,remaining:n,onVote:function(e,t){return i(function(e,t){return{type:ye,key:ve,params:{uri:e,vote:t}}}(e,t))}})},Qt=(n(539),function(){var e=Object(r.useContext)(C),t=e.googleUser,n=e.signIn,a=e.signOut,i=c.a.createElement(ft.a,{icon:"power off",floated:"right",onClick:function(){return n()},className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(i=c.a.createElement(St.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:function(){return a()}})),c.a.createElement(c.a.Fragment,null,i)}),Xt=n(4),Zt=n.n(Xt),Wt=n(628),$t=(n(540),function(e){var t,n;return e.isCurrent&&(t="current-image"),e.onClick&&!e.isCurrent&&(n="Click to remove from playlist",t="remove-image"),c.a.createElement(St.a,{bordered:!0,className:t,size:e.hasBeenPlayed?"small":"tiny",src:e.src,title:n,onClick:e.onClick,inline:!0})}),en=function(e){var t,n,a=e.image?e.image:zt.a,r=e.disabled||e.isCurrent?void 0:(t=e.uri,n=e.onClick,function(){return n(t)});return c.a.createElement($t,{src:a,isCurrent:e.isCurrent,onClick:r,hasBeenPlayed:e.hasBeenPlayed})},tn=function(e){return c.a.createElement(_t.a.Header,{as:"h4"},e.name)},nn=function(e){return c.a.createElement(_t.a.Description,null,c.a.createElement(Wt.a,{as:"a",className:"track-search-link",onClick:e.onClick},e.artistName)," ",c.a.createElement("small",null,"(",Ae(e.trackLength),")"))},an=function(e){var t=!1;return e.tracks.map((function(n,a){var r,i,o=n.addedBy,u=(r=e.current,i=n.uri,r&&r.uri===i),l=n.metrics.votesAverage,s=n.metrics.plays;return u&&(t=t||!0),c.a.createElement(_t.a.Item,{className:Zt()({"current-track":u}),key:"".concat(a).concat(n.uri)},c.a.createElement(en,{disable:e.disabled,uri:n.uri,image:n.image,isCurrent:u,onClick:e.onRemove,hasBeenPlayed:t}),c.a.createElement(_t.a.Content,{className:Zt()({"track-info":!t})},c.a.createElement(tn,{name:n.name}),c.a.createElement(nn,{artistName:n.artist.name,trackLength:n.length,onClick:e.onArtistSearch(n.artist.name)}),c.a.createElement(Kt,{total:l}),c.a.createElement(jt.a,{className:"track-label",size:"tiny"},"Played",c.a.createElement(jt.a.Detail,null,s)),c.a.createElement(Ut,{users:o})))}))},rn=function(e){return e.tracks?c.a.createElement(_t.a,{relaxed:"very",divided:!0},c.a.createElement(an,{disabled:e.disabled,tracks:e.tracks,current:e.currentTrack,onRemove:e.onRemoveTrack,onArtistSearch:e.onArtistSearch})):null},cn=function(e){var t=e.onClick,n=e.disabled;return c.a.createElement(ft.a,{animated:"vertical",floated:"right",onClick:t,disabled:n},c.a.createElement(ft.a.Content,{hidden:!0},"Search"),c.a.createElement(ft.a.Content,{visible:!0},c.a.createElement(Et.a,{name:"search"})))},on=function(e,t){if((e+=2)<=100)return function(){t(e)}},un=function(e,t){if((e-=2)>=0)return function(){t(e)}},ln=function(e){return c.a.createElement(ft.a,{className:"jb-volume-down",onClick:un(e.volume,e.onChange),disabled:e.disabled},c.a.createElement(Et.a,{name:"volume down"}))},sn=function(e){return c.a.createElement(ft.a,{className:"jb-volume-up",onClick:on(e.volume,e.onChange),disabled:e.disabled},c.a.createElement(Et.a,{name:"volume up"}))},mn=function(e){var t=e.disabled,n=e.onVolumeChange,a=Object(u.c)((function(e){return e.jukebox}));return c.a.createElement(ft.a.Group,{floated:"right"},c.a.createElement(ln,{volume:a.volume,onChange:n,disabled:t}),c.a.createElement(ft.a.Or,{text:a.volume}),c.a.createElement(sn,{volume:a.volume,onChange:n,disabled:t}))},dn=n(324),fn=n(626),En=function(e){var t=c.a.useState(!1),n=Object(dn.a)(t,2),a=n[0],r=n[1];if(e.disabled)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(jt.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:function(){return r(!0)},className:"jb-clear-button"},"CLEAR"),c.a.createElement(fn.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:a,onCancel:function(){return r(!1)},onConfirm:function(t){e.onClear(t),r(!1)}}))},pn=n(635),bn=n(625),kn=n(632),gn=(n(587),function(e){return c.a.createElement("div",{className:Zt()("search-list-item",{disabled:e.track.explicit}),onClick:e.track.explicit?void 0:e.onClick},c.a.createElement(St.a,{floated:"left",src:e.track.image,size:"mini",title:"Click to add - ".concat(e.track.name," - ").concat(e.track.artist.name),className:"search-list-item__image",disabled:e.track.explicit}),c.a.createElement(_t.a.Content,null,c.a.createElement("div",{className:"search-list-item__header"},e.track.name," - ",e.track.artist.name),c.a.createElement("div",{className:"search-list-item__content"},e.track.album.name)))}),Cn=function(e){return e.tracks.map((function(t){return c.a.createElement(gn,{key:t.track.uri,track:t.track,onClick:function(){return e.onAddTrack(t.track.uri)}})}))},yn=function(e){var t=e.visible,n=e.onClose,a=e.results,i=e.onSubmit,o=e.query,u=e.onQueryChange,l=e.onAddTrack,s=e.totalPages,m=e.onPageChange,d=Object(r.useRef)(null);return c.a.createElement(pn.a.Pushable,null,c.a.createElement(pn.a,{animation:"overlay",icon:"labeled",inverted:"true",vertical:"true",visible:t,width:"very wide",direction:"right",className:"sidebar-search",onShow:function(){return d.current.focus()}},c.a.createElement(bn.a,{inverted:!0,onSubmit:i},c.a.createElement(bn.a.Field,null,c.a.createElement("label",{required:!0},"SEARCH"),c.a.createElement("input",{ref:d,placeholder:"track, artist or album",onChange:u,value:o})),c.a.createElement(ft.a,{type:"submit",fluid:!0},"Submit")),c.a.createElement(st.a,{horizontal:!0},c.a.createElement(dt.a,{as:"h4",inverted:!0},"Results")),s>0&&c.a.createElement(kn.a,{className:"search-list-pagination",defaultActivePage:1,firstItem:null,lastItem:null,pointing:!0,secondary:!0,totalPages:s,onPageChange:m}),c.a.createElement(_t.a,{divided:!0,relaxed:!0,inverted:!0,size:"tiny"},c.a.createElement(Cn,{tracks:a,onAddTrack:l}))),c.a.createElement(pn.a.Pusher,{dimmed:t,onClick:t?n:null},e.children))},vn=function(e){var t=Object(u.c)((function(e){return e.search})),n=Object(u.b)(),a=function(e){n(function(e){return{type:je,uri:e}}(e)),n(J(e))},r=function(e){var a={offset:(e.activePage-1)*t.limit,limit:t.limit};n(xe(t.query,a))};return c.a.createElement(yn,{visible:t.searchSideBarOpen,onClose:function(){return n(we(!1))},onSubmit:function(){return r({activePage:1})},onAddTrack:function(e){return a(e)},onQueryChange:function(e){return n(Ie(e.target.value))},onPageChange:function(e,t){return r(t)},results:t.results,totalPages:Math.round(t.total/t.limit),query:t.query},e.children)},hn=(n(608),function(e){var t=e.online,n=e.disabled,a=e.onPlay,r=e.onStop,i=e.onPause,o=e.onNext,u=e.onPrevious,l=e.onVolumeChange,s=e.onDrop,m=e.onTracklistClear,d=e.onSearchClick,f=e.tracklist,E=e.currentTrack,p=e.onRemoveTrack,b=e.onArtistSearch;return c.a.createElement(lt.a.Dimmable,{blurring:!0,dimmed:!t},c.a.createElement(Nt,{disabled:n,onDrop:s},c.a.createElement(vn,null,c.a.createElement(at.a,{className:"header-wrapper",fluid:!0},c.a.createElement(Qt,null),c.a.createElement(mn,{disabled:n,onVolumeChange:l}),c.a.createElement(cn,{onClick:d,disabled:n}),c.a.createElement(vt,{disabled:n,onPlay:a,onStop:r,onPause:i,onNext:o,onPrevious:u})),c.a.createElement(st.a,null),c.a.createElement(at.a,{className:"body-wrapper",fluid:!0},c.a.createElement(mt.a,{stackable:!0,columns:2,className:"dashboard-grid"},c.a.createElement(mt.a.Column,{width:4},c.a.createElement(dt.a,{size:"small"},"Current Track"),c.a.createElement(Ht,null)),c.a.createElement(mt.a.Column,{width:8},c.a.createElement(dt.a,{size:"small"},"Playlist ",c.a.createElement(En,{disabled:n,onClear:m})),c.a.createElement(rn,{disabled:n,tracks:f,currentTrack:E,onRemoveTrack:p,onArtistSearch:b})))))))}),On=Object(rt.DragDropContext)(it.a)((function(){var e=Object(u.c)((function(e){return e.jukebox})),t=Object(u.c)((function(e){return e.tracklist})),n=Object(u.c)((function(e){return e.track})),a=Object(u.b)(),i=Object(r.useContext)(C),o=i.isSignedIn,l=i.googleUser,s=!(o&&e.mopidyOnline),m=Object(r.useRef)(),d=Object(r.useRef)();Object(r.useEffect)((function(){return a($()),function(){a(ne())}}),[a]),o&&l.Zi.id_token!==m.current&&(m.current=l.Zi.id_token,d.current=ut.refresh(l,(function(e){a(F(e))})),a(F(m.current))),o||(m.current=void 0,ut.clear(d.current),a(G()));var f=Object(r.useCallback)((function(){return a(me())}),[a]),E=Object(r.useCallback)((function(){return a(de())}),[a]),p=Object(r.useCallback)((function(){return a(fe())}),[a]),b=Object(r.useCallback)((function(){return a(Ee())}),[a]),k=Object(r.useCallback)((function(){return a(pe())}),[a]),g=Object(r.useCallback)((function(e){return a(Ce(e))}),[a]),y=Object(r.useCallback)((function(e,t){t&&a(J(t.getItem().urls[0]))}),[a]),v=Object(r.useCallback)((function(){return a(se())}),[a]),h=Object(r.useCallback)((function(){return a(we(!0))}),[a]),O=Object(r.useCallback)((function(e){return a(Z(e))}),[a]),N=Object(r.useCallback)((function(e){return function(t){var n={offset:0};a(xe(e,n)),a(Ie(e)),a(we(!0))}}),[a]);return c.a.createElement(hn,{online:e.online,disabled:s,onPlay:f,onStop:E,onPause:p,onNext:b,onPrevious:k,onVolumeChange:g,onDrop:y,onTracklistClear:v,onSearchClick:h,tracklist:t,currentTrack:n,onRemoveTrack:O,onArtistSearch:N})})),Nn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,Tn=Object(l.createStore)(nt,Nn(Object(l.applyMiddleware)(Ye))),Sn=function(){var e=Object(d.useGoogleLogin)({clientId:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(u.a,{store:Tn},c.a.createElement(at.a,{fluid:!0},c.a.createElement(C.Provider,{value:e},c.a.createElement(g,null,c.a.createElement(m.a,null),c.a.createElement(On,null)))))};n(609);o.a.render(c.a.createElement(Sn,null),document.getElementById("root"))},90:function(e,t,n){e.exports=n.p+"static/media/default-artwork.6bba9800.png"}},[[334,1,2]]]);
//# sourceMappingURL=main.42350aff.chunk.js.map