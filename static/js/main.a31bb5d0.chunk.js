(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){e.exports=n.p+"static/media/default-artwork.6bba9800.png"},299:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},330:function(e,t,n){e.exports=n(615)},370:function(e,t){},612:function(e,t,n){},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"updateToken",function(){return H}),n.d(a,"clearToken",function(){return Y}),n.d(a,"addNewTrack",function(){return W}),n.d(a,"addCurrentTrack",function(){return q}),n.d(a,"addTrackList",function(){return X}),n.d(a,"removeFromTracklist",function(){return Q}),n.d(a,"updateProgressTimer",function(){return Z}),n.d(a,"wsConnect",function(){return $}),n.d(a,"wsConnecting",function(){return ee}),n.d(a,"wsConnected",function(){return te}),n.d(a,"wsDisconnect",function(){return ne}),n.d(a,"wsDisconnected",function(){return ae}),n.d(a,"getCurrentTrack",function(){return re}),n.d(a,"getTimePosition",function(){return ce}),n.d(a,"getState",function(){return oe}),n.d(a,"getImage",function(){return ie}),n.d(a,"newImage",function(){return ue}),n.d(a,"resolveImage",function(){return le}),n.d(a,"getTrackList",function(){return se}),n.d(a,"clearTrackList",function(){return de}),n.d(a,"startPlaying",function(){return me}),n.d(a,"pausePlaying",function(){return fe}),n.d(a,"nextPlaying",function(){return pe}),n.d(a,"previousPlaying",function(){return Ee}),n.d(a,"getVolume",function(){return be}),n.d(a,"updateVolume",function(){return ke}),n.d(a,"updatePlaybackState",function(){return ye}),n.d(a,"setVolume",function(){return ge});var r=n(0),c=n.n(r),o=n(28),i=n.n(o),u=n(26),l=n(29),s=n(123),d=n.n(s),m=n(297),f=n(63),p=n(64),E=n(70),b=n(65),k=n(71),y=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),g=c.a.createContext(),h=n(298),C=n.n(h),v="mopidy::playback.getCurrentTrack",T="mopidy::event:trackPlaybackStarted",O="mopidy::event:playbackStateChanged",N="mopidy::event:tracklistChanged",D="mopidy::tracklist.getTracks",S="mopidy::tracklist.add",j="mopidy::tracklist.remove",_="mopidy::tracklist.clear",A="mopidy::library.getImages",P="mopidy::playback.getTimePosition",w="mopidy::playback.getState",R="mopidy::playback.play",I="mopidy::playback.pause",x="mopidy::playback.next",U="mopidy::playback.previous",L="playing",M="paused",V="stopped",K="mopidy::mixer.setVolume",G="mopidy::mixer.getVolume",z="mopidy::event:volumeChanged",B={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],NEW_IMAGE:"actionNewImage",RESOLVE_IMAGE:"actionResolveImage",SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer"},J=function(e){return s.notify.show(e,"success",3e3,{})},F=n(299),H=function(e){return{type:B.STORE_TOKEN,token:e}},Y=function(){return{type:B.CLEAR_STORE_TOKEN}},W=function(e){var t=Object(F.transformUrl)(e);return{type:B.SEND,key:S,params:{uri:t}}},q=function(e){return{type:B.ADD_CURRENT_TRACK,track:e}},X=function(e){return{type:B.ADD_TRACKS,list:e}},Q=function(e){return{type:B.SEND,key:j,params:{uri:[e]}}},Z=function(e,t){return t===1/0&&(t=0),{type:B.UPDATE_PROGRESS_TIMER,position:e,duration:t}},$=function(){return{type:B.CONNECT}},ee=function(){return{type:B.CONNECTING}},te=function(){return{type:B.CONNECTED}},ne=function(){return{type:B.DISCONNECT}},ae=function(){return{type:B.DISCONNECTED}},re=function(){return{type:B.SEND,key:v}},ce=function(){return{type:B.SEND,key:P}},oe=function(){return{type:B.SEND,key:w}},ie=function(e){return{type:B.SEND,key:A,params:[[e]],uri:e}},ue=function(e){return{type:B.NEW_IMAGE,uri:e}},le=function(e){return{type:B.RESOLVE_IMAGE,data:e}},se=function(){return{type:B.SEND,key:D}},de=function(){return{type:B.SEND,key:_}},me=function(){return J("Jukebox Playing"),{type:B.SEND,key:R}},fe=function(){return J("Jukebox Paused"),{type:B.SEND,key:I}},pe=function(){return{type:B.SEND,key:x}},Ee=function(){return{type:B.SEND,key:U}},be=function(){return{type:B.SEND,key:G}},ke=function(e){return{type:B.UPDATE_VOLUME,volume:e}},ye=function(e){return{type:B.UPDATE_PLAYBACK_STATE,state:e}},ge=function(e){return{type:B.SEND,key:K,params:[Number(e)]}},he=function(e,t){var n=t.findIndex(function(t){return t.ref===e});return t[n]?t[n].uri:null},Ce=n(300),ve=n.n(Ce),Te=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},Oe=function(e){return.001*e},Ne=function(e){if(0===e.duration)return 0;var t=Oe(e.position),n=Oe(e.duration);return Math.round(t/n*100)},De="auth::authenticationTokenInvalid",Se={encode:function(e,t,n){return{jwt:e,key:t,data:n}},decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify(Se.encode(e,t,n))}},je=Se,_e=function(e,t){e.dispatch(ye(t))},Ae=function(e){return e.composer?e.composer.uri:e.album.uri},Pe=function(e,t,n){var a=je.decode(t),r=a.key,c=a.data;switch(r){case De:console.log("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(Y());break;case v:case T:!function(e,t,n){e&&(t.dispatch(q(e)),n.set(0,e.length).start(),t.dispatch(ie(Ae(e))))}(c.track,e,n);break;case O:case w:!function(e,t,n){switch(t){case M:case V:_e(e,t),n.stop();break;case L:_e(e,t),n.start()}}(e,c,n);break;case N:e.dispatch(se());break;case D:!function(e,t){t.dispatch(X(e)),e.forEach(function(e){t.dispatch(ie(Ae(e.track)))})}(c,e);break;case G:case z:e.dispatch(ke(c));break;case A:e.dispatch(le(c));break;case P:n.set(c);break;default:console.log("Unknown message: ".concat(r," body: ").concat(c))}},we={loadInitial:function(e){["getCurrentTrack","getTimePosition","getState","getTrackList","getVolume"].forEach(function(t){e.dispatch(a[t]())})}},Re=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null,r=function(e,t){return function(t){n=function(e,t){return ve()({callback:function(n,a){e.dispatch(t.updateProgressTimer(n,a))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(e,a),e.dispatch(te()),we.loadInitial(e)}},c=function(a){null!=t&&t.close(),a.dispatch(ee()),(t=C()(e,{transports:["websocket"]})).on("message",function(e){return function(t){Pe(e,t,n)}}(a)),t.on("connect",r(a)),t.on("disconnect",function(e){return function(t){e.dispatch(ne())}}(a))};return function(e){return function(a){return function(r){switch(r.type){case B.CONNECT:c(e);break;case B.DISCONNECT:!function(e){n&&n.reset(),e.dispatch(ae())}(e);break;case B.SEND:if(r.key===A){if(!r.uri)break;if(he(r.uri,e.getState().assets))break;e.dispatch(ue(r.uri))}t.emit("message",je.encodeToJson(function(e){return e.getState().settings.token}(e),r.key,r.params));break;default:return a(r)}}}}}(),Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_CURRENT_TRACK:return t.track;default:return e}},xe=n(133),Ue=function(e,t){if(0!==e.length){var n=function(e,t){var n=new Set(e),a=new Set(t.map(function(e){return e.uri}));return new Set(Object(xe.a)(n).filter(function(e){return!a.has(e.uri)}))}(t,e);if(0!==n.size){var a=!0,r=!1,c=void 0;try{for(var o,i=n[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;J("Added ".concat(u.name," by ").concat(u.artist.name))}}catch(l){r=!0,c=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}}}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_TRACKS:return Ue(e,t.list.map(function(e){return e.track})),t.list.map(function(e){return e.track});default:return e}},Me=n(318),Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.NEW_IMAGE:return e.find(function(e){return e.ref===t.uri})?e:[].concat(Object(xe.a)(e),[{ref:t.uri}]);case B.RESOLVE_IMAGE:return e.map(function(e){return t.data[e.ref]&&t.data[e.ref][1]?Object(Me.a)({},e,{uri:t.data[e.ref][1].uri}):e}).slice(0,200);default:return e}},Ke={position:0,duration:0},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration};default:return e}},ze={online:!1,volume:0,playbackState:M},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.CONNECTED:return Object.assign({},e,{online:!0});case B.DISCONNECTED:return Object.assign({},e,{online:!1});case B.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case B.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Je={token:null},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.STORE_TOKEN:return Object.assign({},e,{token:t.token});case B.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},He=Object(l.combineReducers)({track:Ie,tracklist:Le,assets:Ve,timer:Ge,jukebox:Be,settings:Fe}),Ye=n(621),We=n(66),qe=n(124),Xe=n.n(qe),Qe=n(626),Ze=n(620),$e=n(628),et=n(627),tt=n(625),nt=n(36),at=function(e,t){if((e+=1)<=100)return function(){t(e)}},rt=function(e,t){if((e-=1)>=0)return function(){t(e)}},ct=function(e){var t=e.disabled,n=e.volume,a=e.onVolumeChange;return c.a.createElement(tt.a.Group,{floated:"right"},c.a.createElement(tt.a,{className:"jb-volume-down",onClick:rt(n,a),disabled:t},c.a.createElement(nt.a,{name:"volume down"})),c.a.createElement(tt.a.Or,{text:n}),c.a.createElement(tt.a,{className:"jb-volume-up",onClick:at(n,a),disabled:t},c.a.createElement(nt.a,{name:"volume up"})))},ot=n(134),it=n(622),ut=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.clearButton=function(){return c.a.createElement(ot.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:n.show,className:"jb-clear-button"},"CLEAR")},n.show=function(){n.setState({open:!0})},n.handleConfirm=function(e){n.setState({open:!1}),n.props.onClear(e)},n.handleCancel=function(){n.setState({open:!1})},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.disabled?null:c.a.createElement("span",null,this.clearButton(),c.a.createElement(it.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}]),t}(r.Component),lt=n(191),st=function(e){return e.assets},dt=Object(lt.a)([function(e){return e.track},st],function(e,t){return e?he(e.album.uri,t):null}),mt=Object(lt.a)([function(e){return e.tracklist},st],function(e,t){var n={};return e.forEach(function(e){n[e.album.uri]=he(e.album.uri,t)}),n}),ft=n(624),pt=n(319),Et=n(317),bt=n(132),kt=n.n(bt),yt=(n(612),function(e){return e||(e=kt.a),c.a.createElement(pt.a,{src:e})}),gt=function(e){var t,n=e.track,a=e.image,r=e.progress;return n?c.a.createElement(ft.a,null,yt(a),c.a.createElement(ft.a.Content,null,c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"progress-text"},r," %"),c.a.createElement(Et.a,{percent:r})),c.a.createElement(ft.a.Header,null,n.name),c.a.createElement(ft.a.Meta,null,"(",Te(n.length),") ",n.artist.name),function(e){if(!e)return null;var t=e.year?" (".concat(e.year,")"):null;return c.a.createElement(ft.a.Description,null,e.name,t)}(n.album),(t=n.composer)?c.a.createElement(ft.a.Description,null,t.name):null),c.a.createElement(ft.a.Content,{extra:!0},function(e){var t={spotify:"green"},n=e.split(":")[0];return t[n]?c.a.createElement(nt.a,{name:n,color:t[n]}):null}(n.uri))):c.a.createElement(ft.a,null,yt(null),c.a.createElement(ft.a.Content,null,c.a.createElement(ft.a.Header,null,"Nothing playing"),c.a.createElement(ft.a.Description,null,"Drag some music here or press play.")))},ht=Object(u.b)(function(e){return{track:e.track,image:dt(e),progress:Ne(e.timer)}})(function(e){var t=e.track,n=e.image,a=e.progress;return c.a.createElement(gt,{track:t,image:n,progress:a})}),Ct=function(){var e=Object(r.useContext)(g),t=e.googleUser,n=e.signIn,a=e.signOut,o=c.a.createElement(tt.a,{icon:"power off",floated:"right",onClick:function(){return n()},className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(o=c.a.createElement(pt.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:function(){return a()}})),c.a.createElement(c.a.Fragment,null,o)},vt=n(4),Tt=n.n(vt),Ot=n(623),Nt=n(316),Dt=n.n(Nt),St=(n(613),function(e){return c.a.createElement(pt.a,{className:"current-image",size:"tiny",src:e,inline:!0})}),jt=function(e,t){return function(){return t(e)}},_t=function(e,t,n,a,r){var o;return n&&t.album&&(o=n[t.album.uri]),n&&t.composer&&(o=n[t.composer.uri]),o||(o=kt.a),e?St(o):a?St(o):function(e,t,n){return c.a.createElement(pt.a,{className:"remove-image",size:"mini",src:e,inline:!0,onClick:jt(t,n)})}(o,t.uri,r)},At=function(e,t,n,a,r){var o;return t.map(function(t,i){var u=function(e,t){return!!e&&e.uri===t.uri}(a,t);return o&&(o+=t.length),u&&(o=Date.now()),c.a.createElement(Ot.a.Item,{className:Tt()({"current-track":u}),key:"".concat(i,"-").concat(t.uri)},_t(e,t,n,u,r),c.a.createElement(Ot.a.Content,{className:Tt()({"track-info":!o})},function(e,t){return!e||t?null:c.a.createElement(Ot.a.Header,{as:"h5"},Dt()(new Date(e),"h:MM"))}(o,u),function(e){return c.a.createElement(Ot.a.Header,{as:"h4"},e.name)}(t),function(e){return c.a.createElement(Ot.a.Description,null,e.artist.name," ",c.a.createElement("small",null,"(",Te(e.length),")"))}(t)))})},Pt=function(e){var t=e.disabled,n=e.tracks,a=e.images,r=e.currentTrack,o=e.onRemoveTrack;return n?c.a.createElement(Ot.a,{relaxed:!0},At(t,n,a,r,o)):null},wt=function(e){var t=e.disabled,n=e.onPrevious,a=e.onNext;return c.a.createElement("span",null,function(e,t){return c.a.createElement(tt.a,{onClick:e,animated:"vertical",className:"jb-previous-button",disabled:t},c.a.createElement(tt.a.Content,{hidden:!0},"Prev"),c.a.createElement(tt.a.Content,{visible:!0},c.a.createElement(nt.a,{name:"step backward"})))}(n,t),function(e,t){return c.a.createElement(tt.a,{onClick:e,animated:"vertical",className:"jb-next-button",disabled:t},c.a.createElement(tt.a.Content,{hidden:!0},"Next"),c.a.createElement(tt.a.Content,{visible:!0},c.a.createElement(nt.a,{name:"step forward"})))}(a,t))},Rt=function(e){var t=e.disabled,n=e.playbackState,a=e.onPlay,r=e.onPause,o=e.onPrevious,i=e.onNext;return c.a.createElement("span",null,c.a.createElement(wt,{disabled:t,onPrevious:o,onNext:i}),function(e,t,n){return c.a.createElement(tt.a,{onClick:e,animated:"vertical",disabled:t===L||n,active:t===L,className:"jb-play-button"},c.a.createElement(tt.a.Content,{hidden:!0},"Play"),c.a.createElement(tt.a.Content,{visible:!0},c.a.createElement(nt.a,{name:"play"})))}(a,n,t),function(e,t,n){return c.a.createElement(tt.a,{onClick:e,animated:"vertical",disabled:t===M||n,active:t===M,className:"jb-pause-button"},c.a.createElement(tt.a.Content,{hidden:!0},"Pause"),c.a.createElement(tt.a.Content,{visible:!0},c.a.createElement(nt.a,{name:"pause"})))}(r,n,t))},It=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(c.a.createElement("div",null,this.props.children))}}]),t}(r.Component),xt=Object(We.DropTarget)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget()}})(It),Ut=function(e){var t=e.disabled,n=e.onDrop,a=e.children;return t?a:c.a.createElement(We.DragDropContextProvider,{backend:Xe.a},c.a.createElement(xt,{accepts:B.DROP_TYPES,onDrop:n},a))},Lt=Object(We.DragDropContext)(Xe.a)(function(){var e=Object(u.d)(function(e){return e.jukebox}),t=Object(u.d)(function(e){return e.tracklist}),n=Object(u.d)(function(e){return e.track}),a=Object(u.d)(function(e){return mt(e)}),o=Object(u.c)(),i=Object(r.useContext)(g),l=i.isSignedIn,s=i.googleUser;return Object(r.useEffect)(function(){return o($()),function(){o(ne())}},[o]),o(l?H(s.tokenId):Y()),c.a.createElement(Qe.a.Dimmable,{blurring:!0,className:"jukebox-dashboard",dimmed:!e.online},c.a.createElement(Ct,null),c.a.createElement(ct,{disabled:!l,volume:e.volume,onVolumeChange:function(e){return o(ge(e))}}),c.a.createElement(Rt,{disabled:!l,playbackState:e.playbackState,onPlay:function(){return o(me())},onPause:function(){return o(fe())},onNext:function(){return o(pe())},onPrevious:function(){return o(Ee())}}),c.a.createElement(Ze.a,null),c.a.createElement($e.a,null,c.a.createElement($e.a.Column,{width:6},c.a.createElement(Ut,{disabled:!l,onDrop:function(e,t){t&&o(W(t.getItem().urls[0]))}},c.a.createElement(et.a,{size:"small"},"Current Track"),c.a.createElement(ht,null))),c.a.createElement($e.a.Column,{width:10},c.a.createElement(et.a,{size:"small"},"Playlist ",c.a.createElement(ut,{disabled:!l,onClear:function(){return o(de())}})),c.a.createElement(Pt,{disabled:!l,images:a,tracks:t,currentTrack:n,onRemoveTrack:function(e){return o(Q(e))}}))))}),Mt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,Vt=Object(l.createStore)(He,Mt(Object(l.applyMiddleware)(Re))),Kt=function(){var e=Object(m.useGoogleLogin)({clientId:"623778479904-ckd2bs0sjbuhqdl83egc07155rd0o8rr.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(u.a,{store:Vt},c.a.createElement(Ye.a,{fluid:!0},c.a.createElement(g.Provider,{value:e},c.a.createElement(y,null,c.a.createElement(d.a,null),c.a.createElement(Lt,null)))))};n(614);i.a.render(c.a.createElement(Kt,null),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.a31bb5d0.chunk.js.map