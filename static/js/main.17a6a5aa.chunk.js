(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{112:function(e,t,n){e.exports=n.p+"static/media/default-artwork.6bba9800.png"},256:function(e,t){e.exports={transformUrl:function(e){var t=e.replace(/^.*\/track\//,"spotify:track:");return t.match(/spotify:track/g)?t:null}}},285:function(e,t,n){e.exports=n(542)},332:function(e,t){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"updateToken",(function(){return F})),n.d(r,"clearToken",(function(){return H})),n.d(r,"addNewTrack",(function(){return Y})),n.d(r,"addCurrentTrack",(function(){return W})),n.d(r,"addTrackList",(function(){return q})),n.d(r,"removeFromTracklist",(function(){return X})),n.d(r,"updateProgressTimer",(function(){return Q})),n.d(r,"wsConnect",(function(){return Z})),n.d(r,"wsConnecting",(function(){return $})),n.d(r,"wsConnected",(function(){return ee})),n.d(r,"wsDisconnect",(function(){return te})),n.d(r,"wsDisconnected",(function(){return ne})),n.d(r,"getCurrentTrack",(function(){return re})),n.d(r,"getTimePosition",(function(){return ae})),n.d(r,"getState",(function(){return ce})),n.d(r,"getImage",(function(){return oe})),n.d(r,"newImage",(function(){return ie})),n.d(r,"resolveImage",(function(){return ue})),n.d(r,"getTrackList",(function(){return le})),n.d(r,"clearTrackList",(function(){return se})),n.d(r,"startPlaying",(function(){return me})),n.d(r,"stopPlaying",(function(){return de})),n.d(r,"nextPlaying",(function(){return fe})),n.d(r,"previousPlaying",(function(){return pe})),n.d(r,"getVolume",(function(){return Ee})),n.d(r,"updateVolume",(function(){return be})),n.d(r,"updatePlaybackState",(function(){return ke})),n.d(r,"setVolume",(function(){return ge}));var a=n(0),c=n.n(a),o=n(24),i=n.n(o),u=n(26),l=n(29),s=n(105),m=n.n(s),d=n(254),f=n(55),p=n(56),E=n(61),b=n(57),k=n(62),g=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(E.a)(this,Object(b.a)(t).call(this,e))).state={hasError:!1},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Ouch! I broke a bit."):this.props.children}}]),t}(c.a.Component),y=c.a.createContext(),h=n(255),C=n.n(h),v="mopidy::playback.getCurrentTrack",O="mopidy::event:trackPlaybackStarted",T="mopidy::event:playbackStateChanged",N="mopidy::tracklist.getTracks",D="mopidy::tracklist.add",S="mopidy::tracklist.remove",j="mopidy::tracklist.clear",P="mopidy::library.getImages",_="mopidy::playback.getTimePosition",A="mopidy::playback.getState",w="mopidy::playback.play",R="mopidy::playback.stop",I="mopidy::playback.next",x="mopidy::playback.previous",U="playing",L="paused",V="stopped",M="mopidy::mixer.setVolume",K="mopidy::mixer.getVolume",G="mopidy::event:volumeChanged",B={ADD_CURRENT_TRACK:"actionAddCurrentTrack",ADD_TRACKS:"actionAddTracks",CONNECT:"actionConnect",CONNECTING:"actionConnecting",CONNECTED:"actionConnected",DISCONNECT:"actionDisconnect",DISCONNECTED:"actionDisconnected",DROP_TYPES:["__NATIVE_URL__"],NEW_IMAGE:"actionNewImage",RESOLVE_IMAGE:"actionResolveImage",SEND:"actionSend",STORE_TOKEN:"actionStoreToken",CLEAR_STORE_TOKEN:"actionClearStoreToken",UPDATE_VOLUME:"actionUpdateVolume",UPDATE_PLAYBACK_STATE:"actionPlaybackState",UPDATE_PROGRESS_TIMER:"actionUpdateProgressTimer"},J=function(e){return s.notify.show(e,"success",3e3,{})},z=n(256),F=function(e){return{type:B.STORE_TOKEN,token:e}},H=function(){return{type:B.CLEAR_STORE_TOKEN}},Y=function(e){var t=Object(z.transformUrl)(e);return{type:B.SEND,key:D,params:{uri:t}}},W=function(e){return{type:B.ADD_CURRENT_TRACK,track:e}},q=function(e){return{type:B.ADD_TRACKS,list:e}},X=function(e){return{type:B.SEND,key:S,params:{uri:[e]}}},Q=function(e,t){return t===1/0&&(t=0),{type:B.UPDATE_PROGRESS_TIMER,position:e,duration:t}},Z=function(){return{type:B.CONNECT}},$=function(){return{type:B.CONNECTING}},ee=function(){return{type:B.CONNECTED}},te=function(){return{type:B.DISCONNECT}},ne=function(){return{type:B.DISCONNECTED}},re=function(){return{type:B.SEND,key:v}},ae=function(){return{type:B.SEND,key:_}},ce=function(){return{type:B.SEND,key:A}},oe=function(e){return{type:B.SEND,key:P,params:[[e]],uri:e}},ie=function(e){return{type:B.NEW_IMAGE,uri:e}},ue=function(e){return{type:B.RESOLVE_IMAGE,data:e}},le=function(){return{type:B.SEND,key:N}},se=function(){return{type:B.SEND,key:j}},me=function(){return J("Jukebox Playing"),{type:B.SEND,key:w}},de=function(){return J("Jukebox Halted"),{type:B.SEND,key:R}},fe=function(){return{type:B.SEND,key:I}},pe=function(){return{type:B.SEND,key:x}},Ee=function(){return{type:B.SEND,key:K}},be=function(e){return{type:B.UPDATE_VOLUME,volume:e}},ke=function(e){return{type:B.UPDATE_PLAYBACK_STATE,state:e}},ge=function(e){return{type:B.SEND,key:M,params:[Number(e)]}},ye=function(e,t){var n=t.findIndex((function(t){return t.ref===e}));return t[n]?t[n].uri:null},he=n(257),Ce=n.n(he),ve=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},Oe=function(e){return.001*e},Te=function(e){if(0===e.duration)return 0;var t=Oe(e.position),n=Oe(e.duration);return Math.round(t/n*100)},Ne="auth::authenticationTokenInvalid",De={encode:function(e,t,n){return{jwt:e,key:t,data:n}},decode:function(e){return JSON.parse(e)},encodeToJson:function(e,t,n){return JSON.stringify(De.encode(e,t,n))}},Se=De,je=function(e,t){e.dispatch(ke(t))},Pe=function(e){return e.composer?e.composer.uri:e.album.uri},_e=function(e,t,n){var r=Se.decode(t),a=r.key,c=r.data;switch(a){case Ne:console.log("AUTHENTICATION_TOKEN_INVALID: ".concat(c.error)),e.dispatch(H());break;case v:case O:c.track&&function(e,t,n){t.dispatch(W(e)),t.dispatch(oe(Pe(e)));var r=n.set(0,e.length);t.getState().jukebox.playbackState===U&&r.start()}(c.track,e,n);break;case T:case A:!function(e,t,n){switch(t){case L:case V:je(e,t),n.stop();break;case U:je(e,t),n.start()}}(e,c,n);break;case N:!function(e,t){t.dispatch(q(e)),e.forEach((function(e){t.dispatch(oe(Pe(e.track)))}))}(c,e);break;case I:case x:e.dispatch(re());break;case K:e.dispatch(be(c));break;case G:e.dispatch(be(c)),J("Volume Changed");break;case P:e.dispatch(ue(c));break;case _:n.set(c);break;default:console.log("Unknown message: ".concat(a," body: ").concat(c))}},Ae={loadInitial:function(e){["getCurrentTrack","getTimePosition","getState","getTrackList","getVolume"].forEach((function(t){e.dispatch(r[t]())}))}},we=function(){var e="http://".concat("jukebox-api-prod.local",":").concat("8080"),t=null,n=null;return function(a){return function(c){return function(o){var i=function(){return o.key===P},u=function(e){n=function(e,t){return Ce()({callback:function(n,r){e.dispatch(t.updateProgressTimer(n,r))},fallbackTargetFrameRate:1,disableRequestAnimationFrame:!0})}(a,r),a.dispatch(ee()),Ae.loadInitial(a)},l=function(e){return a.dispatch(te())},s=function(e){return _e(a,e,n)};switch(o.type){case B.CONNECT:return null!=t&&t.close(),(t=C()(e,{transports:["websocket"]})).on("message",s),t.on("connect",u),t.on("disconnect",l),void a.dispatch($());case B.DISCONNECT:return n&&n.reset(),void a.dispatch(ne());case B.SEND:if(i()&&ye(o.uri,a.getState().assets))return;return i()&&a.dispatch(ie(o.uri)),t.emit("message",Se.encodeToJson(a.getState().settings.token,o.key,o.params));default:return c(o)}}}}}(),Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_CURRENT_TRACK:return t.track;default:return e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.ADD_TRACKS:return t.list.map((function(e){return e.track}));default:return e}},xe=n(258),Ue=n(274);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(n,!0).forEach((function(t){Object(xe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=[],Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.NEW_IMAGE:return e.find((function(e){return t.uri&&e.ref===t.uri}))?e:[].concat(Object(Ue.a)(e),[{ref:t.uri}]);case B.RESOLVE_IMAGE:return e.map((function(e){return t.data[e.ref]&&t.data[e.ref][1]?Ve({},e,{uri:t.data[e.ref][1].uri}):e})).slice(0,200);default:return e}},Ge={position:0,duration:0,remaining:0},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.UPDATE_PROGRESS_TIMER:return{position:t.position,duration:t.duration,remaining:t.duration-t.position};default:return e}},Je={online:!1,volume:0,playbackState:V},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.CONNECTED:return Object.assign({},e,{online:!0});case B.DISCONNECTED:return Object.assign({},e,{online:!1});case B.UPDATE_VOLUME:return Object.assign({},e,{volume:t.volume});case B.UPDATE_PLAYBACK_STATE:return Object.assign({},e,{playbackState:t.state});default:return e}},Fe={token:null},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.STORE_TOKEN:return Object.assign({},e,{token:t.token});case B.CLEAR_STORE_TOKEN:return Object.assign({},e,{token:null});default:return e}},Ye=Object(l.combineReducers)({track:Re,tracklist:Ie,assets:Ke,timer:Be,jukebox:ze,settings:He}),We=n(548),qe=n(58),Xe=n(106),Qe=n.n(Xe),Ze=n(554),$e=n(547),et=n(555),tt=n(556),nt=n(553),rt=n(34),at=function(e,t){if((e+=1)<=100)return function(){t(e)}},ct=function(e,t){if((e-=1)>=0)return function(){t(e)}},ot=function(e){var t=e.disabled,n=e.volume,r=e.onVolumeChange;return c.a.createElement(nt.a.Group,{floated:"right"},c.a.createElement(nt.a,{className:"jb-volume-down",onClick:ct(n,r),disabled:t},c.a.createElement(rt.a,{name:"volume down"})),c.a.createElement(nt.a.Or,{text:n}),c.a.createElement(nt.a,{className:"jb-volume-up",onClick:at(n,r),disabled:t},c.a.createElement(rt.a,{name:"volume up"})))},it=n(113),ut=n(549),lt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={open:!1},n.clearButton=function(){return c.a.createElement(it.a,{horizontal:!0,size:"mini",as:"a",color:"red",onClick:n.show,className:"jb-clear-button"},"CLEAR")},n.show=function(){n.setState({open:!0})},n.handleConfirm=function(e){n.setState({open:!1}),n.props.onClear(e)},n.handleCancel=function(){n.setState({open:!1})},n}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.disabled?null:c.a.createElement("span",null,this.clearButton(),c.a.createElement(ut.a,{content:"Are you sure you want to nuke the playlist?",cancelButton:"No thanks",confirmButton:"Do it!",open:this.state.open,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}]),t}(a.Component),st=n(159),mt=function(e){return e.assets},dt=Object(st.a)([function(e){return e.track},mt],(function(e,t){return e?ye(e.album.uri,t):null})),ft=Object(st.a)([function(e){return e.tracklist},mt],(function(e,t){var n={};return e.forEach((function(e){n[e.album.uri]=ye(e.album.uri,t)})),n})),pt=n(552),Et=n(275),bt=n(273),kt=n(112),gt=n.n(kt),yt=(n(539),function(e){return e||(e=gt.a),c.a.createElement(Et.a,{src:e})}),ht=function(e){var t,n=e.track,r=e.image,a=e.progress,o=e.remaining;return n?c.a.createElement(pt.a,null,yt(r),c.a.createElement(pt.a.Content,null,c.a.createElement("div",{className:"progress-container"},c.a.createElement("span",{className:"remaining-text"},ve(o)),c.a.createElement("span",{className:"track-length"},ve(n.length)),c.a.createElement(bt.a,{percent:a})),c.a.createElement(pt.a.Header,null,n.name),c.a.createElement(pt.a.Meta,null,n.artist.name),function(e){if(!e)return null;var t=e.year?" (".concat(e.year,")"):null;return c.a.createElement(pt.a.Description,null,e.name,t)}(n.album),(t=n.composer)?c.a.createElement(pt.a.Description,null,t.name):null),c.a.createElement(pt.a.Content,{extra:!0},function(e){var t={spotify:"green"},n=e.split(":")[0];return t[n]?c.a.createElement(rt.a,{name:n,color:t[n]}):null}(n.uri))):c.a.createElement(pt.a,null,yt(null),c.a.createElement(pt.a.Content,null,c.a.createElement(pt.a.Header,null,"Nothing playing"),c.a.createElement(pt.a.Description,null,"Drag some music here or press play.")))},Ct=Object(u.b)((function(e){return{track:e.track,image:dt(e),progress:Te(e.timer),remaining:e.timer.remaining}}))((function(e){var t=e.track,n=e.image,r=e.progress,a=e.remaining;return c.a.createElement(ht,{track:t,image:n,progress:r,remaining:a})})),vt=function(){var e=Object(a.useContext)(y),t=e.googleUser,n=e.signIn,r=e.signOut,o=c.a.createElement(nt.a,{icon:"power off",floated:"right",onClick:function(){return n()},className:"jb-settings-toggle",title:"Login using Google"});return t&&t.profileObj&&(o=c.a.createElement(Et.a,{rounded:!0,size:"mini",floated:"right",title:t.profileObj.name,src:t.profileObj.imageUrl,onClick:function(){return r()}})),c.a.createElement(c.a.Fragment,null,o)},Ot=n(3),Tt=n.n(Ot),Nt=n(551),Dt=(n(540),function(e,t,n,r,a,o){var i,u,l;return n&&t.album&&(i=n[t.album.uri]),n&&t.composer&&(i=n[t.composer.uri]),i||(i=gt.a),function(e){var t,n,r=e.image,a=e.isCurrent,o=e.onClick,i=e.hasBeenPlayed;return a&&(t="current-image"),o&&!a&&(n="Click to remove from playlist",t="remove-image"),c.a.createElement(Et.a,{className:t,size:i?"tiny":"mini",src:r,title:n,onClick:o,inline:!0})}({image:i,hasBeenPlayed:o,isCurrent:r,onClick:e||r?void 0:(u=t.uri,l=a,function(){return l(u)})})}),St=function(e,t,n,r,a){var o;return t.map((function(t,i){var u=function(e,t){return!!e&&e.uri===t.uri}(r,t);return o&&(o+=t.length),u&&(o=Date.now()),c.a.createElement(Nt.a.Item,{className:Tt()({"current-track":u}),key:"".concat(i,"-").concat(t.uri)},Dt(e,t,n,u,a,o),c.a.createElement(Nt.a.Content,{className:Tt()({"track-info":!o})},function(e){return c.a.createElement(Nt.a.Header,{as:"h4"},e.name)}(t),function(e){return c.a.createElement(Nt.a.Description,null,e.artist.name," ",c.a.createElement("small",null,"(",ve(e.length),")"))}(t)))}))},jt=function(e){var t=e.disabled,n=e.tracks,r=e.images,a=e.currentTrack,o=e.onRemoveTrack;return n?c.a.createElement(Nt.a,{relaxed:!0},St(t,n,r,a,o)):null},Pt=function(e){var t=e.disabled,n=e.onPrevious,r=e.onNext;return c.a.createElement("span",null,function(e,t){return c.a.createElement(nt.a,{onClick:e,animated:"vertical",className:"jb-previous-button",disabled:t},c.a.createElement(nt.a.Content,{hidden:!0},"Prev"),c.a.createElement(nt.a.Content,{visible:!0},c.a.createElement(rt.a,{name:"step backward"})))}(n,t),function(e,t){return c.a.createElement(nt.a,{onClick:e,animated:"vertical",className:"jb-next-button",disabled:t},c.a.createElement(nt.a.Content,{hidden:!0},"Next"),c.a.createElement(nt.a.Content,{visible:!0},c.a.createElement(rt.a,{name:"step forward"})))}(r,t))},_t=function(e){var t=e.disabled,n=e.playbackState,r=e.onPlay,a=e.onStop,o=e.onPrevious,i=e.onNext;return c.a.createElement("span",null,c.a.createElement(Pt,{disabled:t,onPrevious:o,onNext:i}),function(e,t,n){return c.a.createElement(nt.a,{onClick:e,animated:"vertical",disabled:t===U||n,active:t===U,className:"jb-play-button"},c.a.createElement(nt.a.Content,{hidden:!0},"Play"),c.a.createElement(nt.a.Content,{visible:!0},c.a.createElement(rt.a,{name:"play"})))}(r,n,t),function(e,t,n){return c.a.createElement(nt.a,{onClick:e,animated:"vertical",disabled:t===V||n,active:t===V,className:"jb-stop-button"},c.a.createElement(nt.a.Content,{hidden:!0},"Stop"),c.a.createElement(nt.a.Content,{visible:!0},c.a.createElement(rt.a,{name:"stop"})))}(a,n,t))},At=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(c.a.createElement("div",{title:"Drag in Spotify tracks to add to playlist"},this.props.children))}}]),t}(a.Component),wt=Object(qe.DropTarget)((function(e){return e.accepts}),{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},(function(e,t){return{connectDropTarget:e.dropTarget()}}))(At),Rt=function(e){var t=e.disabled,n=e.onDrop,r=e.children;return t?r:c.a.createElement(qe.DragDropContextProvider,{backend:Qe.a},c.a.createElement(wt,{accepts:B.DROP_TYPES,onDrop:n},r))},It=Object(qe.DragDropContext)(Qe.a)((function(){var e=Object(u.d)((function(e){return e.jukebox})),t=Object(u.d)((function(e){return e.tracklist})),n=Object(u.d)((function(e){return e.track})),r=Object(u.d)((function(e){return ft(e)})),o=Object(u.c)(),i=Object(a.useContext)(y),l=i.isSignedIn,s=i.googleUser;return Object(a.useEffect)((function(){return o(Z()),function(){o(te())}}),[o]),o(l?F(s.tokenId):H()),c.a.createElement(Ze.a.Dimmable,{blurring:!0,className:"jukebox-dashboard",dimmed:!e.online},c.a.createElement(vt,null),c.a.createElement(ot,{disabled:!l,volume:e.volume,onVolumeChange:function(e){return o(ge(e))}}),c.a.createElement(_t,{disabled:!l,playbackState:e.playbackState,onPlay:function(){return o(me())},onStop:function(){return o(de())},onNext:function(){return o(fe())},onPrevious:function(){return o(pe())}}),c.a.createElement($e.a,null),c.a.createElement(et.a,{columns:2},c.a.createElement(et.a.Column,{width:4},c.a.createElement(Rt,{disabled:!l,onDrop:function(e,t){t&&o(Y(t.getItem().urls[0]))}},c.a.createElement(tt.a,{size:"small"},"Current Track"),c.a.createElement(Ct,null))),c.a.createElement(et.a.Column,{width:12},c.a.createElement(tt.a,{size:"small"},"Playlist ",c.a.createElement(lt,{disabled:!l,onClear:function(){return o(se())}})),c.a.createElement(jt,{disabled:!l,images:r,tracks:t,currentTrack:n,onRemoveTrack:function(e){return o(X(e))}}))))})),xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,Ut=Object(l.createStore)(Ye,xt(Object(l.applyMiddleware)(we))),Lt=function(){var e=Object(d.useGoogleLogin)({clientId:"383651533710-l72a24lkiulclgqes5mkgt5ujb2rspiu.apps.googleusercontent.com",hostedDomain:"kyanmedia.com"});return c.a.createElement(u.a,{store:Ut},c.a.createElement(We.a,{fluid:!0},c.a.createElement(y.Provider,{value:e},c.a.createElement(g,null,c.a.createElement(m.a,null),c.a.createElement(It,null)))))};n(541);i.a.render(c.a.createElement(Lt,null),document.getElementById("root"))}},[[285,1,2]]]);
//# sourceMappingURL=main.17a6a5aa.chunk.js.map